-- MySQL dump 10.14  Distrib 5.5.60-MariaDB, for Linux (x86_64)
--
-- Host: localhost    Database: solo
-- ------------------------------------------------------
-- Server version	5.5.60-MariaDB

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `b3_solo_archivedate`
--

DROP TABLE IF EXISTS `b3_solo_archivedate`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_archivedate` (
  `oId` varchar(19) NOT NULL COMMENT '主键',
  `archiveTime` bigint(20) NOT NULL COMMENT '存档日期时间，该月份第一天的时间戳',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='存档日期表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_archivedate`
--

LOCK TABLES `b3_solo_archivedate` WRITE;
/*!40000 ALTER TABLE `b3_solo_archivedate` DISABLE KEYS */;
INSERT INTO `b3_solo_archivedate` VALUES ('1562037729387',1561910400000),('1565165800616',1564588800000),('1568010345723',1567267200000);
/*!40000 ALTER TABLE `b3_solo_archivedate` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_archivedate_article`
--

DROP TABLE IF EXISTS `b3_solo_archivedate_article`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_archivedate_article` (
  `oId` varchar(19) NOT NULL COMMENT '主键',
  `archiveDate_oId` varchar(19) NOT NULL COMMENT '存档日期 id',
  `article_oId` varchar(19) NOT NULL COMMENT '文章 id',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='存档-文章关联表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_archivedate_article`
--

LOCK TABLES `b3_solo_archivedate_article` WRITE;
/*!40000 ALTER TABLE `b3_solo_archivedate_article` DISABLE KEYS */;
INSERT INTO `b3_solo_archivedate_article` VALUES ('1562038241333','1562037729387','1562038241065'),('1562118592933','1562037729387','1562118592576'),('1562119376615','1562037729387','1562119376259'),('1562123850792','1562037729387','1562123850587'),('1562313070281','1562037729387','1562313070127'),('1562553987825','1562037729387','1562553987668'),('1563260290525','1562037729387','1563260290067'),('1563261094920','1562037729387','1563261094665'),('1563261590458','1562037729387','1563261590204'),('1563262364991','1562037729387','1563262364838'),('1563262968063','1562037729387','1563262967809'),('1563263255322','1562037729387','1563263254966'),('1563518615673','1562037729387','1563518615205'),('1565165800667','1565165800616','1565165800252'),('1565168296407','1565165800616','1565168296048'),('1566524441300','1565165800616','1566524440966'),('1566525315238','1565165800616','1566525314983'),('1566868476028','1565165800616','1566868475767'),('1568010345774','1568010345723','1568010345563');
/*!40000 ALTER TABLE `b3_solo_archivedate_article` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_article`
--

DROP TABLE IF EXISTS `b3_solo_article`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_article` (
  `oId` varchar(19) NOT NULL COMMENT '主键',
  `articleTitle` varchar(255) NOT NULL COMMENT '文章标题',
  `articleAbstract` text NOT NULL COMMENT '文章摘要 Markdown',
  `articleAbstractText` text NOT NULL COMMENT '文章摘要纯文本',
  `articleTags` text NOT NULL COMMENT '文章标签，英文逗号分隔',
  `articleAuthorId` varchar(19) NOT NULL COMMENT '文章作者 id',
  `articleCommentCount` int(11) NOT NULL COMMENT '文章评论计数',
  `articleViewCount` int(11) NOT NULL COMMENT '文章浏览计数',
  `articleContent` mediumtext NOT NULL COMMENT '文章正文内容',
  `articlePermalink` varchar(255) NOT NULL COMMENT '文章访问路径',
  `articlePutTop` char(1) NOT NULL COMMENT '文章是否置顶',
  `articleCreated` bigint(20) NOT NULL COMMENT '文章创建时间戳',
  `articleUpdated` bigint(20) NOT NULL COMMENT '文章更新时间戳',
  `articleRandomDouble` double NOT NULL COMMENT '文章随机数，用于快速查询随机文章列表',
  `articleSignId` varchar(19) NOT NULL COMMENT '文章关联的签名档 id',
  `articleCommentable` char(1) NOT NULL COMMENT '文章是否可以评论',
  `articleViewPwd` varchar(128) NOT NULL COMMENT '文章浏览密码，留空为不设置访问密码',
  `articleImg1URL` varchar(255) NOT NULL COMMENT '文章首图地址',
  `articleStatus` int(11) NOT NULL COMMENT '文章状态，0：已发布，1：草稿',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='文章表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_article`
--

LOCK TABLES `b3_solo_article` WRITE;
/*!40000 ALTER TABLE `b3_solo_article` DISABLE KEYS */;
INSERT INTO `b3_solo_article` VALUES ('1562038241065','通过Docker方式安装solo','通过Docker方式安装solo，链接本地数据库','通过Docker方式安装solo，链接本地数据库','solo安装,docker','1562037727771',1,79,'# 准备服务器\n# 下载源码（未用到）\n\n[https://github.com/b3log/solo/tree/v3.6.2](https://github.com/b3log/solo/tree/v3.6.2)\n\n```\ncd /opt\ngit clone https://github.com/b3log/solo.git\n```\n\n# 安装mariadb\n\n```\n# 安装 MySQL, 如果不使用 Mysql 可以跳过相关 Mysql 安装和配置, 支持sqlite3, mysql, postgres等\n$ yum -y install mariadb mariadb-devel mariadb-server MariaDB-shared # centos7下叫mariadb, 用法与mysql一致\n$ systemctl enable mariadb\n$ systemctl start mariadb\n# 创建数据库 Jumpserver 并授权\n$ DB_PASSWORD=`cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 24`  # 生成随机数据库密码\n$ echo -e \"\\033[31m 你的数据库密码是 $DB_PASSWORD \\033[0m\"\n$ mysql -uroot -e \"create database solo default charset \'utf8\'; grant all on solo.* to \'solo\'@\'127.0.0.1\' identified by \'$DB_PASSWORD\'; flush privileges;\"\n\nmysql\nupdate user set password=password(\"password\") where user=\'root\';\ngrant all on solo.* to \'solo\'@\'localhost\' identified by \'password\'; flush privileges;\nFLUSH PRIVILEGES;\n``````\n\n你的数据库密码是 cUfgue4hUoDyL2UxN9G1pGLn\n<img src=\"https://uploader.shimo.im/f/r754UJoyAK8Ee5Gs.png\"/>\n\n\n\n域名解析到公网地址\n\n<img src=\'https://uploader.shimo.im/f/IxyJhfVKtfkA5Jdk.png\'/>\n\n\n# 安装 Nginx\n$ vi /etc/yum.repos.d/nginx.repo\n```\n[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/7/$basearch/\ngpgcheck=0\nenabled=1\n```\n$ yum -y install nginx\n$ systemctl enable nginx\n\n\nvim /etc/nginx/conf.d/solo.conf\n\n```\nserver {\n   listen        80;\n   server_name    jiashu.club;\n   client_max_body_size 100m;\n   access_log     off;\n\n   location / {\n        proxy_pass http://localhost:8080;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header Host $host;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n```\n\n\n# 删除docker\n\n\n```yum remove docker*```\n\n\n# 安装 docker 部署 solo\n```\n$ yum install -y yum-utils device-mapper-persistent-data lvm2\n$ yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n$ yum makecache fast\n$ rpm --import https://mirrors.aliyun.com/docker-ce/linux/centos/gpg\n$ yum -y install docker-ce\n$ systemctl enable docker\n$ curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io\n$ systemctl restart docker\n```\n\n# Docker 部署\n\n获取最新镜像：\n\n```docker pull b3log/solo```\n\n使用 MySQL\n\n先手动建库（库名 solo，字符集使用 utf8mb4，排序规则 utf8mb4_general_ci），然后启动容器：\n\n```\ndocker run --detach --name solo --network=host \\\n    --env RUNTIME_DB=\"MYSQL\" \\\n    --env JDBC_USERNAME=\"solo\" \\\n    --env JDBC_PASSWORD=\"password\" \\\n    --env JDBC_DRIVER=\"com.mysql.cj.jdbc.Driver\" \\\n    --env JDBC_URL=\"jdbc:mysql://127.0.0.1:3306/solo?useUnicode=yes&characterEncoding=UTF-8&useSSL=false&serverTimezone=UTC\" \\\n    b3log/solo --listen_port=80 --server_scheme=http --server_host=jiashu.club \n```\n\n启动参数说明：\n\n*   --listen_port：进程监听端口\n*   --server_scheme：最终访问协议，如果反代服务启用了 HTTPS 这里也需要改为 https\n*   --server_host：最终访问域名或公网 IP，不要带端口号\n\n完整启动参数的说明可以使用 -h 来查看。\n\n\n# Docker 升级\n\n1.  拉取最新镜像\n2.  重启容器\n\n可参考如下重启脚本，并通过 crontab 每日凌晨运行来实现自动更新。\n\n`docker-restart.sh`\n\n```\n#!/bin/bash\n\n\n#\n# Solo docker 更新重启脚本\n#\n# 1. 请注意修改参数\n# 2. 可将该脚本加入 crontab，每日凌晨运行来实现自动更新\n#\n\n\ndocker pull b3log/solo\ndocker stop solo\ndocker rm solo\ndocker run --detach --name solo --network=host \\\n    --env RUNTIME_DB=\"MYSQL\" \\\n    --env JDBC_USERNAME=\"solo\" \\\n    --env JDBC_PASSWORD=\"password\" \\\n    --env JDBC_DRIVER=\"com.mysql.cj.jdbc.Driver\" \\\n    --env JDBC_URL=\"jdbc:mysql://127.0.0.1:3306/solo?useUnicode=yes&characterEncoding=UTF-8&useSSL=false&serverTimezone=UTC\" \\\n    b3log/solo --listen_port=8080 --server_scheme=http --server_host=jiashu.club\n   \n```\n\n# Docker Compose\n\n请参考[这里](https://github.com/liumapp/solo-in-docker)，感谢 [@liumapp](https://github.com/liumapp) 提供 ❤️\n\n[百度站长统计](https://tongji.baidu.com/web/help/article?id=170&type=0)\n[查看统计](https://tongji.baidu.com/sc-web/10000007109/home/site/index?siteId=13626423)','/articles/2019/07/02/1562038241065.html','0',1562038241222,1562061016626,0.9309428334986316,'1','1','','https://uploader.shimo.im/f/r754UJoyAK8Ee5Gs.png',0),('1562118592576','博客使用图床','使用github仓库当作博客图床','使用github仓库当作博客图床','picgo,图床,github','1562037727771',0,29,'参考：https://juejin.im/post/5c38b63f6fb9a04a0a5f68b3\r\nGITHUB：https://github.com/Molunerfinn/PicGo\r\n快速上手：https://picgo.github.io/PicGo-Doc/zh/guide/getting-started.html\r\ngithub图床\rTOKEN\r\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/rm/20190703094545.png)','/articles/2019/07/03/1562118592576.html','0',1562118592780,1562118760804,0.587878223139389,'1','1','','https://raw.githubusercontent.com/samucc/mypicbed/master/rm/20190703094545.png',0),('1562119376259','免费申请GCP资源 SSR VPN搭建','免费申请GCP资源（Google Cloud Platform）VPN SSR搭建','免费申请GCP资源（Google Cloud Platform）VPN SSR搭建','GCP,SSR,VPN','1562037727771',1,191,'# 免费申请GCP资源（Google Cloud Platform）VPN SSR搭建\n参考：[Google Cloud Platform免费申请&一键搭建SSR & BBR加速教程](https://www.wmsoho.com/google-cloud-platform-ssr-bbr-tutorial/)\n\n生成密钥：\n[https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys?hl=zh-CN](https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys?hl=zh-CN)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190703100050.png)\n\n创建好的GCP实例：\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190703100020.png)','/articles/2019/07/03/1562119376259.html','0',1562119376463,1562119376463,0.7025458759930682,'1','1','','https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190703100050.png',0),('1562123850587','我在 GitHub 上的开源项目','1. jeshop Java ?0&nbsp;&nbsp;⭐️0&nbsp;&nbsp;?0 Automatically exported from code.google.com/p/jeshop','jeshop Java ?0&nbsp;&nbsp;⭐️0&nbsp;&nbsp;?0 Automatically exported from code.google.com/p/jeshop','开源,GitHub','1562037727771',0,40,'<!-- 该页面会被定时任务自动覆盖，所以请勿手工更新 -->\n<!-- 如果你有更漂亮的排版方式，请发 issue 告诉我们 -->\n\n### 1. [jeshop](https://github.com/samucc/jeshop) <kbd title=\"主要编程语言\">Java</kbd> <span style=\"font-size: 12px;\">[?`0`](https://github.com/samucc/jeshop/watchers \"关注数\")&nbsp;&nbsp;[⭐️`0`](https://github.com/samucc/jeshop/stargazers \"收藏数\")&nbsp;&nbsp;[?`0`](https://github.com/samucc/jeshop/network/members \"分叉数\")</span>\n\nAutomatically exported from code.google.com/p/jeshop\n\n','/my-github-repos','0',1562123850690,1562123850690,0.8693745871552876,'1','1','','https://img.hacpai.com/bing/20180209.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100',0),('1562313070127','WEB页集成AliPlayer','使用阿里播放器播放视频','使用阿里播放器播放视频','AliPlayer,视频播放','1562037727771',0,70,'# 官方参考\n[Demo地址](https://player.alicdn.com/aliplayer/presentation/index.html?type=cover)\n[接口说明](https://help.aliyun.com/document_detail/62941.html?spm=a2c4g.11186623.6.713.Q0wYfV)\n\n# WEB集成\n## 下载播放器需要的js，css，img等资源\n[图片下载地址](`https://g.alicdn.com/de/prismplayer/2.8.2/skins/default/img/bigplay.png`)\n替换bigplay为bigplay,cc,dragcursor,dragcursorhover,fullscreen,pauseanimation,playanimation,setting,smallpause,smallplay,smallscreen,snapshot,volume。\n一共十三个文件。\n\n[aliplayercomponents.min.js](https://player.alicdn.com/aliplayer/presentation/js/aliplayercomponents.min.js)\n[aliplayer-min.js](https://g.alicdn.com/de/prismplayer/2.8.2/aliplayer-min.js)\n[aliplayer-min.css](https://g.alicdn.com/de/prismplayer/2.8.2/skins/default/aliplayer-min.css)\n资源图如下\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190705154738.png)\n\n## 初始化代码\n```\nplayer = new Aliplayer({\n        id: \"player-con\",\n        source: cur_video_path,\n        width: \"100%\",\n        height: \"500px\",\n        autoplay: true,//是否自动播放\n        isLive: false,//是不是直播\n        \"extraInfo\": {//定制型接口参数\n            \"crossOrigin\": \"anonymous\"\n        },\n        \"skinLayout\": [//按钮UI\n            { \"name\": \"bigPlayButton\", \"align\": \"blabs\", \"x\": 30, \"y\": 80 },\n            { \"name\": \"H5Loading\", \"align\": \"cc\" },\n            { \"name\": \"errorDisplay\", \"align\": \"tlabs\", \"x\": 0, \"y\": 0 },\n            { \"name\": \"infoDisplay\" },\n            { \"name\": \"tooltip\", \"align\": \"blabs\", \"x\": 0, \"y\": 56 },\n            { \"name\": \"thumbnail\" },\n            {\n                \"name\": \"controlBar\", \"align\": \"blabs\", \"x\": 0, \"y\": 0,\n                \"children\": [\n                  { \"name\": \"progress\", \"align\": \"blabs\", \"x\": 0, \"y\": 44 },\n                  { \"name\": \"playButton\", \"align\": \"tl\", \"x\": 15, \"y\": 12 },\n                  { \"name\": \"timeDisplay\", \"align\": \"tl\", \"x\": 10, \"y\": 7 },\n                  { \"name\": \"fullScreenButton\", \"align\": \"tr\", \"x\": 10, \"y\": 12 },\n                  { \"name\": \"subtitle\", \"align\": \"tr\", \"x\": 15, \"y\": 12 },\n                  { \"name\": \"setting\", \"align\": \"tr\", \"x\": 15, \"y\": 12 },\n                  { \"name\": \"volume\", \"align\": \"tr\", \"x\": 5, \"y\": 10 },\n                  { \"name\": \"snapshot\", \"align\": \"tr\", \"x\": 10, \"y\": 12 }\n                ]\n            }\n        ],\n          //https://g.alicdn.com/de/prismplayer/2.8.2/skins/default/img/bigplay.png\n        progressMarkers:[\n            {\n              offset: 30,\n              isCustomized:true,\n              coverUrl: \'https://alivc-demo-vod.aliyuncs.com/image/cover/9A3F562E595E4764AD1DD546FA52C6E5-6-2.png\',\n              title: \'test title\',\n              describe: \'test string\',\n            },\n            {\n              offset:50,\n              isCustomized:true,\n              coverUrl: \'https://alivc-demo-vod.aliyuncs.com/image/cover/1E7F402241CD4C0F94AD2BBB5CCC3EC7-6-2.png\',\n              title: \'test title\',\n              describe: \'test string\',\n            },\n            {\n              offset:150,\n              isCustomized:true,\n              coverUrl: \'https://alivc-demo-vod.aliyuncs.com/image/cover/553AEA01161342C8A2B1756E83B69B5B-6-2.png\',\n              title: \'test title\',\n              describe: \'test string\',\n            }, {\n              offset:120,\n              isCustomized:true,\n              coverUrl: \'https://alivc-demo-vod.aliyuncs.com/image/cover/553AEA01161342C8A2B1756E83B69B5B-6-2.png\',\n              title: \'test title\',\n              describe: \'test string\',\n            }\n        ],\n        components: [\n            {\n              name: \'MemoryPlayComponent\',\n              type: AliPlayerComponent.MemoryPlayComponent,\n              args: [true] //记忆自动播放\n            },\n            {\n              name: \'ProgressComponent\',\n              type: AliPlayerComponent.ProgressComponent\n            },\n            {\n              name: \'PlaylistComponent\',\n              type: AliPlayerComponent.PlaylistComponent,\n              args: [\n              video_list\n              ]\n            }\n        ]\n    }, function (player) {\n        console.log(\"The player is created\");\n    });\n```\n\n## 使用的组件插件\n### 记忆播放：(点击播放，自动播放）\n\n```\n<div id=\"player-con\"></div>\n<script>\n  var player = new Aliplayer({\n    id: \"player-con\",\n    source: \"//player.alicdn.com/video/editor.mp4\",\n    width: \"100%\",\n    height: \"500px\",\n    autoplay: true,\n    isLive: false,\n    components: [{\n      name: \'MemoryPlayComponent\',\n      type: AliPlayerComponent.MemoryPlayComponent,\n    }]\n  }, function (player) {\n    console.log(\"The player is created\");\n  });\n</script>\n\n\n<div id=\"player-con\"></div>\n<script>\n  var player = new Aliplayer({\n    id: \"player-con\",\n    source: \"//player.alicdn.com/video/editor.mp4\",\n    width: \"100%\",\n    height: \"500px\",\n    autoplay: true,\n    isLive: false,\n    components: [{\n      name: \'MemoryPlayComponent\',\n      type: AliPlayerComponent.MemoryPlayComponent,\n      /* Set the first parameter to true to enable auto play. The default is false. */\n      args: [true]\n    }]\n  }, function (player) {\n    console.log(\"The player is created\");\n  });\n</script\n```\n### 视频打点\n\n```\n<div id=\"player-con\"></div>\n<script>\n  var player = new Aliplayer({\n    id: \"player-con\",\n    source: \"//player.alicdn.com/video/editor.mp4\",\n    width: \"100%\",\n    height: \"500px\",\n    autoplay: true,\n    isLive: false,\n    progressMarkers:[{\n      offset: 30,\n      isCustomized:true,\n      coverUrl: \'https://alivc-demo-vod.aliyuncs.com/image/cover/9A3F562E595E4764AD1DD546FA52C6E5-6-2.png\',\n      title: \'test title\',\n      describe: \'test string\',\n    }, {\n      offset:50,\n      isCustomized:true,\n      coverUrl: \'https://alivc-demo-vod.aliyuncs.com/image/cover/1E7F402241CD4C0F94AD2BBB5CCC3EC7-6-2.png\',\n      title: \'test title\',\n      describe: \'test string\',\n    }, {\n      offset:150,\n      isCustomized:true,\n      coverUrl: \'https://alivc-demo-vod.aliyuncs.com/image/cover/553AEA01161342C8A2B1756E83B69B5B-6-2.png\',\n      title: \'test title\',\n      describe: \'test string\',\n    }, {\n      offset:120,\n      isCustomized:true,\n      coverUrl: \'https://alivc-demo-vod.aliyuncs.com/image/cover/553AEA01161342C8A2B1756E83B69B5B-6-2.png\',\n      title: \'test title\',\n      describe: \'test string\',\n    }],\n    components: [{\n      name: \'ProgressComponent\',\n      type: AliPlayerComponent.ProgressComponent\n    }]\n  }, function (player) {\n    console.log(\"The player is created\");\n  });\n</script>\n```\n### 播放列表:\n\n```\n<div id=\"player-con\"></div>\n<script>\n  var player = new Aliplayer({\n    id: \"player-con\",\n    source: \"//player.alicdn.com/video/editor.mp4\",\n    width: \"100%\",\n    height: \"500px\",\n    autoplay: true,\n    isLive: false,\n    components: [{\n      name: \'PlaylistComponent\',\n      type: AliPlayerComponent.PlaylistComponent,\n      args: [[{\n        name: \'阿里云播放器介绍\',\n        source: \'//player.alicdn.com/video/editor.mp4\'\n      }, {\n        name: \'趣拍演示视频\',\n        source: \'//player.alicdn.com/resource/player/qupai.mp4\'\n      }, {\n        name: \'云栖大会\',\n        source: \'http://player.pier39.cn/video/yunxi.mp4\'\n      }, {\n        name: \'4K 阿里视频云介绍\',\n        source: \'https://player.alicdn.com/video/apsaravideo4k.mp4\'\n      }]]\n    }]\n  }, function (player) {\n    console.log(\"The player is created\");\n  });\n</script>\n```\n\n### 截图\n```\n<div id=\"player-con\"></div>\r\n<script>\r\n  var player = new Aliplayer({\r\n    id: \"player-con\",\r\n    source: \"//player.alicdn.com/video/editor.mp4\",\r\n    width: \"100%\",\r\n    height: \"500px\",\r\n    autoplay: true,\r\n    isLive: false,\r\n    \"extraInfo\": {\r\n      \"crossOrigin\": \"anonymous\"\r\n    },\r\n    \"skinLayout\": [\r\n      { \"name\": \"bigPlayButton\", \"align\": \"blabs\", \"x\": 30, \"y\": 80 },\r\n      { \"name\": \"H5Loading\", \"align\": \"cc\" },\r\n      { \"name\": \"errorDisplay\", \"align\": \"tlabs\", \"x\": 0, \"y\": 0 },\r\n      { \"name\": \"infoDisplay\" },\r\n      { \"name\": \"tooltip\", \"align\": \"blabs\", \"x\": 0, \"y\": 56 },\r\n      { \"name\": \"thumbnail\" },\r\n      { \r\n        \"name\": \"controlBar\", \"align\": \"blabs\", \"x\": 0, \"y\": 0,\r\n        \"children\": [\r\n          { \"name\": \"progress\", \"align\": \"blabs\", \"x\": 0, \"y\": 44 },\r\n          { \"name\": \"playButton\", \"align\": \"tl\", \"x\": 15, \"y\": 12 },\r\n          { \"name\": \"timeDisplay\", \"align\": \"tl\", \"x\": 10, \"y\": 7 },\r\n          { \"name\": \"fullScreenButton\", \"align\": \"tr\", \"x\": 10, \"y\": 12 },\r\n          { \"name\": \"subtitle\", \"align\": \"tr\", \"x\": 15, \"y\": 12 },\r\n          { \"name\": \"setting\", \"align\": \"tr\", \"x\": 15, \"y\": 12 },\r\n          { \"name\": \"volume\", \"align\": \"tr\", \"x\": 5, \"y\": 10 },\r\n          { \"name\": \"snapshot\", \"align\": \"tr\", \"x\": 10, \"y\": 12 }\r\n        ]\r\n      }\r\n    ]\r\n  }, function (player) {\r\n    console.log(\"The player is created\");\r\n  });\r\n\r\n  /* HTML5 snapshot button and success callback */\r\n  player.on(\'snapshoted\', function (data) {\r\n    var pictureData = data.paramData.base64\r\n    var downloadElement = document.createElement(\'a\')\r\n    downloadElement.setAttribute(\'href\', pictureData)\r\n    var fileName = \'Aliplayer\' + Date.now() + \'.png\'\r\n    downloadElement.setAttribute(\'download\', fileName)\r\n    downloadElement.click()\r\n    pictureData = null\r\n  })\r\n</script>\n```\n\n## 事件\n### 暂停事件\n```\nplayer.on(\'pause\',function(e) {\n        console.log(player.getSourceUrl());\n        var current_time_seconds = player.getCurrentTime();\n        var result = sec_to_time(current_time_seconds);\n    });\n```\n### ready事件\n```\nplayer.on(\'ready\',function(e) {\n        //播放列表切换属于ready事件里面的操作\n}\n```\n## 播放器页面快捷键设置\n```\n//播放器快捷键\ndocument.onkeydown=function(e) {\n    var keyNum = window.event ? e.keyCode : e.which;\n    //空格暂停播放\n    if (keyNum == \'32\') {\n        var videoplay = $(\'input[name=\"videoplay\"]\').val();//定义一个隐藏域 来区分播放状态\n        if (videoplay == \"0\") {\n            player.pause();\n            $(\'input[name=\"videoplay\"]\').val(1);\n        } else {\n            player.play();\n            $(\'input[name=\"videoplay\"]\').val(0);\n        }\n    } else if (keyNum == \'37\') {//快进\n        var videotimes = player.getDuration();\n        var playnum = player.getCurrentTime();\n        playnum = parseInt(playnum - 10);\n        if (playnum <= (videotimes - 30)) {\n            player.seek(playnum);\n        }\n    } else if(keyNum==\'39\'){//快退\n        var videotimes = player.getDuration();\n        var playnum = player.getCurrentTime();\n        playnum =parseInt(playnum +10);\n        if(playnum>15){\n            player.seek(playnum);\n        }else{\n            player.seek(0);\n        }\n    }else if(keyNum==\'38\'){ //音量大小 //获得当前音量\n        var volume =parseInt(player.getVolume()*100);\n        if(volume<100){\n            volume = (volume+1)/100;\n            player.setVolume(volume);\n        }\n    }else if(keyNum==\'40\'){\n        var volume =parseInt(player.getVolume()*100);\n        if(volume>0){\n            volume = (volume-1)/100;\n            player.setVolume(volume);\n        }\n    }\n};\n```\n\n## 时分秒 与 秒 互转\n```\n/** * 时间秒数格式化 * @param s 秒数 * @returns {*} 格式化后的时分秒 */\nfunction sec_to_time (s) {\n    var t;\n    if(s > -1){\n        var hour = Math.floor(s/3600);\n        var min = Math.floor(s/60) % 60;\n        var sec = s % 60;\n        if(hour < 10) {\n            t = \'0\'+ hour + \":\";\n        } else {\n            t = hour + \":\";\n        }\n\n        if(min < 10){t += \"0\";}\n        t += min + \":\";\n        if(sec < 10){t += \"0\";}\n        t += sec.toFixed(2);\n    }\n    return t;\n};\n/** * 时间转为秒 * @param time 时间(00:00:00) * @returns {string} 秒数 */\nfunction time_to_sec(time) {\n    var s = \'\';\n\n    var hour = time.split(\':\')[0];\n    var min = time.split(\':\')[1];\n    var sec = time.split(\':\')[2];\n\n    s = Number(hour*3600) + Number(min*60) + Number(sec);\n\n    return s;\n};\n```\n\n## 效果图\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190705160904.png)','/articles/2019/07/05/1562313070127.html','0',1562313070229,1562314188726,0.454532801761389,'1','1','','https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190705154738.png',0),('1562553987668','markdown语法','','1 2 3 4 5 6 **这是加粗的文字** *这是倾斜的文字*` ***这是斜体加粗的文字*** ~~这是加删除线的文字~~   这是引用的内容  这是引用的内容         这是引用的内容               ![](https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/ u=702257389,1274025419&amp;fm=27&amp;gp=0.jpg)  列表内容 列表内容 列表内容  1.列表内容  2.列表内容 3.列表内容    asdfasdf    姓名技能排行   刘备哭大哥 关羽打二哥 张飞骂三弟   st=&gt;start: 开始 op=&gt;operation: My Operation cond=&gt;condition: Yes or No? e=&gt;end st-&gt;op-&gt;cond cond(yes)-&gt;e cond(no)-&gt;op &amp;```','待分类','1562037727771',0,0,'# 1\n## 2\n### 3\n#### 4\n##### 5\n###### 6\n```\n**这是加粗的文字**\n*这是倾斜的文字*`\n***这是斜体加粗的文字***\n~~这是加删除线的文字~~\n```\n\n> 这是引用的内容\n>> 这是引用的内容\n>>>>>>>>>> 这是引用的内容\n\n\n---\n----\n***\n*****\n\n![](https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/\nu=702257389,1274025419&fm=27&gp=0.jpg)\n\n- 列表内容\n+ 列表内容\n* 列表内容\n\n- 1.列表内容\n    - 2.列表内容\n    - 3.列表内容\n\n```\nasdfasdf\n```\n姓名|技能|排行  \n---|---|---  \n刘备|哭|大哥 \n关羽|打|二哥  \n张飞|骂|三弟\n\n\n```flow\nst=>start: 开始\nop=>operation: My Operation\ncond=>condition: Yes or No?\ne=>end\nst->op->cond\ncond(yes)->e\ncond(no)->op\n&```\n','/articles/2019/07/08/1562553987668.html','0',1562553987773,1562553987773,0.24072383969130162,'1','1','','https://img.hacpai.com/bing/20171225.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100',1),('1563260290067','安装IPMI相关并使用IPMI-Exporter监控','Prometheus使用IPMI-Exporter监控，主机需要安装IPMITools并设置账号，开启网络口','Prometheus使用IPMI-Exporter监控，主机需要安装IPMITools并设置账号，开启网络口','IPMITools,IPMI,IPMI-Exporter,Prometheus','1562037727771',0,99,'# RPM安装FreeIPMI（Prometheus的IPMI-Exporter需要）\n\n\n=============================================\n\n## rpm安装（根据系统不同，找不同的包）\n\n[https://centos.pkgs.org/7/centos-x86_64/freeipmi-1.5.7-2.el7.x86_64.rpm.html](https://centos.pkgs.org/7/centos-x86_64/freeipmi-1.5.7-2.el7.x86_64.rpm.html)\n\n![null](https://uploader.shimo.im/f/82gtDxrsxyEis38b.png!thumbnail)\n\n[RPM包说明](http://wiki.jikexueyuan.com/project/linux/rpm.html)\n\n![null](https://uploader.shimo.im/f/orYvyWeLkXQcOGxn.png!thumbnail)\n\n`rpm -ivh freeipmi-1.5.7-2.el7.x86_64.rpm`\n\n![null](https://uploader.shimo.im/f/8WnUDlLtrr42nYhj.png!thumbnail)\n\n```\nfind / -name ipmiconsole\nfind / -name bmc-info\nfind / -name ipmi-dcmi\n```\n\n查看对应的impiconsole，bmc-info和ipmi-dcmi全部安装完成\n\n![null](https://uploader.shimo.im/f/c2ID1M0aBVoP7BmJ.png!thumbnail)\n\n# 安装IPMI Tool（测试成功的是Dell机器）\n\n\n=============================\n\n## 设置本地源 并安装OpenIPMI-tools\n\n\n---------------------------\n\n需要根据不同系统设置不同的数据。\n\n```\nvim /etc/yum.repos.d/local.repo\n\n\n[local]\nNAME=sjw\nbaseurl=http://10.172.49.1/iso\ngpgcheck=0\nenable=1\n\n\nyum clean all \nyum repolist\n\n\nyum install -y OpenIPMI-too\n```\n\n需要到OpenIPMI-tools的包并安装\n\n# 设置IPMI 账号\n\n\n=============\n\n## 查看IPMI用户列表\n\n\n--------------\n\n`ipmitool user list 1`\n\n> ID  Name      Callin  Link Auth IPMI Msg   Channel Priv Limit\n\n> 2   root             true    true       true       ADMINISTRATOR\n\n> 3   admin            true    true       true       ADMINISTRATOR\n\n> 5   yunwei           true    true       true       ADMINISTRATOR\n\n> ......\n\n## 创建用户（修改ID=7为prom账号）\n\n\n-----------------------\n\n如果没有prom用户（默认prom账号是7，如果不是请联系并告知）\n\n```\nipmitool user set name 7 prom\nipmitool user set password 7  \n```\n\n> Password for user 2: Linux@web7 #密码默认是这个，待后面测试不通过联系手动修改\n\n> Password for user 2: \n\n> Set User Password command successful (user 2)\n\n `ipmitool user enable 7   #新用户需要设置为enable。已有用户无需设置`\n\n## 设置用户权限\n\n\n----------\n\n设置用户权限（如果权限和绿色部分一直，则无需跑下面的命令）\n\nchannel 为1（默认为1），user ID为7，privilege为4\n\nprivilege的值定义如下；  1 callback  2 user  3 operator 4 administrator 5 OEM\n\n`ipmitool channel setaccess 1 7 callin=on ipmi=on link=on privilege=4`\n\n## 打开通道\n\n\n--------\n\n仅打开802.3 LAN通道访问权限即可（1就是上方的channel id）\n\n```\nipmitool lan set 1 access on\n\n\n# 查看channel信息\nipmitool lan print 1\n```\n\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190716144956.png)\n\n## 结果测试\n\n\n--------\n\n###  网页测试（修改为对应的带外IP即可）（网站测试的密码Linux@web7）\n\n[http://10.172.49.32:9290/ipmi?target=10.4.118.43](http://10.172.49.32:9290/ipmi?target=10.4.118.43)\n\n###  命令行测试：\n\n```\nssh 10.172.49.32  #  IPMI-Exporter的安装服务器\n#带外地址\nsudo ipmitool -I lanplus -H 10.4.119.145 -p 623 -U prom -P Linux@web7 sdr list\n```\n\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190716145047.png)\n\n `sudo ipmi-sensors -h 10.4.119.145 -u prom -p Linux@web7 -l USER -D lan_2_0`\n\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190716145105.png)\n\n# FAQ\n\n\n=======\n\n## Invalid data field in request\n\n\n---------------------------------\n\n[root@07l04b003 deployer]# ipmitool user list\n\nGet User Access command failed (channel 14, user 1): Invalid data field in request\n\n参考:[https://github.com/uebayasi/openbsd-ipmi/issues/10](https://github.com/uebayasi/openbsd-ipmi/issues/10)\n\n \n\n解决：[http://www.voidcn.com/article/p-nitsjhqt-bde.html](http://www.voidcn.com/article/p-nitsjhqt-bde.html)\n\n[https://www.robustperception.io/dealing-with-too-many-open-files](https://www.robustperception.io/dealing-with-too-many-open-files)\n\n```\nvi /etc/security/limits.conf 最后一行增加\n* soft nofile 65535\n* hard nofile 65535\n注销一下生效\n\n\nulimit -n 102400\nulimit -a\n```','/articles/2019/07/16/1563260290067.html','0',1563260290322,1563260438649,0.3466845398618599,'1','1','','https://uploader.shimo.im/f/82gtDxrsxyEis38b.png!thumbnail',0),('1563261094665','Mapbox地图本地离线部署 离线地图','使用脚本批量下载瓦片文件，离线Mapbox地图展示','使用脚本批量下载瓦片文件，离线Mapbox地图展示','Mapbox离线地图,瓦片文件下载','1562037727771',0,35,'# Mapbox地图本地离线部署\n\n\n==================\n\n参考：[https://www.jianshu.com/p/43ce4591c621](https://www.jianshu.com/p/43ce4591c621)\n\n[https://www.cnblogs.com/ATtuing/p/9216782.html](https://www.cnblogs.com/ATtuing/p/9216782.html)\n\n \n\nMapbox官方示例：[https://docs.mapbox.com/mapbox-gl-js/example](https://docs.mapbox.com/mapbox-gl-js/example)\n\n## 下载前6层瓦片\n\n\n-----------\n\n[https://openmaptiles.com/downloads/tileset/satellite/asia/china/](https://openmaptiles.com/downloads/tileset/satellite/asia/china/)\n\nGoogle Maps瓦片(tile)地图文件下载(1-11层级)\n\n详细说明：[http://rovertang.com/google-maps-tile-files-download-level-1-11/](http://rovertang.com/google-maps-tile-files-download-level-1-11/)\n\n下载链接: [https://pan.baidu.com/s/1hnypV8AOutJuat194aBxZA](https://pan.baidu.com/s/1hnypV8AOutJuat194aBxZA) 密码: pgyas\n\n使用png图片代码\n\n参考：[https://www.jianshu.com/p/43ce4591c621](https://www.jianshu.com/p/43ce4591c621)\n\n```\n \"sources\": {\n     \"osm-tiles\": {\n         \"type\": \"raster\",\n         \"tiles\": [\n                 \"http://c.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          ],\n          \"tileSize\": 256\n       }\n  },\n  \"layers\":[{\n      \"id\": \"123\",\n       \"type\": \"raster\",\n       \"source\": \"osm-tiles\",\n       \"source-layer\": \"osmtiles\"\n  }]\n```\n\nsources参数说明：\n\n*   sources是地图资源对象，以key,value组成，sources里的key不能重复，唯一声明一个地图资源的组成。\n*   value里的type是资源的类型，必须是 vector, raster, raster-dem, geojson, image, video中的一种。当前声明是xyz的png图片组成的底图，所以声明类型是raster。\n*   value里的tiles是xyz底图的url模板组合，tileSize声明一个切片宽高，一般切片都是是256*256的，所以此处声明256 。\n\nlayers参数说明：\n\n*   layers是个数组，数组每一项代表一个图层。\n*   id是每个图层的主键，每个图层的id必须不能重复。\n*   type，声明一个图层的类型。\n*   source，图层的地图数据来源，指向sources里的某个key的资源定义，比如sources里定义了一个osm-tiles的资源，该图层数据来源指向这个资源，即将key的值输入此处。\n*   source-layer：图层的名称，可以当做是图层别名，用以描述图层的。\n\n  \n\n[https://zhuanlan.zhihu.com/p/45518647](https://zhuanlan.zhihu.com/p/45518647)\n\n   \n\n[mapbox-gl-js-offline-example-gh-pages](https://github.com/klokantech/mapbox-gl-js-offline-example)\n\n![null](https://uploader.shimo.im/f/kyZiLa6kSgsdzmka.png!thumbnail)\n\n拷贝countries文件使用 只有6层\n\n## Python生成第7层瓦片的下载列表 建议使用2<<6 包含7层所有瓦片文件\n\n\n------------------------------------------\n\n最好前6层也是下载 风格统一\n\n```\n##get layer 7\'s x,y,x streets data list\nZ = 7\nY = 99 #2<<(Z-1)\nX = Y\nLIST=[]\nfor y in range(Y):\n     for(x) in range(X):\n         LIST.append(\"mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/{}/{}/{}.vector.pbf\".format(Z,y,x))\n```\n\n## 下载瓦片文件Shell脚本\n\n\n-----------------\n\n[https://github.com/mapbox/awesome-vector-tiles](https://github.com/mapbox/awesome-vector-tiles)\n\n \n\n[Converting Mapbox Studio Vector Tiles to Rasters](https://www.azavea.com/blog/2015/05/29/converting-mapbox-studio-vector-tiles-to-rasters-2/)\n\n \n\nvector better than others:\n\n[https://github.com/mapbox/vector-tile-spec/issues/53](https://github.com/mapbox/vector-tile-spec/issues/53)\n\n[https://docs.mapbox.com/vector-tiles/specification/](https://docs.mapbox.com/vector-tiles/specification/)\n\n```\n#!/usr/bin/env bash\n\n\nset -u\n\n\n# IMPORTANT 列表项只想不要包含逗号\nLIST=(\n  \'mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/7/0/0.vector.pbf\'\n  \'mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/7/98/95.vector.pbf\'\n  \'mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/7/98/96.vector.pbf\'\n  \'mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/7/98/97.vector.pbf\'\n  \'mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/7/98/98.vector.pbf\'\n)\n\n\n## download streets data\nfor OUTPUT in ${LIST[@]} ; do\n    echo ${OUTPUT}\n    if [ ! -f \"${OUTPUT}\" ] ; then\n        mkdir -p \"`dirname \"${OUTPUT}\"`\"\n        echo \"Downloading tile \'${OUTPUT}\'\"\n        curl -o \"${OUTPUT}\" -# \"https://a.tiles.mapbox.com/v4/${OUTPUT}?access_token=${YOUR_TOKEN}\"\n    fi\ndo\n``` \n\n## Python重命名文件，去掉.vector\n\n\n-------------------------\n\n```\n##rename filename\nimport os\nroot_path = \"/opt/jumpserver/apps/static/plugins/mapbox/countries/7\"\ndef rename_file(root_path):\n    for filename in os.listdir(root_path):\n        file_obs_path = os.path.join(root_path,filename)\n        if os.path.isfile(file_obs_path):\n            dst_name = os.path.join(root_path,filename.replace(\".vector\",\"\"))\n            os.rename(file_obs_path, dst_name)\n        else:\n            rename_file(file_obs_path)\n     \nrename_file(root_path)\n```\n\n## Shell重命名文件中的逗号（由于下载时列表中的逗号导致）\n\n\n---------------------------------\n\nsh下载脚本列表不包含逗号可不跑这一步骤。由于包含了逗号 导致文件内容写的是\n\n{\"message\":\"not found\"}\n\n```\n##!/bin/bash\n##\n## rename script\n## rename.sh\nclear\ndir=$(ls -l . |awk \'/^d/ {print $NF}\')\nfor d in $dir\ndo\n    echo $d\n    x=0\n    for i in `ls $d/*.pbf,`\n    do\n        x=`echo $i | sed \'s/,//g\'`\n        echo $i,$x\n        mv $i $x\n    done\ndone\necho “rename done!”\n```\n```\n\n## 使用HTML\n\n```\n{% load i18n %}\n{% load static %}\n<!--link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css\"-->\n\n\n<style>\n#map { position:absolute;\n   top: 55px;\n    bottom: 55px;\n   max-width: 585px;\n   width:100%;\n}\n.mapboxgl-popup {\n   max-width: 400px;\n   font: 12px/20px \'Helvetica Neue\', Arial, Helvetica, sans-serif;\n}\n</style>\n\n\n<div id=\'map\'></div>\n\n\n<script>\n    var style = {\n      \"version\": 8,\n      \"sources\": {\n        \"countries\": {\n          \"type\": \"vector\",\n          // \"url\": \"mapbox://map-id\"\n          // \"url\": \"http://tileserver.com/layer.json\",\n          \"tiles\": [location.origin+\"/static/plugins/mapbox/countries/{z}/{x}/{y}.pbf\"],\n          \"maxzoom\": 7\n        }\n      },\n      \"glyphs\": location.origin+\"/static/plugins/mapbox/fonts/{fontstack}/{range}.pbf\",\n      \"layers\": [{\n        \"id\": \"background\",\n        \"type\": \"background\",\n        \"paint\": {\n          \"background-color\": \"#ddeeff\"\n        }\n      },{\n        \"id\": \"country-glow-outer\",\n        \"type\": \"line\",\n        \"source\": \"countries\",\n        \"source-layer\": \"country\",\n        \"layout\": {\n          \"line-join\":\"round\"\n        },\n        \"paint\": {\n          \"line-color\": \"#226688\",\n          \"line-width\": 5,\n          \"line-opacity\": {\n            \"stops\": [[0,0],[1,0.1]]\n          }\n        }\n      },{\n        \"id\": \"country-glow-inner\",\n        \"type\": \"line\",\n        \"source\": \"countries\",\n        \"source-layer\": \"country\",\n        \"layout\": {\n          \"line-join\":\"round\"\n        },\n        \"paint\": {\n          \"line-color\": \"#226688\",\n          \"line-width\": {\n            \"stops\": [[0,1.2],[1,1.6],[2,2],[3,2.4]]\n          },\n          \"line-opacity\":0.8,\n        }\n      // rainbow start\n      },{\n        \"id\": \"area-white\",\n        \"type\": \"fill\",\n        \"source\": \"countries\",\n        \"filter\":[\"in\",\"ADM0_A3\",\'ATA\'],\n        \"source-layer\": \"country\",\n        \"paint\": {\n          \"fill-color\": \"#F0F8FF\"\n        }\n      },{\n        \"id\": \"area-red\",\n        \"type\": \"fill\",\n        \"source\": \"countries\",\n        \"filter\":[\"in\",\"ADM0_A3\",\'AFG\',\'ALD\',\'BEN\',\'BLR\',\'BWA\',\'COK\',\'COL\',\'DNK\',\'DOM\',\'ERI\',\'FIN\',\'FRA\',\'FRO\',\'GIB\',\'GNB\',\'GNQ\',\'GRC\',\'GTM\',\'JPN\',\'KIR\',\'LKA\',\'MHL\',\'MMR\',\'MWI\',\'NCL\',\'OMN\',\'RWA\',\'SMR\',\'SVK\',\'SYR\',\'TCD\',\'TON\',\'URY\',\'WLF\'],\n        \"source-layer\": \"country\",\n        \"paint\": {\n          \"fill-color\": \"#fdaf6b\"\n        }\n      },{\n        \"id\": \"area-orange\",\n        \"type\": \"fill\",\n        \"source\": \"countries\",\n        \"filter\":[\"in\",\"ADM0_A3\",\'AZE\',\'BGD\',\'CHL\',\'CMR\',\'CSI\',\'DEU\',\'DJI\',\'GUY\',\'HUN\',\'IOA\',\'JAM\',\'LBN\',\'LBY\',\'LSO\',\'MDG\',\'MKD\',\'MNG\',\'MRT\',\'NIU\',\'NZL\',\'PCN\',\'PYF\',\'SAU\',\'SHN\',\'STP\',\'TTO\',\'UGA\',\'UZB\',\'ZMB\'],\n        \"source-layer\": \"country\",\n        \"paint\": {\n          \"fill-color\": \"#fdc663\"\n        }\n      },{\n        \"id\": \"area-yellow\",\n        \"type\": \"fill\",\n        \"source\": \"countries\",\n        \"filter\":[\"in\",\"ADM0_A3\",\'AGO\',\'ASM\',\'ATF\',\'BDI\',\'BFA\',\'BGR\',\'BLZ\',\'BRA\',\'CHN\',\'CRI\',\'ESP\',\'HKG\',\'HRV\',\'IDN\',\'IRN\',\'ISR\',\'KNA\',\'LBR\',\'LCA\',\'MAC\',\'MUS\',\'NOR\',\'PLW\',\'POL\',\'PRI\',\'SDN\',\'TUN\',\'UMI\',\'USA\',\'USG\',\'VIR\',\'VUT\'],\n        \"source-layer\": \"country\",\n        \"paint\": {\n          \"fill-color\": \"#fae364\"\n        }\n      },{\n        \"id\": \"area-green\",\n        \"type\": \"fill\",\n        \"source\": \"countries\",\n        \"filter\":[\"in\",\"ADM0_A3\",\'ARE\',\'ARG\',\'BHS\',\'CIV\',\'CLP\',\'DMA\',\'ETH\',\'GAB\',\'GRD\',\'GRL\',\'HMD\',\'IND\',\'IOT\',\'IRL\',\'IRQ\',\'ITA\',\'KOS\',\'LUX\',\'MEX\',\'NAM\',\'NER\',\'PHL\',\'PRT\',\'RUS\',\'SEN\',\'SUR\',\'TZA\',\'VAT\'],\n        \"source-layer\": \"country\",\n        \"paint\": {\n          \"fill-color\": \"#d3e46f\"\n        }\n      },{\n        \"id\": \"area-turquoise\",\n        \"type\": \"fill\",\n        \"source\": \"countries\",\n        \"filter\":[\"in\",\"ADM0_A3\",\'AUT\',\'BEL\',\'BHR\',\'BMU\',\'BRB\',\'CYN\',\'DZA\',\'EST\',\'FLK\',\'GMB\',\'GUM\',\'HND\',\'JEY\',\'KGZ\',\'LIE\',\'MAF\',\'MDA\',\'NGA\',\'NRU\',\'SLB\',\'SOL\',\'SRB\',\'SWZ\',\'THA\',\'TUR\',\'VEN\',\'VGB\'],\n        \"source-layer\": \"country\",\n        \"paint\": {\n          \"fill-color\": \"#aadb78\"\n        }\n      },{\n        \"id\": \"area-blue\",\n        \"type\": \"fill\",\n        \"source\": \"countries\",\n        \"filter\":[\"in\",\"ADM0_A3\",\'AIA\',\'BIH\',\'BLM\',\'BRN\',\'CAF\',\'CHE\',\'COM\',\'CPV\',\'CUB\',\'ECU\',\'ESB\',\'FSM\',\'GAZ\',\'GBR\',\'GEO\',\'KEN\',\'LTU\',\'MAR\',\'MCO\',\'MDV\',\'NFK\',\'NPL\',\'PNG\',\'PRY\',\'QAT\',\'SLE\',\'SPM\',\'SYC\',\'TCA\',\'TKM\',\'TLS\',\'VNM\',\'WEB\',\'WSB\',\'YEM\',\'ZWE\'],\n        \"source-layer\": \"country\",\n        \"paint\": {\n          \"fill-color\": \"#a3cec5\"\n        }\n      },{\n        \"id\": \"area-purple\",\n        \"type\": \"fill\",\n        \"source\": \"countries\",\n        \"filter\":[\"in\",\"ADM0_A3\",\'ABW\',\'ALB\',\'AND\',\'ATC\',\'BOL\',\'COD\',\'CUW\',\'CYM\',\'CYP\',\'EGY\',\'FJI\',\'GGY\',\'IMN\',\'KAB\',\'KAZ\',\'KWT\',\'LAO\',\'MLI\',\'MNP\',\'MSR\',\'MYS\',\'NIC\',\'NLD\',\'PAK\',\'PAN\',\'PRK\',\'ROU\',\'SGS\',\'SVN\',\'SWE\',\'TGO\',\'TWN\',\'VCT\',\'ZAF\'],\n        \"source-layer\": \"country\",\n        \"paint\": {\n          \"fill-color\": \"#ceb5cf\"\n        }\n      },{\n        \"id\": \"area-pink\",\n        \"type\": \"fill\",\n        \"source\": \"countries\",\n        \"filter\":[\"in\",\"ADM0_A3\",\'ARM\',\'ATG\',\'AUS\',\'BTN\',\'CAN\',\'COG\',\'CZE\',\'GHA\',\'GIN\',\'HTI\',\'ISL\',\'JOR\',\'KHM\',\'KOR\',\'LVA\',\'MLT\',\'MNE\',\'MOZ\',\'PER\',\'SAH\',\'SGP\',\'SLV\',\'SOM\',\'TJK\',\'TUV\',\'UKR\',\'WSM\'],\n        \"source-layer\": \"country\",\n        \"paint\": {\n          \"fill-color\": \"#f3c1d3\"\n        }\n      // rainbow end\n      },{\n        \"id\": \"geo-lines\",\n        \"type\": \"line\",\n        \"source\": \"countries\",\n        \"source-layer\": \"geo-lines\",\n        \"paint\": {\n          \"line-color\": \"#226688\",\n          \"line-width\": {\n            \"stops\": [[0,0.2],[4,1]]\n          },\n          \"line-dasharray\":[6,2]\n        }\n      },{\n        \"id\": \"land-border-country\",\n        \"type\": \"line\",\n        \"source\": \"countries\",\n        \"source-layer\": \"land-border-country\",\n        \"paint\": {\n          \"line-color\": \"#fff\",\n          \"line-width\": {\n            \"base\":1.5,\n            \"stops\": [[0,0],[1,0.8],[2,1]]\n          }\n        }\n      },{\n        \"id\": \"state\",\n        \"type\": \"line\",\n        \"source\": \"countries\",\n        \"source-layer\": \"state\",\n        \"minzoom\": 3,\n        \"filter\": [\"in\",\"ADM0_A3\",\'USA\',\'CAN\',\'AUS\'],\n        \"paint\": {\n          \"line-color\": \"#226688\",\n          \"line-opacity\": 0.25,\n          \"line-dasharray\":[6,2,2,2],\n          \"line-width\": 1.2\n        }\n      // LABELS\n      },{\n        \"id\": \"country-abbrev\",\n        \"type\": \"symbol\",\n        \"source\": \"countries\",\n        \"source-layer\": \"country-name\",\n        \"minzoom\":1.8,\n        \"maxzoom\":3,\n        \"layout\": {\n          \"text-field\": \"{ABBREV}\",\n          \"text-font\": [\"Open Sans Semibold\"],\n          \"text-transform\": \"uppercase\",\n          \"text-max-width\": 20,\n          \"text-size\": {\n            \"stops\": [[3,10],[4,11],[5,12],[6,16]]\n          },\n          \"text-letter-spacing\": {\n            \"stops\": [[4,0],[5,1],[6,2]]\n          },\n          \"text-line-height\": {\n            \"stops\": [[5,1.2],[6,2]]\n          }\n        },\n        \"paint\": {\n          \"text-halo-color\": \"#fff\",\n          \"text-halo-width\": 1.5\n        }\n      },{\n        \"id\": \"country-name\",\n        \"type\": \"symbol\",\n        \"source\": \"countries\",\n        \"source-layer\": \"country-name\",\n        \"minzoom\":3,\n        \"layout\": {\n          \"text-field\": \"{NAME}\",\n          \"text-font\": [\"Open Sans Semibold\"],\n          \"text-transform\": \"uppercase\",\n          \"text-max-width\": 20,\n          \"text-size\": {\n            \"stops\": [[3,10],[4,11],[5,12],[6,16]]\n          }\n        },\n        \"paint\": {\n          \"text-halo-color\": \"#fff\",\n          \"text-halo-width\": 1.5\n        }\n      },{\n        \"id\": \"geo-lines-lables\",\n        \"type\": \"symbol\",\n        \"source\": \"countries\",\n        \"source-layer\": \"geo-lines\",\n        \"minzoom\":1,\n        \"layout\": {\n          \"text-field\": \"{DISPLAY}\",\n          \"text-font\": [\"Open Sans Semibold\"],\n          \"text-offset\": [0,1],\n          \"symbol-placement\": \"line\",\n          \"symbol-spacing\": 600,\n          \"text-size\": 9\n        },\n        \"paint\": {\n          \"text-color\": \"#226688\",\n          \"text-halo-width\": 1.5\n        }\n      }]\n    };\n\n\n   var idc_longitude = \'{{ object.longitude }}\';\n   var idc_latitude = \'{{ object.latitude }}\';\n   point = [];\n   // mapboxgl.accessToken = \'pk.eyJ1IjoiYWJ1ZHVsZW11c2EiLCJhIjoiY2p3cTBmYmNwMjNkdjN5bnN3bTJra29qeSJ9.kcz_P7jl3iI8vRZZa283cQ\';\n\n\n   var map = new mapboxgl.Map({\n      container: \'map\',\n      // style: \"{% static \'plugins/mapbox/streets-v10.json\' %}\",\n        style:style,\n      center: [108.7070345879, 34.2957018227],\n      zoom: 3\n   });\n\n\n   // mapboxgl.setRTLTextPlugin(\"{% static \'js/plugins/mapbox/mapbox-gl-rtl-text.js\' %}\");\n   // map.addControl(new MapboxLanguage({defaultLanguage: \'zh\'}));\n\n\n   var size = 200;\n\n\n   var pulsingDot = {\n      width: size,\n      height: size,\n      data: new Uint8Array(size * size * 4),\n\n\n      onAdd: function() {\n         var canvas = document.createElement(\'canvas\');\n         canvas.width = this.width;\n         canvas.height = this.height;\n         this.context = canvas.getContext(\'2d\');\n      },\n\n\n      render: function() {\n         var duration = 1000;\n         var t = (performance.now() % duration) / duration;\n\n\n         var radius = size / 2 * 0.3;\n         var outerRadius = size / 2 * 0.7 * t + radius;\n         var context = this.context;\n\n\n         // draw outer circle\n         context.clearRect(0, 0, this.width, this.height);\n         context.beginPath();\n         context.arc(this.width / 2, this.height / 2, outerRadius, 0, Math.PI * 2);\n         context.fillStyle = \'rgba(255, 200, 200,\' + (1 - t) + \')\';\n         context.fill();\n\n\n         // draw inner circle\n         context.beginPath();\n         context.arc(this.width / 2, this.height / 2, radius, 0, Math.PI * 2);\n         context.fillStyle = \'rgba(255, 100, 100, 1)\';\n         context.strokeStyle = \'white\';\n         context.lineWidth = 2 + 4 * (1 - t);\n         context.fill();\n         context.stroke();\n\n\n         // update this image\'s data with data from the canvas\n         this.data = context.getImageData(0, 0, this.width, this.height).data;\n\n\n         // keep the map repainting\n         map.triggerRepaint();\n\n\n         // return `true` to let the map know that the image was updated\n         return true;\n      }\n   };\n\n\n   if (idc_longitude != \'None\' & idc_latitude != \'None\'){\n      var idc_description = \"<strong>{{ object.name }}</strong><p>{% trans \'Room count\' %}:{{ object.rooms.count }}</p>\";\n\n\n      map.on(\'load\', function () {\n\n\n         map.addImage(\'pulsing-dot\', pulsingDot, { pixelRatio: 2 });\n\n\n         map.addLayer({\n            \"id\": \"points\",\n            \"type\": \"symbol\",\n            \"source\": {\n               \"type\": \"geojson\",\n               \"data\": {\n                  \"type\": \"FeatureCollection\",\n                  \"features\": [{\n                     \"type\": \"Feature\",\n                     \"properties\": {\n                        \"description\": idc_description,\n                        \"icon\": \"theatre\"\n                     },\n                     \"geometry\": {\n                        \"type\": \"Point\",\n                        \"coordinates\": [idc_longitude, idc_latitude]\n                     }\n                  }]\n               }\n            },\n            \"layout\": {\n               \"icon-image\": \"pulsing-dot\",\n               // \"icon-image\": \"{icon}-15\",\n               \"icon-allow-overlap\": true\n            }\n         });\n\n\n         // When a click event occurs on a feature in the places layer, open a popup at the\n         // location of the feature, with description HTML from its properties.\n         map.on(\'click\', \'points\', function (e) {\n            var coordinates = e.features[0].geometry.coordinates.slice();\n            var description = e.features[0].properties.description;\n\n\n            // Ensure that if the map is zoomed out such that multiple\n            // copies of the feature are visible, the popup appears\n            // over the copy being pointed to.\n            while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n               coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n            }\n\n\n            new mapboxgl.Popup().setLngLat(coordinates).setHTML(description).addTo(map);\n         });\n\n\n         // Change the cursor to a pointer when the mouse is over the places layer.\n         map.on(\'mouseenter\', \'points\', function () {\n            map.getCanvas().style.cursor = \'pointer\';\n         });\n\n\n         // Change it back to a pointer when it leaves.\n         map.on(\'mouseleave\', \'points\', function () {\n            map.getCanvas().style.cursor = \'\';\n         });\n  \n```\n```\n```\n\n## 静态文件\n\n\n--------\n\ncountries存放7层瓦片文件\n\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190716151347.png)\n## 6层效果图：\n\n\n----------\n\n![null](https://uploader.shimo.im/f/HQMv1pIHZfo5ipsj.png!thumbnail)\n\n## 7层效果图：\n\n\n----------\n\n  \n\n全部使用MapBox的vector.pbf文件\n\n![null](https://uploader.shimo.im/f/mCqkVcpOOB0mnoTh.png!thumbnail)\n\n## Unimplemented type: 3\n\n\n=========================\n\n[https://github.com/mapbox/pbf](https://github.com/mapbox/pbf)\n\n \n\n[https://github.com/mapbox/tippecanoe/issues/582](https://github.com/mapbox/tippecanoe/issues/582)\n\n[https://github.com/naturalatlas/tilestrata-disk/issues/2](https://github.com/naturalatlas/tilestrata-disk/issues/2)\n\ndjango配置gzip middleware\n\n[https://docs.djangoproject.com/en/2.0/ref/middleware/#django.middleware.gzip.GZipMiddleware](https://docs.djangoproject.com/en/2.0/ref/middleware/#django.middleware.gzip.GZipMiddleware)\n\n[https://docs.djangoproject.com/en/2.0/_modules/django/middleware/gzip/](https://docs.djangoproject.com/en/2.0/_modules/django/middleware/gzip/)\n\n ```\nAccess-Control-Allow-Methods: GET\nAccess-Control-Allow-Origin: *\nCache-Control: max-age=43200,s-maxage=300\nConnection: keep-alive\nContent-Encoding: gzip\nContent-Length: 37365\nContent-Type: application/x-protobuf\nDate: Fri, 14 Jun 2019 01:26:39 GMT\nETag: \"4194a00920cb92bb4f318d9ed92d9fa6\"\nLast-Modified: Wed, 03 Oct 2018 23:36:35 GMT\nTiming-Allow-Origin: *\nVia: 1.1 fe526590cbb2126b4baee2eb7ee38048.cloudfront.net (CloudFront)\nX-Amz-Cf-Id: 6qK-iqjM05kz3strX5T6fSwjG8aPTjZNCXNSeVSNIOMQ2kREOPqRDw==\nX-Amz-Cf-Pop: SIN2-C1\nX-Cache: RefreshHit from cloudfront\nX-Powered-By: Express\nX-Rate-Limit-Interval: 60\nX-Rate-Limit-Limit: 100000\nX-Rate-Limit-Reset: 1560475659\n```\n\nnginx配置pbf文件的返回头信息\n\n[https://lovebeyond.iteye.com/blog/1220616](https://lovebeyond.iteye.com/blog/1220616)\n\n```\n    location ~\\.pbf$ {\n        root /opt/jumpserver/data;\n        add_header Content-Encoding gzip;\n        add_header Content-Type application/x-protobuf;\n    }\n```  \n\nnginx添加etag 需要重新编译安装nginx\n\n[https://blog.csdn.net/hoewang/article/details/80240381](https://blog.csdn.net/hoewang/article/details/80240381)\n\nreponse header etag show If-None-Match value\n\n[https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match)','/articles/2019/07/16/1563261094665.html','0',1563261094818,1563261322394,0.6256608132918823,'1','1','','https://uploader.shimo.im/f/kyZiLa6kSgsdzmka.png!thumbnail',0),('1563261590204','打印资产标签 生成物理资产标签','使用QRCODE生成二维码，使用JQ Print打印二维码','使用QRCODE生成二维码，使用JQ Print打印二维码','资产标签二维码生成,打印','1562037727771',0,29,'## 生成纯数字编号：\n\n\n------------\n\n生成随机密码：[https://blog.csdn.net/feiyang5260/article/details/88751805](https://blog.csdn.net/feiyang5260/article/details/88751805)\n\n[https://blog.csdn.net/Jerry_1126/article/details/80412902](https://blog.csdn.net/Jerry_1126/article/details/80412902)\n\n```\nimport random\nj = 10\nid = []\nid = \'\'.join(str(i) for i in random.sample(range(0,20),j))\n```\n\n通过UUID生成8位资产编码\n\n[https://www.jb51.net/article/141083.htm](https://www.jb51.net/article/141083.htm)\n\n```\nfrom uuid import uuid1,uuid4\nuuidChars = (\"a\", \"b\", \"c\", \"d\", \"e\", \"f\",\n       \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\",\n       \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\", \"0\", \"1\", \"2\", \"3\", \"4\", \"5\",\n       \"6\", \"7\", \"8\", \"9\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\",\n       \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\",\n       \"W\", \"X\", \"Y\", \"Z\")\ndef short_uuid(uuid_value):\n  uuid = str(uuid_value).replace(\'-\', \'\')\n  uuidChars = tuple(uuid)\n  result = \'\'\n  for i in range(0,8):\n    sub = uuid[i * 4: i * 4 + 4]\n    x = int(sub,16)\n    print(sub,x,x % len(uuidChars))\n    result += uuidChars[x % len(uuidChars)]\n  return result\nprint(short_uuid())\nprint(short_uuid())\nprint(short_uuid())\n```  \n```\n\n## 生成资产标签二维码\n\n\n-------------\n\n[https://www.cnblogs.com/lsdb/p/9728621.html](https://www.cnblogs.com/lsdb/p/9728621.html)\n\n###  纯文字\n\n```\nimport qrcode\n\n# 二维码内容\ndata = \"https://www.baidu.com\"\n# 生成二维码\nimg = qrcode.make(data=data)\n# 直接显示二维码\nimg.show()\n# 保存二维码为文件\n# img.save(\"baidu.jpg\")\n\n```\n\n### 美化\n\n```\nimport qrcode\n# 实例化二维码生成类\nqr = qrcode.QRCode(\n    version=1,\n    error_correction=qrcode.constants.ERROR_CORRECT_L,\n    box_size=10,\n    border=4,\n)\n# 设置二维码数据\ndata = \"https://www.baidu.com\"\nqr.add_data(data=data)\n\n\n\n\n# 启用二维码颜色设置\nqr.make(fit=True)\nimg = qr.make_image(fill_color=\"green\", back_color=\"white\")\n\n\n\n\n# 显示二维码\nimg.show()\n```\n\n## 资产标签展示二维码\n\n\n-------------\n\n在线HTML编辑器：[https://c.runoob.com/front-end/61](https://c.runoob.com/front-end/61)\n\n ```\n<table border=\"1\" cellspacing=\"0\" width=\"300px\">\n            <tr><th colspan=\"3\">公司名称  有线公司</th>    \n  </tr>\n            <tr><td colspan=\"2\">资产名称：XX便携式计算机</td><td rowspan=\"3\" width=\"70px\"><img width=\"100%\"src=\"http://www.liantu.com/meihua/resource/image/thumbnail/default.png\"></td></tr>\n            <tr>\n              <td style=\"word-wrap:break-word;word-break:break-all;\">资产编号：17495116</td>   \n</tr>\n            <tr>  <td>使用部门：技术部门</td></tr>\n        </table>\n```\n```\n\n\n### 效果图\n\n\n \n\n标签打印机 斑马打印机\n\n \n\n最终效果：长度300 高度90\n\n\n \n\n1164030105020000000006340\n\n136793045740692389007088841656306889593L\n\n\n  \n\n# HTML打印标签\n\n\n------------\n\n[http://www.jq22.com/jquery-info347](http://www.jq22.com/jquery-info347)\n\n[https://www.jianshu.com/p/40dfd2d6c344](https://www.jianshu.com/p/40dfd2d6c344)\n\n边距选择 无 即可不带页面的标题和时间\n','/articles/2019/07/16/1563261590204.html','0',1563261590356,1563261859660,0.8828311615369913,'1','1','','http://www.liantu.com/meihua/resource/image/thumbnail/default.png',0),('1563262364838','MySQL集群搭建','搭建MySQL集群','搭建MySQL集群','MySQL集群搭建','1562037727771',0,79,'# 一、MySQL集群简介\n常见的集群：https://yq.aliyun.com/articles/555937\n\n## 1、什么是MySQL集群\nMySQL集群是一个无共享的(shared-nothing)、分布式节点架构的存储方案，其目的是提供容错性和高性能。\n数据更新使用读已提交隔离级别（read-committedisolation)来保证所有节点数据的一致性，使用两阶段提交机制（two-phasedcommit)保证所有节点都有相同的数据(如果任何一个写操作失败，则更新失败）。\n无共享的对等节点使得某台服务器上的更新操作在其他服务器上立即可见。传播更新使用一种复杂的通信机制，这一机制专用来提供跨网络的高吞吐量。\n通过多个[MySQL](http://www.roncoo.com/article/detail/126412)服务器分配负载，从而最大程序地达到高性能，通过在不同位置存储数据保证高可用性和冗余。\n## 2、名称概念\n[https://blog.csdn.net/itguangit/article/details/79637404](https://blog.csdn.net/itguangit/article/details/79637404)\nMySQL集群有如下三层：\n应用程序层：负责与MySQL服务器通信的各种应用程序。\n\nMysql服务器层：处理SQL命令，并与NDB存储引擎通信和Mysql服务器。\n\nNDB集群组件层：NDB集群组件有时也称数据节点，负责处理查询，然后将结果返回给mysql服务器。\n其中MySQL数据库集群主要包括如下三部分：\n1) SQL节点（SQL node - 下图对应为 mysqld）：分布式数据库。包括自身数据和查询中心结点数据  \nSQL节点：这是用来访问 Cluster数据的节点。对于MySQL Cluster，客户端节点是使用NDB Cluster存储引擎的传统MySQL服务器。通常，SQL节点是使用命令“mysqld –ndbcluster”启动的，或将“ndbcluster”添加到“my.cnf”后使用“mysqld”启动。 \n配置文件为：my.ini\n\n\n2) 数据节点（Data node  - ndbd）：集群共享数据（内存中）     \n**数据节点：**这类节点用于保存 Cluster的数据。数据节点的数目与副本的数目相关，是片段的倍数。例如，对于两个副本，每个副本有两个片段，那么就有4个数据节点。不过没有必要设置多个副本。数据节点是用命令“ndbd”启动的。 \n配置文件为：my.ini\n\n3) 管理服务器（Management Server - ndb_mgmd）：管理集群 SQL node,Data node\n管理(MGM)节点：这类节点的作用是管理MySQL Cluster内的其他节点，如提供配置数据、启动并停止节点、运行备份等。由于这类节点负责管理其他节点的配置，应在启动其他节点之前首先启动这类节点。MGM节点是用命令“ndb_mgmd”启动的。 \n配置文件为： config.ini\n\n**“MySQL实验室”推荐使用MySQL Cluster 7.x版本。MySQL Cluster 7.x拥有在线增加节点、多线程等新特性。**\n工作原理\n管理服务器(MGM节点)负责管理 Cluster配置文件和 Cluster日志。 Cluster中的每个节点从管理服务器检索配置数据，并请求确定管理服务器所在位置的方式。当数据节点内出现新的事件时，节点将关于这类事件的信息传输到管理服务器，然后，将这类信息写入 Cluster日志。\n\n\n拓扑结构图如下所示：\n\n![图片](https://uploader.shimo.im/f/N5mst8gXZL8hvUiO.png!thumbnail)\n![图片](https://uploader.shimo.im/f/F0zPrXT72ZcVzalD.png!thumbnail)\n# 二、环境说明\n## 1、系统环境\n| 服务器   | 角色   | 说明   | \n|:----|:----|:----|\n| 10.172.49.23   | 管理服务器   | 系统：CentOS-7-x86_64-DVD-1804.iso   | \n| 10.172.49.1   | 数据节点   | 系统：CentOS-7 64位    | \n| 10.172.49.24   | SQL节点   | 系统：CentOS-7 64位   | \n| 10.172.49.37   | 数据节点   | 系统：CentOS-7 64位 | \n| 10.172.49.38 | 数据节点   | 系统：CentOS-7 64位 | \n| 10.172.49.39   | SQL节点   | 系统：CentOS-7 64位 | \n\n![图片](https://uploader.shimo.im/f/bnYFVQW3TyApAwcz.png!thumbnail)\n## 2、软件环境\n\nMySQL集群版本：\n依据系统Centos7下载安装文件\n[https://dev.mysql.com/downloads/cluster/](https://dev.mysql.com/downloads/cluster/)\n![图片](https://uploader.shimo.im/f/TqaexI7vfgsxj5Ff.png!thumbnail)\n[https://dev.mysql.com/downloads/file/?id=481401](https://dev.mysql.com/downloads/file/?id=481401)\n![图片](https://uploader.shimo.im/f/G0PsLpbPnKYefgaW.png!thumbnail)\n```\nmysql-cluster-gpl-7.6.8-el7-x86_64.tar.gz\n```\n官方文档：[https://dev.mysql.com/doc/relnotes/mysql-cluster/7.6/en/mysql-cluster-news-7-6-8.html](https://dev.mysql.com/doc/relnotes/mysql-cluster/7.6/en/mysql-cluster-news-7-6-8.html)\n\n\n1. PIP源\n\n10.238.0.33\n[https://bbs.huaweicloud.com/blogs/b514b31e113511e89fc57ca23e93a89f](https://bbs.huaweicloud.com/blogs/b514b31e113511e89fc57ca23e93a89f)\n[https://www.cnblogs.com/mangoVic/p/7444465.html](https://www.cnblogs.com/mangoVic/p/7444465.html)\n划分区，装PIP源\n\n# 三、搭建集群（Linux环境）\n[https://downloads.mysql.com/tutorials/cluster/mysql_wp_cluster_quickstart.pdf](https://downloads.mysql.com/tutorials/cluster/mysql_wp_cluster_quickstart.pdf)\n[https://downloads.mysql.com/docs/mysql-cluster-7.6-relnotes-en.a4.pdf](https://downloads.mysql.com/docs/mysql-cluster-7.6-relnotes-en.a4.pdf)\n\n阅读搭建指导：\n[https://fossies.org/linux/misc/mysql-refman/mysql-refman-5.7-en.html-chapter.tar.gz/refman-5.7-en.html-chapter/mysql-cluster.html#mysql-cluster-installer-requirements](https://fossies.org/linux/misc/mysql-refman/mysql-refman-5.7-en.html-chapter.tar.gz/refman-5.7-en.html-chapter/mysql-cluster.html#mysql-cluster-installer-requirements)\n\n## 1、安装集群版本\n### a、准备工作\n不管是Management Server，还是Data node、SQL node，都需要先安装MySQL集群版本，然后根据不用的配置来决定当前服务器有哪几个角色。\n安装之前准备好mysql用户和mysql用户组，\n相关命令：\n```\ngroupadd mysql  \nuseradd mysql -g mysql\nuserdel mysql\n```\n为了方便测试，确定相关机器的防火墙已关闭（或者设置防火墙这几台机器之间的网络连接是畅通无阻的），\n相关命令：\n```\nchkconfig iptables off \nservice iptables stop\n```\n\n初始化系统 每个节点都操作\n```\nsetenforce 0\nsed -i \"s/enforcing/disabled/g\" /etc/selinux/config\n# systemctl disable firewalld \n# vi /etc/selinux/config\n    SELINUX=disabled    \n\n﻿scp /home/deployer/mysql-cluster-gpl-7.6.8-el7-x86_64.tar.gz root@10.172.49.23:/home/deployer\n\n﻿scp /home/deployer/mysql-cluster-gpl-7.6.8-el7-x86_64.tar.gz deployer@10.172.49.39:/home/deployer\n\ntar -zxvf mysql-cluster-gpl-7.6.8-el7-x86_64.tar.gz \nmv mysql-cluster-gpl-7.6.8-el7-x86_64 /usr/local/mysql\n\n# cp /usr/local/mysql/bin/ndb_mgm* /usr/local/bin/\n# chmod +x /usr/local/bin/ndb_mgm*\n# chmod +x /usr/local/mysql/bin/\n# echo \"export PATH=$PATH:/usr/local/mysql/bin/\" >> /etc/profile\n\n##### reboot 或 重新打开一个命令窗口连接\n```\n\n### b、安装集群版本\n1.授权\n```\nchown -R mysql:mysql /usr/local/mysql\n```\n2.切换mysql用户\n```\nsu - mysql\n```\n3.搭建MySQL NDB安装依赖 （正在进行此步骤）\n[https://fossies.org/linux/misc/mysql-refman/mysql-refman-5.7-en.html-chapter.tar.gz/refman-5.7-en.html-chapter/mysql-cluster.html#mysql-cluster-installer-requirements](https://fossies.org/linux/misc/mysql-refman/mysql-refman-5.7-en.html-chapter.tar.gz/refman-5.7-en.html-chapter/mysql-cluster.html#mysql-cluster-installer-requirements)\n\n5.安装MySQL\n```\ncd /usr/local/mysql\nbin/ndb_setup.py &\n```\n注：所有服务器上都需要执行上述操作来安装MySQL集群版本。\n```\nbin/ndb_setup.py \n```\n报错：ImportError: No module named cryptography.fernet\n解决：[https://bugzilla.redhat.com/show_bug.cgi?id=1459947](https://bugzilla.redhat.com/show_bug.cgi?id=1459947)\n1. confirm python-setuptools is NOT installed\n\n2. # yum install python-cryptography\n\n3. # python\n\n   >> from cryptography import fernet\nyum install python-setuptools\n\n再启动\n```\nbin/ndb_setup.py \n```\n![图片](https://uploader.shimo.im/f/goBg0gGZJAgXrQdq.png!thumbnail)\n[https://10.172.49.23:8081/welcome.html](https://10.172.49.23:8081/welcome.html)\n\n\n## 2、集群配置\n优化原因:\n[https://dev.mysql.com/doc/refman/8.0/en/column-count-limit.html](https://dev.mysql.com/doc/refman/8.0/en/column-count-limit.html)\n[https://learnku.com/laravel/t/3421/text-is-a-solution-to-the-row-size-too-blobs-not-counting-is-65535-or-blobs-caused-by-too-many-fields-in-the-error-message-mysql](https://learnku.com/laravel/t/3421/text-is-a-solution-to-the-row-size-too-blobs-not-counting-is-65535-or-blobs-caused-by-too-many-fields-in-the-error-message-mysql)\n![图片](https://uploader.shimo.im/f/mlFPgW4IUmkOcrMH.png!thumbnail)\n解决参考：[https://www.cnblogs.com/52php/p/5675427.html](https://www.cnblogs.com/52php/p/5675427.html)\n问题：[http://blog.51cto.com/11374450/1939809](http://blog.51cto.com/11374450/1939809)\n优化后表格SQL语句仍然报错\n![图片](https://uploader.shimo.im/f/dn0T3IxJmbMw0tWB.png!thumbnail)\n解决参考:[https://bbs.huaweicloud.com/forum/thread-5747-1-1.html](https://bbs.huaweicloud.com/forum/thread-5747-1-1.html)\nshow variables like \'%max_heap_table_size%\';\n![图片](https://uploader.shimo.im/f/zN4VTTtBQGY0lOvs.png!thumbnail)\n参数修改为64M\n解决方法:[https://stackoverflow.com/questions/4179087/mysql-cluster-error-1114-hy000-the-table-users-is-full](https://stackoverflow.com/questions/4179087/mysql-cluster-error-1114-hy000-the-table-users-is-full)\n参考管理节点配置：[https://dba.stackexchange.com/questions/101203/ndbcluster-error-1114-the-table-is-full-when-using-table](https://dba.stackexchange.com/questions/101203/ndbcluster-error-1114-the-table-is-full-when-using-table)\n创建logfile tablespace\n参考：[https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster-disk-data-objects.html](https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster-disk-data-objects.html)\n```\nCREATE LOGFILE GROUP lg_1\n    ADD UNDOFILE \'undo_1.log\'\n    INITIAL_SIZE 16M\n    UNDO_BUFFER_SIZE 2M\n    ENGINE NDBCLUSTER;\n   \nALTER LOGFILE GROUP lg_1\n    ADD UNDOFILE \'undo_2.log\'\n    INITIAL_SIZE 12M\n    ENGINE NDBCLUSTER;\n    \nCREATE TABLESPACE ts_1\n    ADD DATAFILE \'data_1.dat\'\n    USE LOGFILE GROUP lg_1\n    INITIAL_SIZE 32M\n    ENGINE NDBCLUSTER;\n\nALTER TABLESPACE ts_1\n    ADD DATAFILE \'data_2.dat\'\n    INITIAL_SIZE 48M\n    ENGINE NDBCLUSTER;\n```\n![图片](https://uploader.shimo.im/f/c8G2jGGbCCMaGhvp.png!thumbnail)\n```\nERROR 1178 (42000): The storage engine for the table doesn\'t support ALTER TABLESPACE\n```\n指定tablespace的engine\nALTER TABLESPACE ts_1\n    ADD DATAFILE \'data_2.dat\'\n    INITIAL_SIZE 48M\n    ENGINE NDBCLUSTER;\n![图片](https://uploader.shimo.im/f/z86JL7pHhA0hznM9.png!thumbnail)\n```\n1296 - Got error 4243 \'Index not found\' from NDBCLUSTER\n```\n参考：[https://blog.csdn.net/lwei_998/article/details/7414588](https://blog.csdn.net/lwei_998/article/details/7414588)\ndrop table 重新创建\n```\n1296 - Got error 851 \'Maximum 8052 bytes of FIXED columns supported, use varchar or COLUMN_FORMAT DYNAMIC instead\' from NDBCLUSTER\n```\n错误码参考:[https://dev.mysql.com/doc/ndbapi/en/ndb-error-codes-application-error.html](https://dev.mysql.com/doc/ndbapi/en/ndb-error-codes-application-error.html)\n变量：[https://dev.mysql.com/doc/mysql-cluster-excerpt/5.7/en/mysql-cluster-system-variables.html](https://dev.mysql.com/doc/mysql-cluster-excerpt/5.7/en/mysql-cluster-system-variables.html)\n![图片](https://uploader.shimo.im/f/aqS9u4tMzCI8GmXg.png!thumbnail)\nSQL节点增加配置\n```\nndb_default_column_format=DYNAMIC\n```\n![图片](https://uploader.shimo.im/f/loZPeij3ovw6pwrD.png!thumbnail)\nchar修改为varchar\n\n\n### a、管理节点49.23\n配置参考:[https://forums.mysql.com/read.php?25,657949,657986#msg-657986](https://forums.mysql.com/read.php?25,657949,657986#msg-657986)\n1.root用户下，创建目录和配置文件\n```\nmkdir /var/lib/mysql-cluster\ncd /var/lib/mysql-cluster\nvim config.ini\n```\nconfig.ini配置信息如下：\n[number_of_node_groups] = number_of_data_nodes / NoOfReplicas\n[http://mysql-cluster.1050023.n4.nabble.com/My-First-Cluster-Getting-error-on-Nodegroup-configuration-td4655329.html](http://mysql-cluster.1050023.n4.nabble.com/My-First-Cluster-Getting-error-on-Nodegroup-configuration-td4655329.html)\n```\n[ndbd default]\nNoOfReplicas=2\nDataMemory=8G\n#StringMemory = 50\n#MaxNoOfTables = 4096\n#MaxBufferedEpochs=100000\n#TimeBetweenEpochsTimeout=32000\n#TransactionDeadlockDetectionTimeout=1000000\n#TransactionInactiveTimeout=10000000\n#MaxNoOfOrderedIndexes = 8192\n#MaxNoOfUniqueHashIndexes = 1024\n#MaxNoOfAttributes = 100000\n#MaxNoOfTriggers = 10240\n#SchedulerSpinTimer = 400\n#SchedulerExecutionTimer = 100\n#RealTimeScheduler = 1\nServerPort=2202\n\n[ndb_mgmd]\nNodeId=1\nHostName=10.172.49.23\nDataDir=/var/lib/mysql-cluster\n\n[ndbd]\nHostName=10.172.49.32\nNodeId=7\nDataDir=/usr/local/mysql/data\n\n[ndbd]\nHostName=10.172.49.33\nNodeId=8\nDataDir=/usr/local/mysql/data\n\n[mysqld]\nNodeId=3\nHostName=10.172.49.24\n\n[mysqld]\nNodeId=4\n```\nHostName=10.172.49.39\n\n2.授权\n```\nchown -R mysql:mysql /var/lib/mysql-cluster\n```\n3.切换用户\n```\nsu - mysql\n```\n4.启动管理服务\n```\n/usr/local/mysql/bin/ndb_mgmd -f /var/lib/mysql-cluster/config.ini --initial\n\nndb_mgmd -f /var/lib/mysql-cluster/config.ini\n```\n注:命令行中的ndb_mgmd是mysql cluster的管理服务器，后面的-f表示后面的参数是启动的参数配置文件。\n如果在启动后过了几天又添加了一个数据节点，这时修改了配置文件启动时就必须加上--initial参数，不然添加的节点不会作用在mysql cluster中。\n\nndbd命令报错\n![图片](https://uploader.shimo.im/f/8jRMO7TR11gE0LwO.png!thumbnail)\n\n报错参考：[https://blog.csdn.net/lxpbs8851/article/details/8942513](https://blog.csdn.net/lxpbs8851/article/details/8942513)\n\n配置不生效，需要停止后重新reload配置\nndb_mgm -e \"SHUTDOWN\"\nndb_mgmd --reload --config-file /var/lib/mysql-cluster/config.ini\nndb_mgm -c 10.172.49.23:1186\n\n查看集群情况。数据节点和SQL节点等待加入\n![图片](https://uploader.shimo.im/f/FeWIa510RFQcVsJz.png!thumbnail)\n加入数据节点后：\n![图片](https://uploader.shimo.im/f/JsGee581cgM0q1wH.png!thumbnail)\n加入SQL节点后：\n![图片](https://uploader.shimo.im/f/8bgsX5W0GMENOSDO.png!thumbnail)\n\n### b、数据节点~~49.1 ~~/ 49.32 / 49.33\nyum -y remove mari*\n1.编辑/etc/my.cnf文件\n```\n# vim /etc/my.cnf\n[mysqld] \n#sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES \n#datadir=/usr/local/mysql/data\n#socket=/var/lib/mysql/mysql.sock\nuser=mysql\nndbcluster \nndb-connectstring=10.172.49.23\n\n[mysql_cluster] \nndb-connectstring=10.172.49.23\n```\n![图片](https://uploader.shimo.im/f/TYjgp95mz7sJMx2l.png!thumbnail)\n2.切换用户\n```\nsu - mysql\n```\n3.启动数据节点服务\n```\nmkdir -p /usr/local/mysql/data\n/usr/local/mysql/bin/ndbd --initial\n\nndbd\n```\n注：第一次启动需要加参数：–initial，以后就不用加了，直接运行： /usr/local/mysql/bin/ndbd\n![图片](https://uploader.shimo.im/f/1XkHE7DGapsLkmAL.png!thumbnail)\n启动成功\n\nPID terminated by signal 6: Aborted\nInitiated by signal 6. Caused by error 6000\nForced node shutdown completed. Occured during startphase 0. Initiated by signal 6. Caused by error 6000: \'Error OS signal received(Internal error, programming error or missing error message, please report a bug). Temporary error, restart node\'.\n[https://forums.mysql.com/read.php?25,522361,532256#msg-532256](https://forums.mysql.com/read.php?25,522361,532256#msg-532256)\n[https://dev.mysql.com/doc/mysql-cluster-excerpt/5.7/en/mysql-cluster-logs-cluster-log.html](https://dev.mysql.com/doc/mysql-cluster-excerpt/5.7/en/mysql-cluster-logs-cluster-log.html)\n解决：将管理节点中相关参数屏蔽，重新init，再启动数据节点。完成；\n完成后将参数放开，进行reload\n\n\n### c、SQL节点49.24 / 49.39\n1.编辑/etc/my.cnf文件（数据节点和SQL节点在统一服务器时可省略）\n```\n# vim /etc/my.cnf\n[mysqld]\n#sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES \ndatadir=/usr/local/mysql/data\n#socket=/var/lib/mysql/mysql.sock\n#############优化\nbasedir = /usr/local/mysql\n#default-storage-engine = ndbcluster\n\nslow-query-log = on\nslow_query_log_file = /usr/local/mysql/data/slow-query.log\nlong_query_time = 5\n\n#skip-external-locking\nkey_buffer_size = 600M\nmax_allowed_packet = 100M\ntable_open_cache = 2048\nsort_buffer_size = 1024M\nnet_buffer_length = 8K\nread_buffer_size = 400M\nread_rnd_buffer_size = 200M\n\nlower_case_table_names = 1\nback_log = 384\nthread_stack = 256K\njoin_buffer_size = 500M\nthread_cache_size = 200\nquery_cache_size = 640M\ntmp_table_size = 256M\nmax_connections = 5000\nmax_connect_errors = 10000000\nwait_timeout = 2880000\ninteractive_timeout = 2880000\n#thread_concurrency = 8\nmax_heap_table_size = 64M\nndb_default_column_format=DYNAMIC\n\nuser=mysql\nndbcluster \nndb-connectstring=10.172.49.23\n\n\n[mysql_cluster] \nndb-connectstring=10.172.49.23\n\n```\n2.复制mysqld到系统服务里面去\n```\ncp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld\n```\n3.切换用户\n```\nsu - mysql\n```\n4.启动数据节点服务\n```\nservice mysqld start\n```\nservice mysqld start报错\n![图片](https://uploader.shimo.im/f/5vvguk9EHCE6zjIE.png!thumbnail)\n[https://my.oschina.net/u/3769333/blog/1816742](https://my.oschina.net/u/3769333/blog/1816742)\n```\nchown -R mysql:mysql /usr/local/mysql/data\nchmod -R 755 /usr/local/mysql/data\n```\n![图片](https://uploader.shimo.im/f/3yEepgFma7EOBY7H.png!thumbnail)\n错误汇总此处存在：[https://wenku.baidu.com/view/82b7cc5e11a6f524ccbff121dd36a32d7375c7f5.html?re=view](https://wenku.baidu.com/view/82b7cc5e11a6f524ccbff121dd36a32d7375c7f5.html?re=view)\n```\ncat /usr/local/mysql/data/02l14b003.xx01.err\n```\n![图片](https://uploader.shimo.im/f/RMlsfLyV2hMd0oBF.png!thumbnail)\n\n![图片](https://uploader.shimo.im/f/Cl5KU7RiIb4wOukf.png!thumbnail)\n```\ncd /usr/local/mysql/bin\nmysqld --initialize\n#root@localhost: 5qk(v=ofv&H*\n#root@localhost: .hVug*ayS7jc\n```\nroot@localhost: qaF53-s+l:v&\n\n![图片](https://uploader.shimo.im/f/5oa0hodD8UgjlIwW.png!thumbnail)\n![图片](https://uploader.shimo.im/f/BlbMrUNy2sgBjV5O.png!thumbnail)\n数据库创建完，启动成功\n![图片](https://uploader.shimo.im/f/eAIWYMWWhXYrIC3Z.png!thumbnail)\n\n集群完成：\n![图片](https://uploader.shimo.im/f/dPmgyBUHC2gokQ1s.png!thumbnail)\n\n```\n/usr/local/mysql/bin/mysqladmin -u root password \'5qk(v=ofv&H*\'\n/usr/local/mysql/bin/mysqladmin -u root password \'qaF53-s+l:v&\'\n```\n![图片](https://uploader.shimo.im/f/erAOclZpGQoToBM1.png!thumbnail)\n杀掉多余的mysql进程\n![图片](https://uploader.shimo.im/f/WBHIpnG8ae4Hucn6.png!thumbnail)\nMySQL无法连接问题：\n[https://blog.csdn.net/mchdba/article/details/10630701](https://blog.csdn.net/mchdba/article/details/10630701)\n```\nservice mysqld stop\n```\n![图片](https://uploader.shimo.im/f/OdjDA97zII4jYv23.png!thumbnail)\n安全模式启动：\n```\nmysqld_safe --skip-grant-tables &\n```\n![图片](https://uploader.shimo.im/f/uNMF3jQITpUWvZj5.png!thumbnail)\n无账号密码登陆：\nmysql -uroot -p【注释，在下面的要求你输入密码的时候，你不用管，直接回车键一敲就过去了】\n```\nSET PASSWORD = PASSWORD(\'Abc@1234\');\nuse mysql;\nupdate user set authentication_string=PASSWORD(\"Abc@1234\") where user=\'root\' and host=\'localhost\';\nupdate user set host = \'%\' where user=\'root\';\nflush privileges;\nquit\n```\nservice mysqld restart\n![图片](https://uploader.shimo.im/f/z8ZW97zw1VQgA7RV.png!thumbnail)\n(2003) Can\'t connect to MySQL server on \'***server***\' (10061)\n**ps xa | grep mysqld**\n**kill -9 mysqld_safe的进程**\n[https://dev.mysql.com/doc/refman/8.0/en/can-not-connect-to-server.html](https://dev.mysql.com/doc/refman/8.0/en/can-not-connect-to-server.html)\n\nNDB: server id set to zero - changes logged to bin log with server id zero will be logged with another server id by slave mysqlds\nNo free node id found for mysqld(API).\n相关错误参考：[https://my.oschina.net/out1kiss/blog/1817877](https://my.oschina.net/out1kiss/blog/1817877)\n防火墙未关闭：[https://dba.stackexchange.com/questions/133609/mysql-cluster-api-node-wont-start-successfully](https://dba.stackexchange.com/questions/133609/mysql-cluster-api-node-wont-start-successfully)\n\nMySQL Cluster Nodes, Node Groups, Replicas, and Partitions\n[https://docs.oracle.com/cd/E17952_01/mysql-5.0-en/mysql-cluster-nodes-groups.html](https://docs.oracle.com/cd/E17952_01/mysql-5.0-en/mysql-cluster-nodes-groups.html)\n\nERROR! MySQL server PID file could not be found\n[http://blog.51cto.com/dahui09/1841627](http://blog.51cto.com/dahui09/1841627)\n[https://my.oschina.net/adailinux/blog/1513702](https://my.oschina.net/adailinux/blog/1513702)\n[http://www.sail.name/2018/05/19/cannot-kill-mysql/](http://www.sail.name/2018/05/19/cannot-kill-mysql/)\n\n### d、完成效果\n```\n[root@01l14b003 deployer]# ndb_mgm -c 10.172.49.23:1186\n-- NDB Cluster -- Management Client --\nndb_mgm> show\nConnected to Management Server at: 10.172.49.23:1186\nCluster Configuration\n---------------------\n[ndbd(NDB)]	1 node(s)\nid=2	@10.172.49.1  (mysql-5.7.24 ndb-7.6.8, Nodegroup: 0, *)\n\n[ndb_mgmd(MGM)]	1 node(s)\nid=1	@10.172.49.23  (mysql-5.7.24 ndb-7.6.8)\n\n[mysqld(API)]	2 node(s)\nid=3	@10.172.49.24  (mysql-5.7.24 ndb-7.6.8)\nid=4 (not connected, accepting connect from any host)\n\n\n```\n## 3、集群验证\n**mysqladmin -u root -p version**\n![图片](https://uploader.shimo.im/f/wUHAfMBl1IoRhB5c.png!thumbnail)\nmysqladmin -u root -p variables\n![图片](https://uploader.shimo.im/f/O18sW4a7KO45BHIx.png!thumbnail)\n### NDB Cluster Example with Tables and Data\n[https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-install-example-data.html](https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-install-example-data.html)\n使用ENGINE=NDBCLUSTER创建表\n# 四、常用命令与问题整理\n1） ndb_mgmd管理命令：/usr/local/mysql/bin/ndb_mgm 执行之后就是管理控制台了，里面可以继续输入命令。(具体命令可以使用help查看)\nndb_mgm -e \"SHUTDOWN\"\nndb_mgmd --reload --config-file /var/lib/mysql-cluster/config.ini\nndb_mgm -c 10.172.49.23:1186\n\n2） 停止集群服务器的命令：/usr/local/mysql/bin/ndb_mgm -e shutdown\nndb_mgm -e shutdown\n如果集群配置有更新了：rm /usr/local/mysql/mysql-cluster/ndb_1_config.bin.1\nndb_mgmd --reload --config-file /var/lib/mysql-cluster/config.ini\n\n3） 停止SQL节点的命令：/usr/local/mysql/bin/mysqladmin -uroot shutdown\n4）使用需要注意如下两点：\na.表必须用ENGINE=NDB或ENGINE=NDBCLUSTER选项创建，或用ALTER TABLE选项更改ALTER TABLE City ENGINE=NDBCLUSTER;，以使用NDB Cluster存储引擎在 Cluster内复制它们。如果使用mysqldump的输出从已有数据库导入表，可在文本编辑器中打开SQL脚本，并将该选项添加到任何表创建语句，或 用这类选项之一替换任何已有的ENGINE（或TYPE）选项。\nb.另外还请记住，每个NDB表必须有一个主键。如果在创建表时用户未定义主键，NDB Cluster存储引擎将自动生成隐含的主键。（注释：该隐含 键也将占用空间，就像任何其他的表索引一样。由于没有足够的内存来容纳这些自动创建的键，出现问题并不罕见）。\n其他操作上没有什么区别！\n文章来源[http://www.roncoo.com/article/detail/129594](http://www.roncoo.com/article/detail/129594)\n\n## 停止&重启\n[https://fossies.org/linux/misc/mysql-refman/mysql-refman-5.7-en.html-chapter.tar.gz/refman-5.7-en.html-chapter/mysql-cluster.html#mysql-cluster-install-example-data](https://fossies.org/linux/misc/mysql-refman/mysql-refman-5.7-en.html-chapter.tar.gz/refman-5.7-en.html-chapter/mysql-cluster.html#mysql-cluster-install-example-data)\n\n[https://fossies.org/linux/misc/mysql-refman/mysql-refman-5.7-en.html-chapter.tar.gz/refman-5.7-en.html-chapter/mysql-cluster.html#mysql-cluster-install-configuration](https://fossies.org/linux/misc/mysql-refman/mysql-refman-5.7-en.html-chapter.tar.gz/refman-5.7-en.html-chapter/mysql-cluster.html#mysql-cluster-install-configuration)\n\n[https://fossies.org/linux/misc/mysql-refman/mysql-refman-5.7-en.html-chapter.tar.gz/refman-5.7-en.html-chapter/mysql-cluster.html#mysql-cluster-installer-requirements](https://fossies.org/linux/misc/mysql-refman/mysql-refman-5.7-en.html-chapter.tar.gz/refman-5.7-en.html-chapter/mysql-cluster.html#mysql-cluster-installer-requirements)\n\nTo shut down the cluster, enter the following command in a shell on the machine hosting the management node:\nshell> **ndb_mgm -e shutdown**\n\n\nTo restart the cluster on Unix platforms, run these commands:\nOn the management host (198.51.100.10 in our example setup):\n* shell> **ndb_mgmd -f /var/lib/mysql-cluster/config.ini**\n\nOn each of the data node hosts (198.51.100.30 and 198.51.100.40):\n* shell> **ndbd**\n* Use the [ndb_mgm](https://fossies.org/linux/misc/mysql-refman/mysql-refman-5.7-en.html-chapter.tar.gz/refman-5.7-en.html-chapter/mysql-cluster.html#mysql-cluster-programs-ndb-mgm) client to verify that both data nodes have started successfully.\n\nOn the SQL host (198.51.100.20):\n* shell> **mysqld_safe &**\n\n## 使用cluster\n启动顺序为：管理节点->数据节点->SQL节点\n1. 启动管理节点：ndb_mgmd -f /data/mysql-cluster/config.ini\n\n启动NDB（数据节点）:ndbd --initial\n1. **注意：只是在第一次启动或在备份/恢复或配置变化后重启ndbd时，才加–initial参数！原因在于，该参数会使节点删除由早期ndbd实例创建的，用于恢复的任何文件，包括用于恢复的日志文件。**\n2. 启动SQL节点（启动mysql服务）:/etc/init.d/mysqld start\n## MySQL Cluster集群的关闭\n关闭顺序：SQL节点->数据节点->管理节点\n1. SQL节点关闭:/etc/init.d/mysqld stop\n2. （NDB）数据节点关闭:ndbd stop \n\n管理节点关闭\n| 1  2  3  4  5  6   | ndb_mgm> shutdown  Node 2: Cluster shutdown initiated  Node 3: Cluster shutdown initiated  3 NDB Cluster node(s) have shutdown.  Disconnecting to allow management server to shutdown.  Node 3: Node shutdown completed.   | \n|----|----|\n# Converting InnoDB Tables to MySQL Cluster\n[https://blogs.oracle.com/jsmyth/converting-innodb-tables-to-mysql-cluster](https://blogs.oracle.com/jsmyth/converting-innodb-tables-to-mysql-cluster)\n\n参考（3台）：[https://cloud.tencent.com/developer/article/1005764](https://cloud.tencent.com/developer/article/1005764)\n参考（5台）：[http://blog.51cto.com/afterdawn/2125638](http://blog.51cto.com/afterdawn/2125638)\n\nGrafana监控MySQL：[https://blog.csdn.net/aixiaoyang168/article/details/81354059](https://blog.csdn.net/aixiaoyang168/article/details/81354059)\nzabbix监控mysql：[https://www.linuxea.com/1655.html](https://www.linuxea.com/1655.html)\nMySQL监控脚本:[https://blog.csdn.net/wyzxg/article/details/42875345](https://blog.csdn.net/wyzxg/article/details/42875345)\n\n## PXC （Percona XtraDB Cluster）\n>建议PXC使用PerconaServer（MySQL改进版，性能提升很大）\n\n[https://zhuanlan.zhihu.com/p/46184438](https://zhuanlan.zhihu.com/p/46184438)\n[https://www.percona.com/doc/percona-xtradb-cluster/LATEST/bootstrap.html](https://www.percona.com/doc/percona-xtradb-cluster/LATEST/bootstrap.html)\n\n容器化mysql集群：\n[http://dockone.io/article/2048](http://dockone.io/article/2048)\n\n[MySQL监控-1550458354707.json](https://uploader.shimo.im/f/B5mjKaEhhvE8ud5c.json)\n\n[http://10.172.49.24:9104/metrics](http://10.172.49.24:9104/metrics)\n[https://prometheus.io/docs/prometheus/latest/querying/operators/](https://prometheus.io/docs/prometheus/latest/querying/operators/)\n[https://help.aliyun.com/document_detail/29060.html](https://help.aliyun.com/document_detail/29060.html)\n[https://povilasv.me/prometheus-go-metrics/](https://povilasv.me/prometheus-go-metrics/)\n\n包含MySQL告警规则\n[MySQL Overview-1550458840387.json](https://uploader.shimo.im/f/aJrTUBXuDCAwUNMk.json)\n\n\n[https://blog.csdn.net/qq_25934401/article/details/82594478](https://blog.csdn.net/qq_25934401/article/details/82594478)\n','/articles/2019/07/16/1563262364838.html','0',1563262364939,1563262664254,0.7590463359569001,'1','1','','https://uploader.shimo.im/f/N5mst8gXZL8hvUiO.png!thumbnail',0),('1563262967809','Consul集群搭建','Consul集群搭建','Consul集群搭建','Consul,集群','1562037727771',0,73,'# 准备：\n## 1 环境\n```\n操作系统版本：centos7.5\n操作系统内核：4.8.4\n系统工具：yum\n数据分区（200G容量以上）：/data\n启用端口：8300、8301、8302、8500、8600\n```\n## 2 下载文件\n下载：[https://www.consul.io/downloads.html](https://www.consul.io/downloads.html)\n[https://releases.hashicorp.com/consul/1.3.0/consul_1.3.0_linux_amd64.zip](https://releases.hashicorp.com/consul/1.3.0/consul_1.3.0_linux_amd64.zip)\nconsul_1.3.0_linux_amd64.zip\n## 3 解压安装文件\n```\nscp /home/deployer/consul_1.3.0_linux_amd64.zip root@10.172.49.23:/home/deployer\n\nscp /home/deployer/consul_1.3.0_linux_amd64.zip root@10.238.0.33:/home/deployer\n\nunzip consul_1.3.0_linux_amd64.zip -d /usr/bin\n```\n## 4 日志配置\n```\nrm -rf /etc/rsyslog.d/consul.conf\nrm -rf /etc/logrotate.d/consul\necho \':programname, isequal, \"consul\" /var/log/consul.log\' >> /etc/rsyslog.d/consul.conf\necho \'& ~\' >> /etc/rsyslog.d/consul.conf\necho \'/var/log/consul.log\' >> /etc/logrotate.d/consul\necho \'{\' >> /etc/logrotate.d/consul\necho \'    daily\' >> /etc/logrotate.d/consul\necho \'    rotate 7\' >> /etc/logrotate.d/consul\necho \'    missingok\' >> /etc/logrotate.d/consul\necho \'    dateext\' >> /etc/logrotate.d/consul\necho \'    copytruncate\' >> /etc/logrotate.d/consul\necho \'    compress\' >> /etc/logrotate.d/consul\necho \'}\' >> /etc/logrotate.d/consul\n```\n## 5 查看集群\nconsul members\n![图片](https://images-cdn.shimo.im/pAfr4lPYyXwyMxLR/image.png!thumbnail)\n![图片](https://images-cdn.shimo.im/ZN6YeEhPA3sLUBHP/image.png!thumbnail)\n集群选举\n![图片](https://images-cdn.shimo.im/MQi5Oas7iyIAZaAR/image.png!thumbnail)\n\n管理Excel：[https://shimo.im/sheet/BdN2unMFUc0UfkJC/21c95](https://shimo.im/sheet/BdN2unMFUc0UfkJC/21c95)\n\n33,36的consul都修改为加入到49.23的集群。\n# 一：master 10.172.49.23 ~~10.238.0.33~~\n## 1 创建配置文件\n### vim /etc/consul/server.json\n```\n{\n  \"datacenter\": \"xx-dc1\",\n  \"data_dir\": \"/tmp/consul\",\n  \"log_level\": \"INFO\",\n  \"node_name\": \"master-10.172.49.23\",\n  \"server\": true,\n  \"bootstrap_expect\": 3,\n  \"client_addr\": \"0.0.0.0\",\n  \"advertise_addr\": \"10.172.49.23\",\n  \"advertise_addr_wan\": \"10.172.49.23\",\n  \"domain\":\"consul-master-server\",\n  \"ports\":{\n      \"dns\": 53\n    },\n  \"telemetry\": {\n      \"statsd_address\": \"10.172.49.23:8125\"\n  },\n  \"acl_datacenter\": \"xx-dc1\",\n  \"acl_agent_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_master_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_default_policy\": \"deny\",\n  \"acl_down_policy\": \"extend-cache\"\n}\n\n```\n### vim /etc/consul/client.json 可以不要\n```\n{\n  \"datacenter\": \"xx-dc1\",\n  \"data_dir\": \"/tmp/consul\",\n  \"log_level\": \"INFO\",\n  \"node_name\": \"master-10.172.49.23\",\n  \"acl_enforce_version_8\":false,\n  \"acl_datacenter\": \"xx-dc1\",\n  \"bind_addr\":\"10.172.49.23\",\n  \"domain\":\"consul-master-server\",\n  \"telemetry\": {\n      \"statsd_address\": \"10.172.49.23:8125\"\n  },\n  \"rejoin_after_leave\":true,\n  \"enable_script_checks\":true,\n  \"acl_agent_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_master_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_default_policy\": \"deny\"\n}\n```\n## 2 创建启动文件  集群Server，2个节点开始选举 防止一个节点出错奔溃\n```\nvim /lib/systemd/system/consul.service\n[Unit]\nDescription=consul-master-server\nDocumentation=https://www.consul.io/\nRequires=network-online.target\nAfter=network-online.target\nConditionFileNotEmpty=/etc/consul/server.json\n[Service]\nExecStart=/usr/bin/consul agent -server -ui -bootstrap-expect=2 -data-dir=/tmp/consul -config-dir=/etc/consul -advertise=10.172.49.23 -bind=0.0.0.0 -client=0.0.0.0\nExecReload=/usr/bin/consul reload\nKillMode=process\nRestart=on-failure\nLimitNOFILE=65536\nKillSignal=SIGINT\n[Install]\nWantedBy=multi-user.target\n```\n\n## 3 配置开机启动\n```\necho \"/bin/systemctl start consul\" >> /etc/rc.local\n```\n启动服务：\n```\nsystemctl enable consul\nsystemctl start consul\n```\n查看日志：\n```\njournalctl -fu consul\n```\n\n## 4 环境访问：\n[http://10.172.49.23:8500](http://10.172.49.23:8500)\n## 5 普罗配置\n[http://10.172.49.23:9090/targets](http://10.172.49.23:9090/targets)\nMaster不存放任何机器\n\n# 二：slave2 10.172.49.24 ~~10.238.0.36~~\n## 1 创建配置文件\n### vim /etc/consul/server.json\n```\n{\n  \"datacenter\": \"xx-dc1\",\n  \"data_dir\": \"/tmp/consul\",\n  \"log_level\": \"INFO\",\n  \"node_name\": \"slave1-10.172.49.24\",\n  \"server\": true,\n  \"bootstrap_expect\": 3,\n  \"client_addr\": \"0.0.0.0\",\n  \"advertise_addr\": \"10.172.49.24\",\n  \"advertise_addr_wan\": \"10.172.49.24\",\n  \"domain\":\"consul-agent-slave1\",\n  \"ports\":{\n      \"dns\": 53\n    },\n  \"telemetry\": {\n      \"statsd_address\": \"10.172.49.24:8125\"\n  },\n  \"acl_datacenter\": \"xx-dc1\",\n  \"acl_agent_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_master_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_default_policy\": \"deny\",\n  \"acl_down_policy\": \"extend-cache\"\n}\n\n```\n### vim /etc/consul/client.json  \n```\n{\n  \"datacenter\": \"xx-dc1\",\n  \"data_dir\": \"/tmp/consul\",\n  \"log_level\": \"INFO\",\n  \"node_name\": \"slave1-10.172.49.24\",\n  \"acl_enforce_version_8\":false,\n  \"acl_datacenter\": \"xx-dc1\",\n  \"bind_addr\":\"10.172.49.24\",\n  \"domain\":\"consul-agent-slave1\",\n  \"telemetry\": {\n      \"statsd_address\": \"10.172.49.24:8125\"\n  },\n  \"rejoin_after_leave\":true,\n  \"enable_script_checks\":true,\n  \"acl_agent_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_master_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_default_policy\": \"deny\"\n}\n```\n## 2 创建启动文件 集群节点添加\n```\nvim /lib/systemd/system/consul.service\n[Unit]\nDescription=consul-agent-slave1\nDocumentation=https://www.consul.io/\nRequires=network-online.target\nAfter=network-online.target\nConditionFileNotEmpty=/etc/consul/server.json\n[Service]\nExecStart=/usr/bin/consul agent -join=10.172.49.23 -ui -data-dir=/tmp/consul -config-dir=/etc/consul -advertise=10.172.49.24 -bind=0.0.0.0 -client=0.0.0.0\nExecReload=/usr/bin/consul reloadKillMode=process\nRestart=on-failure\nLimitNOFILE=65536\nKillSignal=SIGINT\n[Install]\nWantedBy=multi-user.target\n```\n\n## 3 配置开机启动\n```\necho \"/bin/systemctl start consul\" >> /etc/rc.local\n```\n启动服务：\n```\nenablesystsystemctl enable consul\nsystemctl start consul\n```\n查看日志：\n```\njournalctl -fu consul\n```\n## 4 环境访问：\n[http://10.172.49.24:8500](http://10.172.49.24:8500)\n\n## 5 普罗配置\n[http://10.172.49.24:9090/targets](http://10.172.49.24:9090/targets)\n```\n  - job_name: \'X-86-Consul\'\n    consul_sd_configs:\n      - server: \'10.172.49.24:8500\'\n        token: p2BE1AtpwPbrxZdC6k+eXA==\n        services: [\'dcos\']\n    relabel_configs:\n      - source_labels: [\'__meta_consul_address\']\n        regex: \'(.*)\'\n        target_label: \'__address__\'\n        replacement: \'$1:9100\'\n        action: \'replace\'\n      - source_labels: [\'__meta_consul_dc\']\n        target_label: \'dc\'\n      - source_labels: [\'__meta_consul_metadata_environment\']\n        target_label: \'env\'\n      - source_labels: [\'__meta_consul_metadata_bearing_project\']\n        target_label: \'project\'\n      - source_labels: [\'__meta_consul_metadata_ownership\']\n        target_label: \'ownership\'\n      - source_labels: [\'__meta_consul_metadata_idc\']\n        target_label: \'idc\'\n      - source_labels: [\'__meta_consul_metadata_room\']\n        target_label: \'room\'\n      - source_labels: [\'__meta_consul_metadata_cabinet\']\n        target_label: \'cabinet\'\n      - source_labels: [\'__meta_consul_metadata_u_location\']\n        target_label: \'u_location\'\n      - source_labels: [\'__meta_consul_metadata_subarea\']\n        target_label: \'subarea\'\n      - source_labels: [\'__meta_consul_metadata_service\']\n        target_label: \'service\'\n```\n# 三：slave1 10.172.49.1\n## 1 创建配置文件\n### vim /etc/consul/server.json\n```\n{\n  \"datacenter\": \"xx-dc1\",\n  \"data_dir\": \"/tmp/consul\",\n  \"log_level\": \"INFO\",\n  \"node_name\": \"slave2-10.172.49.1\",\n  \"server\": true,\n  \"bootstrap_expect\": 3,\n  \"client_addr\": \"0.0.0.0\",\n  \"advertise_addr\": \"10.172.49.1\",\n  \"advertise_addr_wan\": \"10.172.49.1\",\n  \"domain\":\"consul-agent-slave2\",\n  \"ports\":{\n      \"dns\": 53\n    },\n  \"telemetry\": {\n      \"statsd_address\": \"10.172.49.1:8125\"\n  },\n  \"acl_datacenter\": \"xx-dc1\",\n  \"acl_agent_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_master_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_default_policy\": \"deny\",\n  \"acl_down_policy\": \"extend-cache\"\n}\n\n```\n### vim /etc/consul/client.json\n```\n{\n  \"datacenter\": \"xx-dc1\",\n  \"data_dir\": \"/tmp/consul\",\n  \"log_level\": \"INFO\",\n  \"node_name\": \"slave2-10.172.49.1\",\n  \"acl_enforce_version_8\":false,\n  \"acl_datacenter\": \"xx-dc1\",\n  \"bind_addr\":\"10.172.49.1\",\n  \"domain\":\"consul-agent-slave2\",\n  \"telemetry\": {\n      \"statsd_address\": \"10.172.49.1:8125\"\n  },\n  \"rejoin_after_leave\":true,\n  \"enable_script_checks\":true,\n  \"acl_agent_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_master_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_default_policy\": \"deny\"\n}\n```\n## 2 创建启动文件  集群节点添加\n```\nvim /lib/systemd/system/consul.service\n[Unit]\nDescription=consul-agent-slave2\nDocumentation=https://www.consul.io/\nRequires=network-online.target\nAfter=network-online.target\nConditionFileNotEmpty=/etc/consul/server.json\n[Service]\nExecStart=/usr/bin/consul agent -join=10.172.49.23 -ui -data-dir=/tmp/consul -config-dir=/etc/consul -advertise=10.172.49.1 -bind=0.0.0.0 -client=0.0.0.0\nExecReload=/usr/bin/consul reload\nKillMode=process\nRestart=on-failure\nLimitNOFILE=65536\nKillSignal=SIGINT\n[Install]\nWantedBy=multi-user.target\n```\n\n## 3 配置开机启动\n```\necho \"/bin/systemctl start consul\" >> /etc/rc.local\n```\n启动服务：\n```\nesystemctlsystemctl enable consul\nsystemctl start consul\n```\n查看日志：\n```\njournalctl -fu consul\n```\n\n## 4 环境访问：\n[http://10.172.49.23:8500](http://10.172.49.23:8500)\n\n## 5 普罗配置\n[http://10.172.49.1:9090/targets](http://10.172.49.1:9090/targets)\n```\n  - job_name: \'X-86-Consul\'\n    consul_sd_configs:\n      - server: \'10.172.49.1:8500\'\n        token: p2BE1AtpwPbrxZdC6k+eXA==\n        services: [\'xkf\',\'ryy\',\'cbss2\']\n    relabel_configs:\n      - source_labels: [\'__meta_consul_address\']\n        regex: \'(.*)\'\n        target_label: \'__address__\'\n        replacement: \'$1:9100\'\n        action: \'replace\'\n      - source_labels: [\'__meta_consul_dc\']\n        target_label: \'dc\'\n      - source_labels: [\'__meta_consul_metadata_environment\']\n        target_label: \'env\'\n      - source_labels: [\'__meta_consul_metadata_bearing_project\']\n        target_label: \'project\'\n      - source_labels: [\'__meta_consul_metadata_ownership\']\n        target_label: \'ownership\'\n      - source_labels: [\'__meta_consul_metadata_idc\']\n        target_label: \'idc\'\n      - source_labels: [\'__meta_consul_metadata_room\']\n        target_label: \'room\'\n      - source_labels: [\'__meta_consul_metadata_cabinet\']\n        target_label: \'cabinet\'\n      - source_labels: [\'__meta_consul_metadata_u_location\']\n        target_label: \'u_location\'\n      - source_labels: [\'__meta_consul_metadata_subarea\']\n        target_label: \'subarea\'\n      - source_labels: [\'__meta_consul_metadata_service\']\n        target_label: \'service\'\n```\n# 四：slave3 10.172.49.39\n## 1 创建配置文件\n### vim /etc/consul/server.json\n```\n{\n  \"datacenter\": \"xx-dc1\",\n  \"data_dir\": \"/tmp/consul\",\n  \"log_level\": \"INFO\",\n  \"node_name\": \"slave3-10.172.49.39\",\n  \"server\": true,\n  \"bootstrap_expect\": 3,\n  \"client_addr\": \"0.0.0.0\",\n  \"advertise_addr\": \"10.172.49.39\",\n  \"advertise_addr_wan\": \"10.172.49.39\",\n  \"domain\":\"consul-agent-slave3\",\n  \"ports\":{\n      \"dns\": 53\n    },\n  \"telemetry\": {\n      \"statsd_address\": \"10.172.49.39:8125\"\n  },\n  \"acl_datacenter\": \"xx-dc1\",\n  \"acl_agent_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_master_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_default_policy\": \"deny\",\n  \"acl_down_policy\": \"extend-cache\"\n}\n\n```\n### vim /etc/consul/client.json\n```\n{\n  \"datacenter\": \"xx-dc1\",\n  \"data_dir\": \"/tmp/consul\",\n  \"log_level\": \"INFO\",\n  \"node_name\": \"slave3-10.172.49.39\",\n  \"acl_enforce_version_8\":false,\n  \"acl_datacenter\": \"xx-dc1\",\n  \"bind_addr\":\"10.172.49.39\",\n  \"domain\":\"consul-agent-slave3\",\n  \"telemetry\": {\n      \"statsd_address\": \"10.172.49.39:8125\"\n  },\n  \"rejoin_after_leave\":true,\n  \"enable_script_checks\":true,\n  \"acl_agent_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_master_token\": \"p2BE1AtpwPbrxZdC6k+eXA==\",\n  \"acl_default_policy\": \"deny\"\n}\n```\n## 2 创建启动文件  集群节点添加\n```\nvim /lib/systemd/system/consul.service\n[Unit]\nDescription=consul-agent-slave2\nDocumentation=https://www.consul.io/\nRequires=network-online.target\nAfter=network-online.target\nConditionFileNotEmpty=/etc/consul/server.json\n[Service]\nExecStart=/usr/bin/consul agent -join=10.172.49.23 -ui -data-dir=/tmp/consul -config-dir=/etc/consul -advertise=10.172.49.39 -bind=0.0.0.0 -client=0.0.0.0\nExecReload=/usr/bin/consul reload\nKillMode=process\nRestart=on-failure\nLimitNOFILE=65536\nKillSignal=SIGINT\n[Install]\nWantedBy=multi-user.target\n```\n\n## 3 配置开机启动\n```\necho \"/bin/systemctl start consul\" >> /etc/rc.local\n```\n启动服务：\n```\nsystemctl enable consul\nsystemctl start consul\n```\n查看日志：\n```\njournalctl -fu consul\n```\n\n## 4 环境访问：\n[http://10.172.49.23:8500](http://10.172.49.23:8500)\n\n## 5 普罗配置\n[http://10.172.49.1:9090/targets](http://10.172.49.1:9090/targets)\n```\n  - job_name: \'X-86-Consul\'\n    consul_sd_configs:\n      - server: \'10.172.49.1:8500\'\n        token: p2BE1AtpwPbrxZdC6k+eXA==\n        services: [\'xkf\',\'ryy\',\'cbss2\']\n    relabel_configs:\n      - source_labels: [\'__meta_consul_address\']\n        regex: \'(.*)\'\n        target_label: \'__address__\'\n        replacement: \'$1:9100\'\n        action: \'replace\'\n      - source_labels: [\'__meta_consul_dc\']\n        target_label: \'dc\'\n      - source_labels: [\'__meta_consul_metadata_environment\']\n        target_label: \'env\'\n      - source_labels: [\'__meta_consul_metadata_bearing_project\']\n        target_label: \'project\'\n      - source_labels: [\'__meta_consul_metadata_ownership\']\n        target_label: \'ownership\'\n      - source_labels: [\'__meta_consul_metadata_idc\']\n        target_label: \'idc\'\n      - source_labels: [\'__meta_consul_metadata_room\']\n        target_label: \'room\'\n      - source_labels: [\'__meta_consul_metadata_cabinet\']\n        target_label: \'cabinet\'\n      - source_labels: [\'__meta_consul_metadata_u_location\']\n        target_label: \'u_location\'\n      - source_labels: [\'__meta_consul_metadata_subarea\']\n        target_label: \'subarea\'\n      - source_labels: [\'__meta_consul_metadata_service\']\n        target_label: \'service\'\n```\n\n# 四：问题\nFatal: invalid genesis file: invalid character ‘â’ looking for beginning of object key string\n![图片](https://uploader.shimo.im/f/JKqEK9AcBXMAV5ig.png!thumbnail)\nsomething doesn’t cooypaste right…\nIf you write it by hand it will work\n\n\n![图片](https://uploader.shimo.im/f/ylARh1RxJ7AINhnv.png!thumbnail)\nnetstat -tulpn| grep 53\nnetstat -atunlp| grep 53\nkill掉53的接口\n![图片](https://uploader.shimo.im/f/0ukmLGG718cRTims.png!thumbnail)\n找一台一样的机器。派出掉原因\n\n一次修改资产信息后consul无法正常启动，找不到集群，原因为服务器上有多个ipv4地址，需要添加advertise\n此外考虑到没有删除干净，nodename与之前不对应导致集群无法选举，重新修改了slave节点名，并修正了因输入错导致server.json和client.json中nodename不一致，再次启动问题解决。\n\n# 五：Consul Python\n官方API：[https://www.consul.io/api/index.html](https://www.consul.io/api/index.html)  ACL Token\n\n[consul.postman_collection.json](https://uploader.shimo.im/f/wffx0qdQ8PQYuT7i.json)\n\n\n[python consul demo.zip](https://uploader.shimo.im/f/ol3GZ9p5Ou4YW8ei.zip)\n\n\n','/articles/2019/07/16/1563262967809.html','0',1563262967961,1563262967961,0.7113637621893398,'1','1','','https://images-cdn.shimo.im/pAfr4lPYyXwyMxLR/image.png!thumbnail',0),('1563263254966','普罗-ZABBIX发送告警到钉钉','普罗-ZABBIX发送告警到钉钉','普罗-ZABBIX发送告警到钉钉','普罗,ZABBIX,告警.钉钉','1562037727771',0,73,'# 自定义机器人  \n获取自定义机器人webhook\n[https://open-doc.dingtalk.com/docs/doc.htm?treeId=257&articleId=105735&docType=1](https://open-doc.dingtalk.com/docs/doc.htm?treeId=257&articleId=105735&docType=1)\n\n钉钉API：\n```\n钉钉机器人token：https://oapi.dingtalk.com/robot/send?access_token=24c0b36c8b7cccbd97c2fa4371a3c238710a51e832084c3d3f086057fe807441\n端口：65500\n```\n\n# 安装Webhook\n10.127.128.1  prometheus-webhook-dingtalk\n[prometheus-webhook-dingtalk](https://uploader.shimo.im/f/soMmfNzTpzEeyRqg)\n\n源码安装参考：[https://blog.csdn.net/AlbertFly/article/details/83414432](https://blog.csdn.net/AlbertFly/article/details/83414432)\n[http://www.cnblogs.com/pyuh/articles/9544121.html](http://www.cnblogs.com/pyuh/articles/9544121.html)\n插件下载地址：[https://github.com/timonwong/prometheus-webhook-dingtalk](https://github.com/timonwong/prometheus-webhook-dingtalk)\n\n```\nusage: prometheus-webhook-dingtalk --ding.profile=DING.PROFILE [<flags>]\nFlags:\n  -h, --help             Show context-sensitive help (also try --help-long and --help-man).\n      --web.listen-address=\":8060\"\n                         The address to listen on for web interface.\n      --ding.profile=DING.PROFILE ...\n                         Custom DingTalk profile (can specify multiple times, <profile>=<dingtalk-url>).\n      --ding.timeout=5s  Timeout for invoking DingTalk webhook.\n      --log.level=info   Only log messages with the given severity or above. One of: [debug, info, warn, error]\n      --version          Show application version.\n\n```\n## 开放路由给AlertManager\n默认监听在8060端口（可配置）上   启动命令：\n```\n/bin/nohup ./prometheus-webhook-dingtalk  --ding.profile=\"webhook1= https://oapi.dingtalk.com/robot/send?access_token=24c0b36c8b7cccbd97c2fa4371a3c238710a51e832084c3d3f086057fe807441\"  --web.listen-address=\":65500\" --template.file=dingtalk.tmpl &\n```\n这里就定义了两个 WebHook，一个 webhook1，用来往不同的钉钉组发送报警消息。然后在 [AlertManager](https://github.com/prometheus/alertmanager) 的配置里面，加入相应的 receiver（注意下面的 url）即可：\n\nwebhook2=[https://oapi.dingtalk.com/robot/send?access_token=ad8b0743d5ffd369b68e846dda78205d8ae13d81d14863059917e6d5de6a5e57](https://oapi.dingtalk.com/robot/send?access_token=ad8b0743d5ffd369b68e846dda78205d8ae13d81d14863059917e6d5de6a5e57)\n# AlertManager配置：\n其他组件：[https://www.tidb.cc/Monitor/170607-AlertManager.html](https://www.tidb.cc/Monitor/170607-AlertManager.html)\n\n钉钉组件\n```\n- name: \'send_to_dingding_webhook1\'\n  webhook_configs:\n  - send_resolved: false\n    url: \'http://10.127.128.1:65500/dingtalk/webhook1/send\'\n```\n\n使用webhook扩展alertmanager：\n[http://ylzheng.com/2018/03/01/alertmanager-webhook-dingtalk/](http://ylzheng.com/2018/03/01/alertmanager-webhook-dingtalk/)\n\n# 外网-Zabbix实现推送到钉钉（暂时不用）\n[https://huangwj.app/monitor/zabbix/python%E5%AE%9E%E7%8E%B0zabbix%E5%91%8A%E8%AD%A6%E6%8E%A8%E9%80%81%E9%92%89%E9%92%89.html](https://huangwj.app/monitor/zabbix/python%E5%AE%9E%E7%8E%B0zabbix%E5%91%8A%E8%AD%A6%E6%8E%A8%E9%80%81%E9%92%89%E9%92%89.html)\n[https://blog.csdn.net/u010871982/article/details/80469859](https://blog.csdn.net/u010871982/article/details/80469859)\n[https://blog.csdn.net/u010871982/article/details/79229953](https://blog.csdn.net/u010871982/article/details/79229953)\n[https://www.linuxidc.com/Linux/2017-12/149953.htm](https://www.linuxidc.com/Linux/2017-12/149953.htm)\n\n# 内网-Zabbix 使用AlertManager的路由地址\n[https://blog.csdn.net/u010871982/article/details/79229953?utm_source=blogxgwz8](https://blog.csdn.net/u010871982/article/details/79229953?utm_source=blogxgwz8)\n测试：\n![图片](https://uploader.shimo.im/f/ssdbrPiLrQIafswI.png!thumbnail)\n## url\nhttp://10.127.128.1:65500/dingtalk/webhook1/send\n## 发送报文\n一个合格的报警通知，应该包含如下内容：\n* 报警级别\n* 简短的报警名称\n* 简要说明\n* 详细说明\n* 附加上下文信息\n* 一个链接，点击后进入指标的 Graph\n\n样例：[https://github.com/timonwong/prometheus-webhook-dingtalk/blob/master/examples/send_alerts.sh](https://github.com/timonwong/prometheus-webhook-dingtalk/blob/master/examples/send_alerts.sh)\n```\n{\n    \"receiver\": \"admins\",\n    \"status\": \"firing\",\n    \"alerts\": [\n        {\n            \"status\": \"firing\",\n            \"labels\": {\n                \"alertname\": \"test something_happend\",\n                \"env\": \"prod\",\n                \"instance\": \"server01.int:9100\",\n                \"job\": \"node\",\n                \"service\": \"prometheus_bot\",\n                \"severity\": \"warning\",\n                \"supervisor\": \"runit\"\n            },\n            \"annotations\": {\n                \"summary\": \"Oops, something happend!\"\n            },\n            \"startsAt\": \"2016-04-27T20:46:37.903Z\",\n            \"endsAt\": \"0001-01-01T00:00:00Z\",\n            \"generatorURL\": \"https://example.com/graph#...\"\n        }\n    ],\n    \"groupLabels\": {\n        \"alertname\": \"something_happend\",\n        \"instance\": \"server01.int:9100\"\n    },\n    \"commonLabels\": {\n        \"alertname\": \"something_happend\",\n        \"env\": \"prod\",\n        \"instance\": \"server01.int:9100\",\n        \"job\": \"node\",\n        \"service\": \"prometheus_bot\",\n        \"severity\": \"warning\",\n        \"supervisor\": \"runit\"\n    },\n    \"commonAnnotations\": {\n        \"summary\": \"runit service prometheus_bot restarted, server01.int:9100\"\n    },\n    \"externalURL\": \"https://alert-manager.example.com\",\n    \"version\": \"3\"\n}\n```\n\n\n```\ncurl -H \"Content-Type:application/json\" -X POST -d \'{\"receiver\":\"admins\",\"status\":\"firing\",\"alerts\":[{\"status\":\"firing\",\"labels\":{\"alertname\":\"testsomething_happend\",\"env\":\"prod\",\"instance\":\"server01.int:9100\",\"job\":\"node\",\"service\":\"prometheus_bot\",\"severity\":\"warning\",\"supervisor\":\"runit\"},\"annotations\":{\"summary\":\"Oops,somethinghappend!\"},\"startsAt\":\"2016-04-27T20:46:37.903Z\",\"endsAt\":\"0001-01-01T00:00:00Z\",\"generatorURL\":\"https://example.com/graph#...\"}],\"groupLabels\":{\"alertname\":\"something_happend\",\"instance\":\"server01.int:9100\"},\"commonLabels\":{\"alertname\":\"something_happend\",\"env\":\"prod\",\"instance\":\"server01.int:9100\",\"job\":\"node\",\"service\":\"prometheus_bot\",\"severity\":\"warning\",\"supervisor\":\"runit\"},\"commonAnnotations\":{\"summary\":\"runitserviceprometheus_botrestarted,server01.int:9100\"},\"externalURL\":\"https://alert-manager.example.com\",\"version\":\"3\"}\' http://10.127.128.1:8094/dingtalk/ops_dingding/send\n```\n## 发送结果\n![图片](https://uploader.shimo.im/f/E9KcNrrJcdoLt1Hb.png!thumbnail)\n\n\n## 目标样式\n参考：[http://theo.im/blog/2017/10/16/release-prometheus-alertmanager-webhook-for-dingtalk/](http://theo.im/blog/2017/10/16/release-prometheus-alertmanager-webhook-for-dingtalk/)\n\n![图片](https://uploader.shimo.im/f/NbUr9xjcRLAqQbdY.png!thumbnail)\n## 下载最新release版本：\n[https://github.com/timonwong/prometheus-webhook-dingtalk/releases](https://github.com/timonwong/prometheus-webhook-dingtalk/releases)\n![图片](https://uploader.shimo.im/f/GQjqlDKsqnc1DPeJ.png!thumbnail)\n[prometheus-webhook-dingtalk](https://uploader.shimo.im/f/daghIfJfRW0Nb3Ea)\n\n\n[default.tmpl](https://uploader.shimo.im/f/VxOBMaiosMUAvbNV.tmpl)\n\n\n配置tmpl\n[https://github.com/timonwong/prometheus-webhook-dingtalk/issues/8](https://github.com/timonwong/prometheus-webhook-dingtalk/issues/8)\n配置 dingtalk.tmpl 即可\n\n# prometheus使用webhook进行钉钉告警推送\n参考地址：[https://github.com/timonwong/prometheus-webhook-dingtalk/blob/d04cd50b81e76af555fdb108a559a8a432a8dc4e/template/default.tmpl](https://github.com/timonwong/prometheus-webhook-dingtalk/blob/d04cd50b81e76af555fdb108a559a8a432a8dc4e/template/default.tmpl)\n\n## golang template\n```\n{{ define \"__subject\" }}[{{ .Status | toUpper }}{{ if eq .Status \"firing\" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .GroupLabels.SortedPairs.Values | join \" \" }} {{ if gt (len .CommonLabels) (len .GroupLabels) }}({{ with .CommonLabels.Remove .GroupLabels.Names }}{{ .Values | join \" \" }}{{ end }}){{ end }}{{ end }}\n\n\n\n\n{{ define \"__alertmanagerURL\" }}{{ .ExternalURL }}/#/alerts?receiver={{ .Receiver }}{{ end }}\n\n\n\n\n{{ define \"__text_alert_type\" }}\n{{ range .Annotations.SortedPairs }}\n{{if eq .Name \"summary\"}} # {{ .Value | markdown | html }} # {{ end }}\n{{ end }}\n\n\n{{ end }}\n\n\n{{/*\n{{ define \"__text_alert_list\" }}{{ range . }}\n\n\n*/}}\n\n\n{{ define \"__text_alert_list\" }}{{ range $i, $v := .}}\n## 第{{ $i }}条消息\n\n\n{{ template \"__text_alert_type\" . }}\n\n\n### 产生时间: {{ .StartsAt | printf \"%.19s\" }}(CST)\n\n\n{{ range .Labels.SortedPairs }}\n{{if eq .Name \"collect\"}}>- 收集节点: {{ .Value | markdown | html }}  {{ end }}\n{{if eq .Name \"instance\"}}>- 主机IP: {{ .Value | markdown | html }}  {{ end }}\n{{if eq .Name \"job\"}}>- 节点角色: {{ .Value | markdown | html }}  {{ end }}\n{{if eq .Name \"service\"}}>- 服务名称: {{ .Value | markdown | html }}  {{ end }}\n{{if eq .Name \"severity\"}}>- 严重等级: **{{ .Value | markdown | html }}** {{end }}\n{{if eq .Name \"type\"}}>- 服务器类型: {{ .Value | markdown | html }}  {{ end }}\n{{if eq .Name \"zone\"}}>- 归属位置: {{ .Value | markdown | html }}  {{ end }}\n{{if eq .Name \"mountpoint\"}}>- 挂载点: {{ .Value | markdown | html }}  {{ end }}\n\n\n{{ end }}\n\n\n>- 描述: {{ index .Annotations \"description\" }}\n\n\n- - -\n\n\n{{ end }}{{ end }}\n\n\n{{ define \"ding.link.title\" }}{{ template \"__subject\" . }}{{ end }}\n\n\n{{/*\n{{ define \"ding.link.content\" }}{{ if eq .Status \"resolved\" }} \\[已解除]{{ index .CommonAnnotations \"summary\" }}{{ end }}\n*/}}\n\n\n{{ define \"ding.link.content\" }}# \\[{{ .Status | toUpper }}{{ if eq .Status \"firing\" }}:{{ .Alerts.Firing | len }}{{ end }}\\] **[{{ index .GroupLabels \"alertname\" }}]({{ template \"__alertmanagerURL\" . }})**\n{{ template \"__text_alert_list\" .Alerts.Firing }}\n```\n{{ end }}\n\n\n\n## 其他：\nAlertmanager api：\n[http://www.techscore.com/blog/2017/12/18/prometheus-alermanager-api/](http://www.techscore.com/blog/2017/12/18/prometheus-alermanager-api/)\n\n[http://10.172.49.23:9093/api/v1/alerts](http://10.172.49.23:9093/api/v1/alerts)\n[\n  {\n    \"labels\": {\n      \"alertname\": \"Test_Alert\",\n      \"instance\": \"node0\"\n    },\n    \"annotations\": {\n      \"link\": \"https://example.com\",\n      \"summary\": \"This is a testing alert!\"\n    },\n    \"startsAt\": \"2018-12-18T14:55:24Z\",\n    \"generatorURL\": \"http://my.testing.script.local\" \n  }\n]\n\n{\n    \"status\": \"success\"\n}\n\n## ZABBIX配置\n配置媒介类型\n![图片](https://uploader.shimo.im/f/w44smc79ix0Xbnxk.png!thumbnail)\n![图片](https://uploader.shimo.im/f/LUKKS1x4Yz4yStRe.png!thumbnail)\n![图片](https://uploader.shimo.im/f/IvOvQf5ygjAaPZ1I.png!thumbnail)\nZABBIX宏使用场景：[https://www.zabbix.com/documentation/4.0/zh/manual/appendix/macros/supported_by_location](https://www.zabbix.com/documentation/4.0/zh/manual/appendix/macros/supported_by_location)\n```\n#问题：\nProblem started at {EVENT.TIME} on {EVENT.DATE}\nProblem name: {EVENT.NAME}\nHost: {HOST.NAME}\nSeverity: {EVENT.SEVERITY}\n\nOriginal problem ID: {EVENT.ID}\nURL:http://10.238.0.33/zabbix/tr_events.php?triggerid{TRIGGER.ID}&eventid={EVENT.ID}\n\n#恢复：\nProblem has been resolved at {EVENT.RECOVERY.TIME} on {EVENT.RECOVERY.DATE}\nProblem name: {EVENT.NAME}\nHost: {HOST.NAME}\nSeverity: {EVENT.SEVERITY}\nAge: {EVENT.AGE}  at {EVENT.DATE} {EVENT.TIME}\n\nOriginal problem ID: {EVENT.ID}\nURL:http://10.238.0.33/zabbix/tr_events.php?triggerid{TRIGGER.ID}&eventid={EVENT.ID}\n\n```\n\n```\n#!/usr/bin/env python3\n# encoding: utf-8\n\nimport sys\nimport getopt\nimport requests\nimport json\nimport traceback\ntry:\n    opts,args = getopt.getopt(sys.argv[1:],shortopts=\'\',longopts=[\'webhook_url=\',\'webhook_title=\',\'alert_message=\',\'trigger_url=\'])\n    for opt,value in opts:\n        if opt == \'--webhook_url\':\n            webhook_url = value\n        elif opt == \'--webhook_title\':\n            webhook_title = value\n        elif opt == \'--alert_message\':\n            alert_message = value\n        elif opt == \'--trigger_url\':\n            trigger_url = value\n    webhook_header = {\n            \"Content-Type\": \"application/json\",\n            \"charset\": \"utf-8\"\n        }\n    webhook_message = {\n		\"receiver\": \"admins\",\n		\"status\": \"firing\",\n		\"alerts\": [\n			{\n				\"status\": \"firing\",\n				\"labels\": {\n					\"消息\": \"{}\".format(alert_message)\n				},\n				\"annotations\": {\n					\"summary\": \"Oops, here comes the surprise!\"\n				},\n				\"generatorURL\": \"{}\".format(trigger_url)\n			}\n		],\n		\"groupLabels\": {\n			\"alertname\": \"{}\".format(webhook_title)\n		},\n		\"version\": \"3\"\n	}\n    sendData = json.dumps(webhook_message,indent=1)\n    requests.post(url=webhook_url,headers=webhook_header,data=sendData)\nexcept:\n    traceback.print_exc(file=open(\'/tmp/alert_zabbix_dingding.log\',\'w+\'))\n\n```\n\n测试命令：\n```\npython dingding_inter.py --webhook_url=http://10.127.128.1:65500/dingtalk/webhook2/send --webhook_title={ALERT.SUBJECT} --alert_message={ALERT.MESSAGE} --trigger_url={TRIGGER.URL}\n```\n\n','/articles/2019/07/16/1563263254966.html','0',1563263255169,1563263336120,0.8298126683285214,'1','1','','https://uploader.shimo.im/f/ssdbrPiLrQIafswI.png!thumbnail',0),('1563518615205','IDC机房主机及网络设备命名规则','IDC机房主机及网络设备命名规则','IDC机房主机及网络设备命名规则','IDC,机房,主机,网络','1562037727771',0,33,'\n# 网络设备命名\n\n\n----------\n\n网络设备命名规则将采用字母与数字结合的方法，具体规则为：\n\n格式：字段1-字段2-字段3-字段4-字段5-字段6-字段7-字段8\n\n举例：SNXX-1#IDC-B003-A02-DMZ-CORE-SW01&02-HW12816\n\n说明：（各字段的含义如下）\n\n<table style=\"border-collapse: collapse;border-spacing: 0px;\"><tbody><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"0\" col=\"0\" contenteditable=\"true\" style=\"min-height: 30px;border-width: 1px;border-style: solid;border-color: rgb(185, 202, 207); background-color: rgb(218, 238, 243);vertical-align: middle;padding: 4px 0px;\" width=\"118.667\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><strong class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段名称</strong></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"0\" col=\"1\" contenteditable=\"true\" style=\"min-height: 30px;border-width: 1px;border-style: solid;border-color: rgb(185, 202, 207); background-color: rgb(218, 238, 243);vertical-align: middle;padding: 4px 0px;\" width=\"488\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><strong class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段含义</strong></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"1\" col=\"0\" contenteditable=\"true\" width=\"118.667\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段1</span></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"1\" col=\"1\" contenteditable=\"true\" width=\"488\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段1为地市局点首字母，用于标识设备安装地点，例如：</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024\" style=\"color: rgb(0, 0, 0);color: #000000;\"></span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">山南XX局点机房：SNXX</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"2\" col=\"0\" contenteditable=\"true\" width=\"118.667\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段</span></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"2\" col=\"1\" contenteditable=\"true\" width=\"488\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段2为机房楼名称，用于标识机房楼号</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">1号IDC机房楼：1#IDC</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"3\" col=\"0\" contenteditable=\"true\" width=\"118.667\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段3</span></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"3\" col=\"1\" contenteditable=\"true\" width=\"488\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段3为机房名称，用于标识机房号</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">B003机房：B003</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">&nbsp;</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"4\" col=\"0\" contenteditable=\"true\" width=\"118.667\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段4</span></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"4\" col=\"1\" contenteditable=\"true\" width=\"488\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段4为机柜位置，用于标识机柜</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">A列第2个机柜：A02</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"5\" col=\"0\" contenteditable=\"true\" width=\"118.667\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段5</span></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"5\" col=\"1\" contenteditable=\"true\" width=\"488\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段5为区域名称，用于标识设备所属区域：</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">总部核心应用区：HQ</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">阿里核心应用区：ALI</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">省份核心应用区：PROV</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">管理区：MG</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">测试区：TEST</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">用户接入区：DCN</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">DMZ:DMZ</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\">&nbsp;</span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">外部区:OUT</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"6\" col=\"0\" contenteditable=\"true\" width=\"118.667\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段6</span></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"6\" col=\"1\" contenteditable=\"true\" width=\"488\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段4为设备角色名，用于标识设备所属角色，定义为：</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">核心交换机：CORE</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">汇聚交换机：AGGE</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">接入交换机：ACC</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">防火墙：FW</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">负载均衡：LB</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">&nbsp;</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"7\" col=\"0\" contenteditable=\"true\" width=\"118.667\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段7</span></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"7\" col=\"1\" contenteditable=\"true\" width=\"488\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段5为设备编号，用于标识同一类网络设备的编号，范围为01-100</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"8\" col=\"0\" contenteditable=\"true\" width=\"118.667\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段8</span></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"8\" col=\"1\" contenteditable=\"true\" width=\"488\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段6为设备型号，用于标识设备的型号，定义为：</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">H3C12808S</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">Ø</span><span class=\"ql-author-77024 ql-size-9\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 9pt;\"> </span><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">HW6855</span></p><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">&nbsp;</span></p></td></tr></tbody></table>\n\n  \n\n3.2 网络端口规范\n\n\n--------------\n\n**格式：**To-[对方设备名称]-端口编号\n\n**举例：**To-[ SNXX-1#IDC-B003-A02-DMZ-CORE-SW01&02-HW12816]- 40GE1/1/0/0\n\n**说明：**（各字段的含义如下）\n\n<table style=\"border-collapse: collapse;border-spacing: 0px;\"><tbody><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"0\" col=\"0\" contenteditable=\"true\" style=\"min-height: 30px;border-width: 1px;border-style: solid;border-color: rgb(185, 202, 207); background-color: rgb(218, 238, 243);vertical-align: middle;padding: 4px 0px;\" width=\"119.333\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><strong class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段名称</strong></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"0\" col=\"1\" contenteditable=\"true\" style=\"min-height: 30px;border-width: 1px;border-style: solid;border-color: rgb(185, 202, 207); background-color: rgb(218, 238, 243);vertical-align: middle;padding: 4px 0px;\" width=\"489.333\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><strong class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字段含义</strong></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"1\" col=\"0\" contenteditable=\"true\" width=\"119.333\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">对方设备名称</span></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"1\" col=\"1\" contenteditable=\"true\" width=\"489.333\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">采用与本端直连的对端设备名称</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"2\" col=\"0\" contenteditable=\"true\" width=\"119.333\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">端口编号</span></p></td><td class=\"ql-sheet-cell ql-vertical-middle\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"2\" col=\"1\" contenteditable=\"true\" width=\"489.333\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: middle;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">对端设备的端口类型+插槽号/模块号/端口号，对于没有模块号的设备直接用插槽号/端口号表示。(例如：XG1/0/1、G1/0/1)</span></p></td></tr></tbody></table>\n\n  \n\n# 主机命名规则\n\n\n--------------\n\n主机命名规则如下：\n\n设备放置序号+机柜列编号+机柜序号+机房名称.数据中心+楼号\n\n<table style=\"border-collapse: collapse;border-spacing: 0px;\"><tbody><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"0\" col=\"0\" contenteditable=\"true\" width=\"53\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><strong class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">序号</strong></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"0\" col=\"1\" contenteditable=\"true\" width=\"94\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><strong class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">名称</strong></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"0\" col=\"2\" contenteditable=\"true\" width=\"110\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><strong class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">位数</strong></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"0\" col=\"3\" contenteditable=\"true\" width=\"47\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><strong class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字符</strong></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"0\" col=\"4\" contenteditable=\"true\" width=\"73\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><strong class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">取值范围</strong></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"0\" col=\"5\" contenteditable=\"true\" width=\"239\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"center\" class=\"ql-align-center\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: center;font-size: 11pt;color: #494949;\"><strong class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">说明</strong></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"1\" col=\"0\" contenteditable=\"true\" width=\"53\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">1</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"1\" col=\"1\" contenteditable=\"true\" width=\"94\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">设备放置序号</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"1\" col=\"2\" contenteditable=\"true\" width=\"110\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">2</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"1\" col=\"3\" contenteditable=\"true\" width=\"47\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">数字</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"1\" col=\"4\" contenteditable=\"true\" width=\"73\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">01-99</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"1\" col=\"5\" contenteditable=\"true\" width=\"239\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">机柜从下往上计数的设备序号，不足2位前面以0补齐，如从下往上第3台设备，填写03</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"2\" col=\"0\" contenteditable=\"true\" width=\"53\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">2</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"2\" col=\"1\" contenteditable=\"true\" width=\"94\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">机柜列编号</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"2\" col=\"2\" contenteditable=\"true\" width=\"110\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">1</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"2\" col=\"3\" contenteditable=\"true\" width=\"47\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字母</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"2\" col=\"4\" contenteditable=\"true\" width=\"73\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">a-z</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"2\" col=\"5\" contenteditable=\"true\" width=\"239\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">机柜所在列编号，以各机房标识为准</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"3\" col=\"0\" contenteditable=\"true\" width=\"53\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">3</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"3\" col=\"1\" contenteditable=\"true\" width=\"94\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">机柜序号</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"3\" col=\"2\" contenteditable=\"true\" width=\"110\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">2</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"3\" col=\"3\" contenteditable=\"true\" width=\"47\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">数字</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"3\" col=\"4\" contenteditable=\"true\" width=\"73\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">01-99</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"3\" col=\"5\" contenteditable=\"true\" width=\"239\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">机柜序号，以各机房标识为准</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"4\" col=\"0\" contenteditable=\"true\" width=\"53\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">4</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"4\" col=\"1\" contenteditable=\"true\" width=\"94\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">机房名称</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"4\" col=\"2\" contenteditable=\"true\" width=\"110\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">4</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"4\" col=\"3\" contenteditable=\"true\" width=\"47\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">　</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"4\" col=\"4\" contenteditable=\"true\" width=\"73\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">　</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"4\" col=\"5\" contenteditable=\"true\" width=\"239\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">以各机房命名为准，不足4位前面以0补齐</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"5\" col=\"0\" contenteditable=\"true\" width=\"53\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">5</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"5\" col=\"1\" contenteditable=\"true\" width=\"94\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">数据中心</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"5\" col=\"2\" contenteditable=\"true\" width=\"110\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">2</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"5\" col=\"3\" contenteditable=\"true\" width=\"47\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">字母</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"5\" col=\"4\" contenteditable=\"true\" width=\"73\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">　</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"5\" col=\"5\" contenteditable=\"true\" width=\"239\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">数据中心拼音首字母缩写，YZ为yz，LF为lf，XX为xx</span></p></td></tr><tr height=\"30\" style=\"height: 30px;\"><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"6\" col=\"0\" contenteditable=\"true\" width=\"53\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">6</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"6\" col=\"1\" contenteditable=\"true\" width=\"94\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">楼号</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"6\" col=\"2\" contenteditable=\"true\" width=\"110\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">2</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"6\" col=\"3\" contenteditable=\"true\" width=\"47\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">数字</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"6\" col=\"4\" contenteditable=\"true\" width=\"73\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">01-99</span></p></td><td class=\"ql-sheet-cell ql-vertical-bottom\" autocorrect=\"off\" autocomplete=\"off\" spellcheck=\"false\" row=\"6\" col=\"5\" contenteditable=\"true\" width=\"239\" style=\"min-height: 30px;border-width: 1px;border-style: solid;vertical-align: bottom;padding: 4px 0px;\"><p align=\"justify\" class=\"ql-align-justify\" style=\"line-height: 1.7;margin-bottom: 0pt;margin-top: 0pt;text-align: justify;font-size: 11pt;color: #494949;\"><span class=\"ql-author-77024 ql-size-10\" style=\"color: rgb(0, 0, 0);color: #000000;font-size: 10pt;\">机房所在数据中心的楼编码，如2号楼，填写02</span></p></td></tr></tbody></table>\n\n \n\n举例说明:\n\n1.XX数据中心1号楼B003机房的A03机柜第1台主机的主机名为：\n\n01a03b003.xx01\n\n2.YZ数据中心2号楼501机房的B18机柜第三台主机的主机名为：\n\n03b180501.yz02','/articles/2019/07/19/1563518615205.html','0',1563518615469,1563518615469,0.8042898345992815,'1','1','','https://img.hacpai.com/bing/20180115.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100',0),('1565165800252','x86使用ansible批量安装node_exporter','X86主机使用ansible批量安装node_exporter，并且使用prometheus进行监控','X86主机使用ansible批量安装node_exporter，并且使用prometheus进行监控','x86,ansible,node_exporter','1562037727771',0,82,'## node_exporter.service\n```\n[Unit]\nDescription=Node Exporter\n[Service]\nUser=root\nExecStart=/home/deployer/node_exporter-0.17.0.linux-amd64/node_exporter\n[Install]\nWantedBy=default.target\n```\n\n## node_exporter.sh\n```\n#!/bin/sh\n#chkconfig: 2345 80 90\n#description:node_exporter.sh\nRECDIR=$PWD\n#start node_exporter service\n/home/deployer/node_exporter-0.17.0.linux-amd64/node_exporter &\n```\n\n\n# 安装\n## ansible批量安装\nansible的组在此处定义：\n/etc/ansible/hosts\n账号密码可联系杨阳测试正确的密码。\n阿里天宫的机器使用prom账号安装的，其他的是使用deployer账号安装\n```\n-bash-4.2$ vi /etc/ansible/hosts \n10.125.128.123  ansible_ssh_user=deployer ansible_ssh_pass=XXX@2018 ansible_sudo_pass=XXX@2018\n10.125.128.124  ansible_ssh_user=deployer ansible_ssh_pass=XXX@2018 ansible_sudo_pass=XXX@2018\n```\n### centos6\n```\n#0 查看操作系统版本\nansible ipmi_xkf -m shell -a \"cat /etc/redhat-release\" --sudo\n#1 拷贝文件\nansible ipmi_xkf -m copy -a \"src=/home/deployer/node_exporter-0.17.0.linux-amd64.tar.gz dest=/home/deployer\"\n#2 解压文件\nansible ipmi_xkf -m shell -a \"tar xvzf /home/deployer/node_exporter-0.17.0.linux-amd64.tar.gz\" --sudo\n\n[centos6设置开机启动]\n#3 拷贝开机启动文件\nansible ipmi_xkf -m copy -a \"src=/home/deployer/node_exporter.sh dest=/home/deployer\"\n#3.1 拷贝开机启动文件到启动目录\nansible ipmi_xkf -m shell -a \"cp /home/deployer/node_exporter.sh  /etc/rc.d/init.d/\" --sudo\n#4 设置开机启动\nansible ipmi_xkf -m shell -a \"chkconfig --add node_exporter.sh \" --sudo\nansible ipmi_xkf -m shell -a \"chkconfig node_exporter.sh on\" --sudo\n\n[centos6]\n#5 启动文件\nansible ipmi_xkf -m shell -a \"service node_exporter start\" --sudo\n# ansible ipmi_xkf -m shell -a \"systemctl stop node_exporter\" --sudo\n#6 查看启动状态\nansible ipmi_xkf -m shell -a \"service node_exporter status\" --sudo\n\n#7 启动防火墙 【(尽量保留原装，不运行此命令，kennel影响业务)】\n# ansible ipmi_xkf -m shell -a \"systemctl start firewalld\" --sudo\n#7.1 防火墙打开9100端口\nansible ipmi_xkf -m shell -a \"firewall-cmd --zone=public --add-port=9100/tcp --permanent\" --sudo\n#7.2 重载规则\nansible ipmi_xkf -m shell -a \"firewall-cmd --reload\" --sudo\n\n#8 设置selinux\nansible ipmi_xkf -m shell -a \"setenforce 0\" --sudo\nansible ipmi_xkf -m shell -a \"sed -i \'s/SELINUX=enforcing/SELINUX=disabled/g\' /etc/selinux/config\" --sud\n```\n\n### centos7\n```\n#0 查看操作系统版本\nansible ipmi_xkf -m shell -a \"cat /etc/redhat-release\" --sudo\n#1 拷贝文件\nansible ipmi_xkf -m copy -a \"src=/home/deployer/node_exporter-0.17.0.linux-amd64.tar.gz dest=/home/deployer\"\n#2 解压文件\nansible ipmi_xkf -m shell -a \"tar xvzf /home/deployer/node_exporter-0.17.0.linux-amd64.tar.gz\" --sudo\n\n[centos7设置开机启动]\n#3 拷贝开机启动文件\nansible ipmi_xkf -m copy -a \"src=/home/deployer/node_exporter.service dest=/home/deployer\"\n#3.1 拷贝开机启动文件到启动目录\nansible ipmi_xkf -m shell -a \"cp /home/deployer/node_exporter.service /lib/systemd/system/\" --sudo\n#4 设置开机启动\nansible ipmi_xkf -m shell -a \"systemctl enable node_exporter\" --sudo\n\n[centos7]\n#5 启动文件\nansible ipmi_xkf -m shell -a \"systemctl start node_exporter\" --sudo\n# ansible ipmi_xkf -m shell -a \"systemctl stop node_exporter\" --sudo\n#6 查看启动状态\nansible ipmi_xkf -m shell -a \"systemctl status node_exporter\" --sudo\n\n#7 启动防火墙 【(尽量保留原装，不运行此命令，kennel影响业务)】\n# ansible ipmi_xkf -m shell -a \"systemctl start firewalld\" --sudo\n#7.1 防火墙打开9100端口\nansible ipmi_xkf -m shell -a \"firewall-cmd --zone=public --add-port=9100/tcp --permanent\" --sudo\n#7.2 重载规则\nansible ipmi_xkf -m shell -a \"firewall-cmd --reload\" --sudo\n\n#8 设置selinux\nansible ipmi_xkf -m shell -a \"setenforce 0\" --sudo\nansible ipmi_xkf -m shell -a \"sed -i \'s/SELINUX=enforcing/SELINUX=disabled/g\' /etc/selinux/config\" --sud\n```\n\n## 手动安装\n```\n#登陆10.172.49.1 跳板机  IP替换为需要安装的IP即可\nscp node_exporter-0.17.0.linux-amd64.tar.gz deployer@10.172.48.4:/home/deployer/\nscp node_exporter.service deployer@10.172.48.4:/home/deployer/\n\n#安装\nsudo tar xvzf node_exporter-0.17.0.linux-amd64.tar.gz\nsudo cp /home/deployer/node_exporter.service /lib/systemd/system/\nsudo systemctl enable node_exporter\nsudo systemctl start node_exporter\nsudo systemctl status node_exporter\nsudo firewall-cmd --zone=public --add-port=9100/tcp --permanent\nsudo firewall-cmd --reload\nsudo setenforce 0\nsudo sed -i \"s/SELINUX=enforcing/SELINUX=disabled/g\" /etc/selinux/config\n```\n\n## 结果测试\n### prometheus 10.172.49.1\n[http://10.172.49.1:9090/targets](http://10.172.49.1:9090/targets)\n![图片](https://uploader.shimo.im/f/0k0hK9EMOZMBOCS8.png!thumbnail)\n打开CBSS2和XKF，网页上搜索IP。如果显示UP代表OK。\n### prometheus 10.172.49.24\n[http://10.172.49.24:9090/targets](http://10.172.49.24:9090/targets)\n![图片](https://uploader.shimo.im/f/YKGZmAYhQdcvjuIO.png!thumbnail)\n\n## FAQ：\n### 1 ssh链接不上\n只需要给firewalld添加该tcp的端口规则，则可以正常访问了。\n//允许某端口放行\n# firewall-cmd --permanent --add-port=3389/tcp\n\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190807161513.png)\n1 启动防火墙\n2 添加tcp端口，重载防火墙规则\n3 关闭防火墙\n即可\n不用关闭iptables，也不用启动防火墙。保持原有的状态。\n\n## 回退操作\n```\n# ansible ipmi_rongzai_yanshou -m shell -a \"rm -rf /home/deployer/node_exporter-0.15.2.linux-amd64.tar.gz\" --sudo\n\n# ansible ipmi_rongzai_yanshou -m shell -a \"rm -rf /home/deployer/node_exporter.service\" --sudo\n\n# ansible ipmi_rongzai_yanshou -m shell -a \"rm -rf /lib/systemd/system/node_exporter.service\" --sudo\n\n# ansible ipmi_rongzai_yanshou -m shell -a \"echo \'/bin/systemctl start node_exporter\' >> /etc/rc.local\" --sudo-sudo\n\n# ansible ipmi_rongzai_yanshou -m shell -a \"systemctl disable node_exporter\" --sudo\n\n# ansible ipmi_rongzai_yanshou -m shell -a \"systemctl stop node_exporter\" --sudo\n```\n\n','/articles/2019/08/07/1565165800252.html','0',1565165800460,1565165899108,0.06791909180672573,'1','1','','https://uploader.shimo.im/f/0k0hK9EMOZMBOCS8.png!thumbnail',0),('1565168296048','手动安装IPMI相关并使用prometheus监控，批量ansible安装ipmi','','RPM安装FreeIPMI（Prometheus的IPMI-Exporter需要） rpm安装（根据系统不同，找不同的包） https://centos.pkgs.org/7/centos-x86_64/freeipmi-1.5.7-2.el7.x86_64.rpm.html  RPM包说明  rpm -ivh freeipmi-1.5.7-2.el7.x86_64.rpm   find / -name ipmiconsole find / -name bmc-info find / -name ipmi-dcmi  查看对应的impiconsole，bmc-info和ipmi-dcmi全部安装完成  安装IPMI Tool（测试成功的是Dell机器） 设置本地源 并安装OpenIPMI-tools 需要根据不同系统设置不同的数据。 vim /etc/yum.repos.d/local.repo [local] NAME=sjw baseurl=http://10.172.49.1/iso gpgcheck=0 enable=1 yum clean all yum repolist y....','freeipmi,ipmitool,prometheus,ansible','1562037727771',0,112,'# RPM安装FreeIPMI（Prometheus的IPMI-Exporter需要）\nrpm安装（根据系统不同，找不同的包）\n[https://centos.pkgs.org/7/centos-x86_64/freeipmi-1.5.7-2.el7.x86_64.rpm.html](https://centos.pkgs.org/7/centos-x86_64/freeipmi-1.5.7-2.el7.x86_64.rpm.html)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190807163207.png)\n[RPM包说明](http://wiki.jikexueyuan.com/project/linux/rpm.html)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190807163906.png)\n```\nrpm -ivh freeipmi-1.5.7-2.el7.x86_64.rpm\n```\n![图片](https://uploader.shimo.im/f/8WnUDlLtrr42nYhj.png!thumbnail)\n```\nfind / -name ipmiconsole\nfind / -name bmc-info\nfind / -name ipmi-dcmi\n```\n查看对应的impiconsole，bmc-info和ipmi-dcmi全部安装完成\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190807163928.png)\n# 安装IPMI Tool（测试成功的是Dell机器）\n## 设置本地源   并安装OpenIPMI-tools \n需要根据不同系统设置不同的数据。\n```\nvim /etc/yum.repos.d/local.repo\n\n[local]\nNAME=sjw\nbaseurl=http://10.172.49.1/iso\ngpgcheck=0\nenable=1\n\nyum clean all \nyum repolist\n\nyum install -y OpenIPMI-tools\n```\n需要到OpenIPMI-tools的包并安装\n# 设置IPMI 账号\n## 查看IPMI用户列表\n```\nipmitool user list 1\n```\n>ID  Name	     Callin  Link Auth	IPMI Msg   Channel Priv Limit\n>2   root             true    true       true       ADMINISTRATOR\n>3   admin            true    true       true       ADMINISTRATOR\n>5   yunwei           true    true       true       ADMINISTRATOR\n>......\n## 创建用户（修改ID=7为prom账号）\n如果没有prom用户（默认prom账号是7，如果不是请联系并告知）\n```\nipmitool user set name 7 prom\nipmitool user set password 7 Linux@web7\n```\n>Password for user 2: Linux@web7  #密码默认是这个，待后面测试不通过联系手动修改\n>Password for user 2: \n>Set User Password command successful (user 2)\n\n```\nipmitool user enable 7   #新用户需要设置为enable。已有用户无需设置\n```\n## 设置用户权限\n设置用户权限（如果权限和绿色部分一直，则无需跑下面的命令）\n	channel 为1（默认为1），user ID为7，privilege为4\n	privilege的值定义如下；	1 callback  2 user  3 operator 4 administrator 5 OEM\n```\nipmitool channel setaccess 1 7 callin=on ipmi=on link=on privilege=4\n```\n## 打开通道\n仅打开802.3 LAN通道访问权限即可（1就是上方的channel id）\n```\nipmitool lan set 1 access on\n\n# 查看channel信息\nipmitool lan print 1\n```\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190807165215.png)\n## 结果测试\n### 网页测试（修改为对应的带外IP即可）（网站测试的密码Linux@web7）\n[http://10.172.49.32:9290/ipmi?target=10.4.118.43](http://10.172.49.32:9290/ipmi?target=10.4.118.43)\n### 命令行测试：\n```\nssh 10.172.49.32  #  IPMI-Exporter的安装服务器\n#带外地址\nsudo ipmitool -I lanplus -H 10.4.119.145 -p 623 -U prom -P Linux@web7 sdr list\n```\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190807165235.png)\n```\nsudo ipmi-sensors -h 10.4.119.145 -u prom -p Linux@web7 -l USER -D lan_2_0\n```\n\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190807165254.png)\n# Ansible批量操作\n```\n#1 设置Ansible的账号密码等信息。以IPMI开头\nvi /etc/ansible/hosts\n#2 查看操作系统信息\nansible ipmi_dcos -m shell -a \"cat /etc/redhat-release\" --sudo\n#3 【centos7】拷贝freeipmi文件\nansible ipmi_dcos -m copy -a \"src=/home/deployer/freeipmi-1.5.7-2.el7.x86_64.rpm dest=/home/deployer\"\n\n#4 安装FreeIPMI\nansible ipmi_dcos -m shell -a \"rpm -ivh /home/deployer/freeipmi-1.5.7-2.el7.x86_64.rpm\" --sudo\n#5 安装IPMI-Tools\nansible ipmi_dcos -m shell -a \"yum install -y OpenIPMI-tools\" --sudo\n#6 查看IPMI用户\nansible ipmi_dcos -m shell -a \"ipmitool user list 1\" --sudo\n#7 设置用户名称\nansible ipmi_dcos -m shell -a \"ipmitool user set name 7 prom\" --sudo\n#8 设置用户密码\nansible ipmi_dcos -m shell -a \"ipmitool user set password 7 Linux@web7\" --sudo\n#9 启用用户\nansible ipmi_dcos -m shell -a \"ipmitool user enable 7\" --sudo\n#10 设置用户access权限\nansible ipmi_dcos -m shell -a \"ipmitool channel setaccess 1 7 callin=on ipmi=on link=on privilege=4\" --sudo\n#11 通道打开\nansible ipmi_dcos -m shell -a \"ipmitool lan set 1 access on\" --sudo\n\n```\n# FAQ\n## Invalid data field in request\n[root@07l04b003 deployer]# ipmitool user list\nGet User Access command failed (channel 14, user 1): Invalid data field in request\n参考:[https://github.com/uebayasi/openbsd-ipmi/issues/10](https://github.com/uebayasi/openbsd-ipmi/issues/10)\n\n解决：[http://www.voidcn.com/article/p-nitsjhqt-bde.html](http://www.voidcn.com/article/p-nitsjhqt-bde.html)\n[https://www.robustperception.io/dealing-with-too-many-open-files](https://www.robustperception.io/dealing-with-too-many-open-files)\n```\nvi /etc/security/limits.conf 最后一行增加\n* soft nofile 65535\n* hard nofile 65535\n注销一下生效\n\nulimit -n 102400\nulimit -a\n```\n\n\n','/articles/2019/08/07/1565168296048.html','0',1565168296204,1565168296204,0.9160775157878728,'1','1','','https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190807163207.png',0),('1566524440966','CMDB-Prometheus-Grafana监控展示IPMI信息','通过CMDB将资产安装IDC，机房，区域，机柜列，机柜等属性进行监控\n各机器安装ipmi-tool，通过prometheus的ipmi-exporter监控ipmi\n最后grafana联合CMDB进行多维度统计展示','通过CMDB将资产安装IDC，机房，区域，机柜列，机柜等属性进行监控 各机器安装ipmi-tool，通过prometheus的ipmi-exporter监控ipmi 最后grafana联合CMDB进行多维度统计展示','grafana,ipmi,cmdb','1562037727771',0,47,'# 一 安装IPMI-Tool\n## 1.1 手动安装\n参考：[手动安装](http://jiashu.club/articles/2019/08/07/1565168296048.html)\n## 1.2 ansible批量安装\n```\n#1 设置Ansible的账号密码等信息。以IPMI开头\r\n\nvi /etc/ansible/hosts\r\n#2 查看操作系统信息\r\nansible ipmi_dcos -m shell -a \"cat /etc/redhat-release\" --sudo\r\n#3 【centos7】拷贝freeipmi文件\r\nansible ipmi_dcos -m copy -a \"src=/home/deployer/freeipmi-1.5.7-2.el7.x86_64.rpm dest=/home/deployer\"\r\n[centos6]\r\nansible ipmi_dcos -m copy -a \"src=/home/deployer/freeipmi-1.2.1-10.el6.x86_64.rpm dest=/home/deployer\"\r\n\r\n#4 安装FreeIPMI\r\nansible ipmi_dcos -m shell -a \"rpm -ivh /home/deployer/freeipmi-1.5.7-2.el7.x86_64.rpm\" --sudo\r\nansible ipmi_dcos -m shell -a \"rpm -ivh /home/deployer/freeipmi-1.2.1-10.el6.x86_64.rpm\" --sudo\r\n\r\n\r\n#5 安装IPMI-Tools\r\n#YUM安装\r\nansible ipmi_dcos -m shell -a \"yum install -y OpenIPMI-tools\" --sudo\r\n#RPM安装\r\n[centos7]\r\nansible ipmi_dcos -m copy -a \"src=/home/deployer/ipmitool-1.8.18-7.el7.x86_64.rpm dest=/home/deployer\"\r\n[centos6]\r\nansible ipmi_dcos -m copy -a \"src=/home/deployer/ipmitool-1.8.15-2.el6.x86_64.rpm dest=/home/deployer\"\r\n\r\nansible ipmi_dcos -m shell -a \"rpm -ivh /home/deployer/ipmitool-1.8.18-7.el7.x86_64.rpm\" --sudo\r\nansible ipmi_dcos -m shell -a \"rpm -ivh /home/deployer/ipmitool-1.8.15-2.el6.x86_64.rpm\" --sud\r\n\r\n#6 查看IPMI用户\r\nansible ipmi_dcos -m shell -a \"ipmitool user list 1\" --sudo\r\n#7 设置用户名称\r\nansible ipmi_dcos -m shell -a \"ipmitool user set name 7 prom\" --sudo\r\n#8 设置用户密码\r\nansible ipmi_dcos -m shell -a \"ipmitool user set password 7 Linux@web7\" --sudo\r\nmEke5lpiBDTcm?\r\n\r\n#9 启用用户\r\nansible ipmi_dcos -m shell -a \"ipmitool user enable 7\" --sudo\r\n#10 设置用户access权限\r\nansible ipmi_dcos -m shell -a \"ipmitool channel setaccess 1 7 callin=on ipmi=on link=on privilege=4\" --sudo\r\n#11 通道打开\r\nansible ipmi_dcos -m shell -a \"ipmitool lan set 1 access on\" --sudo\n```\n\n# 二 prometheus安装ipmi-exporter并监控\n## 2.1 安装go\n```\nhttps://golang.org/doc/install?download=go1.11.4.linux-amd64.tar.gz\r\n\n\r\ntar zxvf go1.11.4.linux-amd64.tar.gz -C /usr/local\r\n新建go项目根目录\r\n\r\nmkdir -p /var/opt/wwwroot/goblog\r\n配置环境变量\r\n\r\nvim /etc/profile\r\nexport GOROOT=/usr/local/go\r\nexport GOBIN=$GOROOT/bin\r\nexport PATH=$PATH:$GOBIN\r\nexport GOPATH=/var/opt/wwwroot/goblin\r\n\r\nsource /etc/profile\r\n安装结束，验证\r\n\r\ngo version\n```\n## 2.2 安装ipmi-exporter\n[https://github.com/soundcloud/ipmi_exporter](https://github.com/soundcloud/ipmi_exporter)\n```\nipmi_exporter-master.zip\n\nunzip ipmi_exporter-master.zip\n\nmkdir -p /var/opt/wwwroot/goblin/src/github.com/soundcloud/ipmi_exporter\n\n\ncp -r ipmi_exporter-master/* /var/opt/wwwroot/goblin/src/github.com/soundcloud/ipmi_exporter\n\n\ncd /var/opt/wwwroot/goblin/src/github.com/soundcloud/ipmi_exporter\n\n\ngo build\n\n\n./ipmi_exporter\n\n\n/var/opt/wwwroot/goblin/src/github.com/soundcloud/ipmi_exporter/ipmi_exporter --web.listen-address=\":9290\" --config.file=/var/opt/wwwroot/goblin/src/github.com/soundcloud/ipmi_exporter/ipmi.yml &\n\n\n/var/opt/wwwroot/goblin/src/github.com/soundcloud/ipmi_exporter/ipmi_exporter --config.file=/var/opt/wwwroot/goblin/src/github.com/soundcloud/ipmi_exporter/ipmi.\n```\n[http://10.172.49.32:9290/](http://10.172.49.32:9290/)\n\n配置ipmi.yml\n/var/opt/wwwroot/goblin/src/github.com/soundcloud/ipmi_exporter/ipmi.yml\n```\ncredentials:\r\n\n        default:\r\n\n                user: \"root\"\r\n                pass: \"password\"\r\n        10.8.0.2:\r\n                user: \"host_specific_user\"\r\n                pass: \"another_pw\"\n```\n可配置非root账号，参考ipmi-tool安装时设置的账号\n\n# 三 资产管理-机房机柜等管理\n以下管理需求参考opendcim\n## 3.1 IDC列表\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823091037.png)\n## 3.2 IDC详情\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823090916.png)\n## 3.3 机房列表\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823091151.png)\n## 3.4 机房详情\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823091319.png)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823091320.png)\n## 3.5 区域列表\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823091447.png)\n## 3.6 区域详情\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823091542.png)\n## 3.7 机柜列 列表\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823091640.png)\n## 3.8 机柜 列表\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823091843.png)\n## 3.9 机柜详情\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823092036.png)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823092035.png)\n\n# 四 Grafana根据机房机柜等纬度统计功耗等情况\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823092146.png)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823093252.png)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823093312.png)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823093340.png)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823093351.png)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823093407.png)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823093419.png)','/articles/2019/08/23/1566524440966.html','0',1566524441146,1566524824130,0.03854631559172339,'1','1','','https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823091037.png',0),('1566525314983','使用smartd监控硬盘信息','使用smartd监控硬盘信息，自定义脚本检查硬盘状态','使用smartd监控硬盘信息，自定义脚本检查硬盘状态','smartd,disk','1562037727771',0,14,'# 安装\n\n## 源码安装：\n\n[https://www.smartmontools.org/wiki/Download#Installfromthesourcetarball](https://www.smartmontools.org/wiki/Download#Installfromthesourcetarball)\n\n## YUM安装：\n\n重点参考：[https://linux.cn/article-4682-1.html](https://linux.cn/article-4682-1.html)\n\n[https://www.milesweb.com/forums/how-to\'s/how-to-install-smartctl-utility-on-centos/](https://www.milesweb.com/forums/how-to\'s/how-to-install-smartctl-utility-on-centos/)\n\n**Steps to install of Smartcl in CentOS:**\n1 Login to your server via SSH as a root user. \n2 Use yum command to install Smartctl. \n ```\nyum install smartmontools \n```\n3 Now start the service of Smartctl. \n```\nservice smartd start \nchkconfig smartd on\n```\n4 To enable Smart Capability for the disk run below command. \n```\nsmartctl -s on /dev/sdb\n```\n5 To disable Smart Capability for the disk run below command. \n```\nsmartctl -s off  /dev/sdb\n```\n6 To display details Smart info for the disk run below command. \n```\nsmartctl -a /dev/sdb              // For IDE drive\nsmartctl -a -d ata /dev/sdb       // For SATA drive\n```\n\n```\nsmartctl -H  /dev/sdb\nsmartctl  --scan\nsmartctl -d scsi -i /dev/sda\nman 8 smartctl\nsmartctl --test=long /dev/sdb\nsmartctl --test=short /dev/sdb\nsmartctl -t long /dev/sda\nsmartctl -t short /dev/sda\nsmartctl -s on -o on -S on /dev/sda\nsmartctl -l selftest /dev/sda\n```\n\nThat\'s it, Enjoy !!\n\n \n\n## smartctl command usage\n\nsmartctl和nagio：[https://blog.51cto.com/bbotte/1603985](https://blog.51cto.com/bbotte/1603985)\n\n包含配置：[https://blog.shadypixel.com/monitoring-hard-drive-health-on-linux-with-smartmontools/](https://blog.shadypixel.com/monitoring-hard-drive-health-on-linux-with-smartmontools/)\n\n测试命令：[https://www.linuxjournal.com/article/6983](https://www.linuxjournal.com/article/6983)\n\n硬盘SMART检测参数详解[转]：[https://www.cnblogs.com/xqzt/p/5512075.html](https://www.cnblogs.com/xqzt/p/5512075.html)\n\nC2（194）温度 Temperature \n\n存储健康分级机制：[https://segmentfault.com/a/1190000002680853#articleHeader2](https://segmentfault.com/a/1190000002680853#articleHeader2)\n\n## config smartd\n\n配置参考：\n\n[https://github.com/clear-datacenter/cloud-atlas/blob/master/storage/das/smart.md](https://github.com/clear-datacenter/cloud-atlas/blob/master/storage/das/smart.md)\n\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823095149.png)\n```\nDEVICESCAN -a -o on -S on -n standby,q -s (S/../.././02|L/../../6/03) -W 4,35,40 -m <username or email>\n```\n\n  \n```\nvim /etc/smartmontools/smartd.conf\n#原有配置：\nDEVICESCAN -H -m root -M exec /usr/libexec/smartmontools/smartdnotify -n standby,10,q\n\n\n修改为：\nDEVICESCAN -a -o on -S on -n standby,q -s (S/../.././02|L/../../6/03) -W 4,35,40 -M exec /usr/libexec/smartmontools/smartdnotify -m root\n```\n另一种可用配置\n```\nDEVICESCAN -d removable -n standby -m root -M exec /usr/share/smartmontools/smartd-runner\n```\n \n\n[https://blog.shadypixel.com/monitoring-hard-drive-health-on-linux-with-smartmontools/](https://blog.shadypixel.com/monitoring-hard-drive-health-on-linux-with-smartmontools/)\n\n/dev/sda -a -d sat -o on -S on -s (S/../.././02|L/../../6/03) -m root -M exec /usr/share/smartmontools/smartd-runner\n\n \n\n配置表示smartd以静默状态工作，当SMART中报告PASSED的时候不理睬一旦出现Failure，立刻用邮件通知用户指定的邮箱\n\nvi /etc/smartd.conf\n\n/dev/sdb -H -m neo@domain.com\n\n修改配置后重启服务：\n\n/etc/init.d/smartd start\n\n \n\n我刚刚配置了Debian服务器如下\n\napt-get install smartmontools\n\nvi / etc / default / smartmontools – 这里取消注释这2行\n\n#uncomment在系统启动时启动smartd\n\nstart_smartd = YES\n\n#uncomment在启动时将其他选项传递给smartd\n\nsmartd_opts = “ – 间隔= 1800”然后我编辑了/etc/smartd.conf并仅取消注释了这一行\n\nDEVICESCAN -S on -o -a -m myemail@mydomain.com -s(S /../.././ 02 | L /../../ 6/03)\n\n我想知道这是否足以让系统在出现问题时向我发送警报消息和/或是否有办法模拟问题并查看smartd是否通过电子邮件向我发送警告.\n\n最佳答案\n\n您可以通过在该关键字之后立即将-M test添加到以DEVICESCAN开头的行来测试配置.下次重启smartd时,会发出电子邮件通知.\n\n \n```\n/usr/libexec/smartmontools/smartdnotify\n# 一\n#! /bin/sh\n\n\n# Send mail\necho \"$SMARTD_MESSAGE\" | mail -s \"$SMARTD_FAILTYPE\" \"$SMARTD_ADDRESS\"\n\n\n# Notify desktop user\nMESSAGE=\"WARNING: Your hard drive is failing\"\n\n\n# direct write to terminals, do not use \'wall\', because we don\'t want its ugly header\nfor t in $(who | awk \'{ print $2; }\' | grep -e \'^tty\' -e \'^pts/\')\ndo\n  echo \"$MESSAGE\n$SMARTD_MESSAGE\" >/dev/$t 2>/dev/null ||:\ndone\n```\n\n# 二\n```\n#! /bin/sh\n\n\n\n\n# Send mail\necho \"$SMARTD_MESSAGE\" | mail -s \"$SMARTD_FAILTYPE\" \"$SMARTD_ADDRESS\"\n\n\n\n\n# Notify desktop user\nMESSAGE=\"SMART Disk monitor:\"\ncase \"$SMARTD_FAILTYPE\" in\n    \"EmailTest\"|\"Health\"|\"Temperature\"|\"Usage\")\n        ;;\n    *)\n#       \"CurrentPendingSector\",       // 10\n#       \"OfflineUncorrectableSector\", // 11\n#       \"FailedReadSmartErrorLog\",    // 7\n#       \"ErrorCount\",                 // 4\n#       \"FailedReadSmartData\",        // 6\n#       \"FailedHealthCheck\",          // 5\n#       \"FailedOpenDevice\",           // 9\n#       \"SelfTest\",                   // 3\n#       \"FailedReadSmartSelfTestLog\", // 8\n      exit 0\nesac\n\n\n\n\n# direct write to terminals, do not use \'wall\', because we don\'t want its ugly header\nfor t in $(who | awk \'{ print $2; }\' | grep -e \'^tty\' -e \'^pts/\')\ndo\n  echo \"$MESSAGE\n$SMARTD_MESSAGE\" >/dev/$t 2>/dev/null\n\n## \n\nrestart smartd\n\n/etc/init.d/smartmontools restart\n\nservice smartd restart\n```\n \n\n## 采集硬盘信息脚本\n\n获取IP\n\nip addr | grep inet | egrep -nE \'bond0.*\'  | awk \'{print $3}\' | tr -d \"addr:\" | head -n 1 | cut -d / -f1\n\n \n```\n#!/bin/bash\nsmartctl --scan |sed s/[[:space:]]//g > smartmontools.out\n\n\nval=\"/dev/bus\"\n\n\nnetcard=$(ifconfig |grep ^bond[[:digit:]]*.[[:digit:]][[:digit:]][[:digit:]][[:digit:]] |sed \'s/[ ][ ]*/,/g\' |cut -d \',\' -f 1 |sed \'s/://g\')\n\n\nif [ \"${netcard}\" == \"\" ];then\nnetcard=$(ifconfig |grep ^bond0.* |sed \'s/[ ][ ]*/,/g\' |cut -d \',\' -f 1 |sed \'s/://g\')\nfi\n\n\nif [ \"${netcard}\" == \"\" ];then\nnetcard=$(ifconfig |grep ^bond_p.* |sed \'s/[ ][ ]*/,/g\' |cut -d \',\' -f 1 |sed \'s/://g\')\nfi\n\n\nip=$(ifconfig ${netcard}|grep -w \"inet\" |sed \'s/[ ][ ]*/,/g\' |cut -d \',\' -f 3 )\n\n\nfor line in $(cat smartmontools.out);do\nif [ \"${line:0:8}\" == \"${val}\" ];then\ncontinue\nfi\n\n\ncmd=\"smartctl -H \"${line:0:8}\" -d sat+megaraid,0\"\n$cmd |grep \"SMART overall-health self-assessment test result:\"* > smartout.out\nout=$(cat smartout.out)\n\n\nif [ \"${out}\" == \"\" ];then\ncmd=\"smartctl -H \"${line:0:8}\" -d megaraid,0\"\n$cmd |grep \"SMART Health Status:\"* > smartout.out\nfi\n\n\necho ${ip}\":\"${line:0:8}\":\"$(cat smartout.out)\ndone\n\n\nrm -f smartmontools.out\nrm -f sm\n```','/articles/2019/08/23/1566525314983.html','0',1566525315136,1566525662704,0.5610515434519127,'1','1','','https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190823095149.png',0),('1566868475767','nagios安装监控bmc','使用nagios监控bmc','使用nagios监控bmc','nagios,bmc','1562037727771',0,34,'# nagios安装测试\n\n## [](#安装前简介)安装前简介\n\n现在需要将之前脚本过滤出的bmc不通的ip监控起来，方便自己查看进度，所以需要实时监控主机的bmcip状态，尽量不更改被监控主机的情况下，选择使用了nagios（基本服务探测不需要安装agent）\n\n---\n\n### [](#安装环境debian9云开发机8g内存)安装环境：debian9（云开发机）8G内存\n\n---\n\n## [](#nagios是什么)nagios是什么\n\n* 关于nagios：[https://www.ibm.com/developerworks/cn/linux/1309_luojun_nagios/index.html](https://www.ibm.com/developerworks/cn/linux/1309_luojun_nagios/index.html)\n* nagios结构说明： Nagios 结构上来说， 可分为核心和插件两个部分。Nagios 的核心部分只提供了很少的监控功能，因此要搭建一个完善的 IT 监控管理系统，用户还需要在 Nagios 服务器 安装相应的插件，插件可以从 Nagios 官方网站下载 [http://www.nagios.org/，也可以根据实际要求自己编写所需的插件。](http://www.nagios.org/%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E5%AE%9E%E9%99%85%E8%A6%81%E6%B1%82%E8%87%AA%E5%B7%B1%E7%BC%96%E5%86%99%E6%89%80%E9%9C%80%E7%9A%84%E6%8F%92%E4%BB%B6%E3%80%82)\n* nagios功能：\n\n1. 监控网络服务（SMTP、POP3、HTTP、FTP、PING 等）；\n2. 监控本机及远程主机资源（CPU 负荷、磁盘利用率、进程 等）；\n3. 允许用户编写自己的插件来监控特定的服务，方便地扩展自己服务的检测方法，支持多种开发语言（Shell、Perl、Python、PHP 等）\n4. 具备定义网络分层结构的能力，用\"parent\"主机定义来表达网络主机间的关系，这种关系可被用来发现和明晰主机宕机或不可达状态；\n5. 当服务或主机问题产生与解决时将告警发送给联系人（通过 EMail、短信、用户定义方式）；\n6. 可以支持并实现对主机的冗余监控；\n7. 可用 WEB 界面用于查看当前的网络状态、通知和故障历史、日志文件等；\n\n## [](#安装nagios)安装nagios\n\n这里我的系统是debian，如果是别的系统，请参考官网，上面很详细：\n\n1. [https://support.nagios.com/kb/article/nagios-core-installing-nagios-core-from-source-96.html#Debian](https://support.nagios.com/kb/article/nagios-core-installing-nagios-core-from-source-96.html#Debian)\n2. [http://nagios-cn.sourceforge.net/nagios-cn/beginning.html#quickstart](http://nagios-cn.sourceforge.net/nagios-cn/beginning.html#quickstart)\n\n本次测试使用nagios版本为4.4.5 以下操作都使用root来执行：\n\n* 安装基础包\n\n```\n- 解压编译nagios\n> tar xzf /data00/nagios/nagios-4.4.5/\ncd /data00/nagios/nagios-4.4.5/ \n./configure --with-httpd-conf=/etc/apache2/sites-enabled \nmake all\n- 创建用户和组\nmake install-groups-users \nusermod -a -G nagios www-data\n- 安装二进制文件\nmake install\nmake install-daemoninit\nmake install-commandmode\nmake install-config\nmake install-webconf \na2enmod rewrite\na2enmod cgi\n\n#为nagios页面设置访问密码\nhtpasswd -c /usr/local/nagios/etc/htpasswd.users nagiosadmin\n\n- 运行并访问\nsystemctl restart apache2.service\nsystemctl start nagios.service\n \nhttp://10.224.17.213/nagios/\nnagiosadmin/1996120\n\n```\n\n* 安装插件，不然nagios core是无法正常使用的\n\n```\napt-get install -y autoconf gcc libc6 libmcrypt-dev make libssl-dev wget bc gawk dc build-essential snmp libnet-snmp-perl gettext\nwget --no-check-certificate -O nagios-plugins.tar.gz https://github.com/nagios-plugins/nagios-plugins/archive/release-2.2.1.tar.gz\ntar xzf nagios-plugins-2.2.1.tar.gz && cd nagios-plugins-2.2.1/\n./tools/setup \n./configure \nmake \nmake install\n\n```\n\n安装步骤比较简单，参照官网一步一步复制粘贴即可\n\n## [](#模版部分)模版部分\n\n这里大致说下这些参数和nagios文件结构\n\n```\n目录名称                          作用\nbin                         Nagios 可执行程序所在目录\netc                            Nagios 配置文件目录\nsbin                  Nagios cgi 文件所在目录， 也就是执行外部 命令所需要文件所在的目录\nshare                         Nagios 网页存放路径\nlibexec                      Nagios 外部插件存放目录\nvar                            Nagios 日志文件、Lock 等文件所在的目录\nvar/archives              Nagios 日志自动归档目录\nvar/rw                        用来存放外部命令文件的目录\n\n```\n\n配置文件说明\n\n```\ncgi.cfg	控制 CGI 访问的配置文件\nnagios.cfg	Nagios 主配置文件\nresource.cfg	变量定义文件，又称为资源文件，在此文件中定义变量，以便由其他配置文件引用，如$USER1$\nobjects	objects 是一个目录，在此目录下有很多配置文件模板，用于定义 Nagios 对象\nobjects/commands.cfg	命令定义配置文件，其中定义的命令可以被其他配置文件引用\nobjects/contacts.cfg	定义联系人和联系人组的配置文件\nobjects/localhost.cfg	定义监控本地主机的配置文件\nobjects/printer.cfg	定义监控打印机的一个配置文件模板，默认没有启用此文件\nobjects/switch.cfg	监控路由器的一个配置文件模板，默认没有启用此文件\nobjects/templates.cfg	定义主机和服务的一个模板配置文件，可以在其他配置文件中引用\nobjects/timeperiods.cfg	定义 Nagios 监控时间段的配置文件\nobjects/windows.cfg	监控 Windows 主机的一个配置文件模板，默认没有启用此文件\n\n\n```\n\n模版参数说明\n\n```\n define contact{  \n        name                            generic-contact        #联系人名称，  \n        service_notification_period     24x7                   #当服务出现异常时，发送通知的时间段，这个时间段“7x24\"在timeperiods.cfg文件中定义  \n        host_notification_period        24x7                   #当主机出现异常时，发送通知的时间段，这个时间段“7x24\"在timeperiods.cfg文件中定义  \n        service_notification_options    w,u,c,r         #这个定义的是“通知可以被发出的情况”。w即warn，表示警告状态，u即unknown，表示不明状态，c即criticle，表示紧急状态，r即recover，表示恢复状态。也就是在服务出现警告状态、未知状态、紧急状态和重新恢复状态时都发送通知给使用者。  \n        host_notification_options       d,u,r         #定义主机在什么状态下需要发送通知给使用者，d即down，表示宕机状态，u即unreachable，表示不可到达状态，r即recovery，表示重新恢复状态。  \n        service_notification_commands   notify-service-by-email  #服务故障时，发送通知的方式，可以是邮件和短信，这里发送的方式是邮件，其中“notify-service-by-email”在commands.cfg文件中定义。  \n        host_notification_commands      notify-host-by-email     #主机故障时，发送通知的方式，可以是邮件和短信，这里发送的方式是邮件，其中“notify-host-by-email”在commands.cfg文件中定义。  \n        register                        0  \n        }  \n define host{   \n        name                            generic-host    #主机名称，这里的主机名，并不是直接对应到真正机器的主机名，乃是对应到在主机配置文件里所设定的主机名。  \n        notifications_enabled           1              \n        event_handler_enabled           1               \n        flap_detection_enabled          1               \n        failure_prediction_enabled      1             \n        process_perf_data               1              \n        retain_status_information       1             \n        retain_nonstatus_information    1                \n        notification_period             24x7           #指定“发送通知”的时间段，也就是可以在什么时候发送通知给使用者。  \n        register                        0                \n        }  \n \ndefine host{  \n        name                            linux-server    #主机名称  \n        use                             generic-host    #use表示引用，也就是将主机generic-host的所有属性引用到linux-server中来，在nagios配置中，很多情况下会用到引用。  \n        check_period                    24x7            #这里的check_period告诉nagios检查主机的时间段  \n        check_interval                  5                #nagios对主机的检查时间间隔，这里是5分钟。  \n        retry_interval                  1               #重试检查时间间隔，单位是分钟。  \n        max_check_attempts              10               #nagios对主机的最大检查次数，也就是nagios在检查发现某主机异常时，并不马上判断为异常状况，而是多试几次，因为有可能只是一时网络太拥挤，或是一些其他原因，让主机受到了一点影响，这里的10就是最多试10次的意思。  \n        check_command                   check-host-alive  #指定检查主机状态的命令，其中“check-host-alive”在commands.cfg文件中定义。  \n        notification_period             workhours      #主机故障时，发送通知的时间范围，其中“workhours”在timeperiods.cfg中进行了定义，下面会陆续讲到。  \n                                                         \n        notification_interval           120            #在主机出现异常后，故障一直没有解决，nagios再次对使用者发出通知的时间。单位是分钟。如果你觉得，所有的事件只需要一次通知就够了，可以把这里的选项设为0  \n        notification_options            d,u,r          #定义主机在什么状态下可以发送通知给使用者，d即down，表示宕机状态，u即unreachable，表示不可到达状态，r即recovery，表示重新恢复状态。  \n        contact_groups                  admins         #指定联系人组，这个“admins”在contacts.cfg文件中定义。  \n        register                        0  \n        }  \n \ndefine service{  \n        name                            generic-service   #定义一个服务名称  \n        active_checks_enabled           1     \n        passive_checks_enabled          1      \n        parallelize_check                1      \n        obsess_over_service             1      \n        check_freshness                0  \n        notifications_enabled            1                 \n        event_handler_enabled           1                   \n        flap_detection_enabled           1                    \n        failure_prediction_enabled        1                   \n        process_perf_data               1                   \n        retain_status_information       1                     \n        retain_nonstatus_information    1                        \n        is_volatile                     0   \n        check_period                    24x7      #这里的check_period告诉nagios检查服务的时间段。              \n        max_check_attempts              3         #nagios对服务的最大检查次数。           \n        normal_check_interval           10       #此选项是用来设置服务检查时间间隔，也就是说，nagios这一次检查和下一次检查之间所隔的时间，这里是10分钟。   \n        retry_check_interval            2        #重试检查时间间隔，单位是分钟。            \n        contact_groups                  admins   #指定联系人组，同上。              \n        notification_options            w,u,c,r  #这个定义的是“通知可以被发出的情况”。w即warn，表示警告状态，u即unknown，表示不明状态，c即criticle，表示紧急状态，r即recover，表示恢复状态。也就是在服务出现警告状态、未知状态、紧急状态和重新恢复后都发送通知给使用者。  \n        notification_interval           60       #在服务出现异常后，故障一直没有解决，nagios再次对使用者发出通知的时间。单位是分钟。如果你认为，所有的事件只需要一次通知就够了，可以把这里的选项设为0。  \n        notification_period             24x7     #指定“发送通知”的时间段，也就是可以在什么时候发送通知给使用者。               \n         register                        0                       \n        }  \n\n```\n\n```\ncd /data00/usr/local/nagios/etc/objects #这里存放了配置文件\n\nvi templates.cfg #修改主模版\n找个空的地方添加不要破环原来的结构体\n    define host{\n            name                            linux_host  \n            notifications_enabled           1\n            event_handler_enabled           1\n            flap_detection_enabled          0\n            process_perf_data               1\n            retain_status_information       1\n            retain_nonstatus_information    1\n            notification_period             24x7\n            check_period                    24x7            ; By default, Linux hosts are checked round the clock\n            retry_interval                  1               ; Schedule host check retries at 1 minute intervals\n            check_interval			5\n    	max_check_attempts              3             ; Check each Linux host 10 times (max)\n            check_command                   check_http ; Default command to check Linux hosts\n            notification_interval           120             ; Resend notifications every 2 hours\n            notification_options            d,u,r           ; Only send notifications for specific host states\n            contact_groups                  admins\n            register                        0\n            }\n            \nvi commands.cfg  #修改命令模版\n找到check_http修改如下：\ndefine command {\n\n    command_name    check_http\n    command_line    $USER1$/check_http -S -I $HOSTADDRESS$ -t 1\n}\n\n最后修改nagios主配置文件\nvi /opt/usr/local/nagios/etc/nagio.cfg\n    #添加这个\n    cfg_file=/data00/usr/local/nagios/etc/objects/hosts.cfg\n\n```\n\n最后就需要生成我们的hosts模板文件了 这里贴下我的python代码，sysip调用接口到bmcip\n\n```\n# -*- coding: utf-8 -*-\nimport os\nimport requests\n\nhost = \"\"\"\ndefine host{\n        use                     linux_host\n        host_name               %s\n        address                 %s\n        }\n\"\"\"\nescalation = \"\"\"\ndefine hostescalation{\n        host_name %s\n        first_notification 3\n        last_notification 0\n        notification_interval 360\n        contact_groups system\n}\n\"\"\"\n\n# fwes = open(\"/data01/nagios-scripts/escalations.cfg\", \"w\")\ndef ip_to_bmcip(sysip):\n    \"\"\"通过sysip获取bmcip\"\"\"\n    headers = {\'User-Agent\': \'idata-bmc-script\'}\n    params = {\'inip\': sysip}\n    r = requests.get(\'http://10.3.40.15/idc/bmcip/\', headers=headers, params=params).json()\n    bmcip = r[\'bmcip\']\n    print(sysip)\n    return sysip, bmcip\n\nfw = open(\"hosts.cfg\", \"w\")\n\nwith open(\'ip\', \'r\') as fp:\n    iplist = fp.read().split()\n    for sysip in iplist:\n        res = ip_to_bmcip(sysip)\n        print(res[1])\n        if len(res[1]) == 0:\n            continue\n        if \"#\" in res[1]:\n            continue\n        if \"NULL\" in res[1]:\n            continue\n        sysip2 = sysip.split(\'.\')[1]\n        sysip3 = sysip.split(\'.\')[2]\n        sysip4 = sysip.split(\'.\')[3]\n        hostname = \'n%s-%03d-%03d.byted.org\' % (sysip2, int(sysip3), int(sysip4))\n        fw.write(host % (hostname, res[1]))\n        print(\"带外hosts已经完成\")\n\n```\n\n将生成的hosts.cfg放到objects目录下 这样就完成了，目前不考虑阈值告警推送等等情况\n\n```\n验证配置文件的正确性\n/data00/usr/local/nagios/bin/nagios -v /data00/usr/local/nagios/etc/nagios.cfg\n评估启动时间\n/data00/usr/local/nagios/bin/nagios -s /data00/usr/local/nagios/etc/nagios.cfg\n\n```\n\n## [](#性能调优)性能调优\n\n```\nexternal_command_buffer_slots\n    #nagios的命令都是通过这个接收的，处理不过来的命令都会在这排队，如果你管理的service较多，建议将这个值调大。\nuse_large_installation_tweaks=1\n    #http://nagios-cn.sourceforge.net/nagios-cn/profession.html#largeinstalltweaks这个设置缺省是关闭的，在监控的service较多的情况下，建议打开这个设置。\nmax_concurrent_checks=15\n#该选项可指定在任意给定时间里可被同时运行的服务检测命令的最大数量。如果指定这个值为1，则说明不允许任何并行服务检测，如果指定为0(默认值)则是对并行服务检测。你须按照可运行Nagios的机器上的机器资源情况修改这个值，因为它会直接影响系统最大负荷，它施加于系统(处理器利用率、内存使用率等)之上。更多的关于如何评估需要设置多少并行检测值的信息可以查阅这篇文档.如果有部分service的监控状态一直不更新，建议将这个配置适度调大。参考值15\ncheck_result_reaper_frequency=10\n#这个配置决定了处理检查结果的频率，如果这个值太大，会导致监控service的状态更新延时变大。\nmax_check_result_reaper_time=30\n#这个配置决定了每次处理检查结果最多可以花费的时间。这个值太大或太小都会导致监控service的状态更新延时变大。参考值5\nuse_retained_scheduling_info=0 \n#该选项决定Nagios在重启时是否要使用主机和服务的保持计划表信息(下次检测时间)。如果增加了很多数量(或很大百分比)的主机和服务，建议你在首次重启动Nagios时关闭选项，因为这个选项将会使初始检测误入歧途。其他情况下你可以要使能这个选项\n\n```\n\n修改后你可以评估一下启动时间看看，我的是这样\n\n```\nNagios Core 4.4.3\nCopyright (c) 2009-present Nagios Core Development Team and Community Contributors\nCopyright (c) 1999-2009 Ethan Galstad\nLast Modified: 2019-01-15\nLicense: GPL\n\nWebsite: https://www.nagios.org\nTiming information on object configuration processing is listed\nbelow.  You can use this information to see if precaching your\nobject configuration would be useful.\n\nObject Config Source: Config files (uncached)\n\nOBJECT CONFIG PROCESSING TIMES      (* = Potential for precache savings with -u option)\n----------------------------------\nRead:                 0.907458 sec\nResolve:              0.056827 sec  *\nRecomb Contactgroups: 0.016189 sec  *\nRecomb Hostgroups:    0.010557 sec  *\nDup Services:         0.000016 sec  *\nRecomb Servicegroups: 0.000000 sec  *\nDuplicate:            0.263904 sec  *\nInherit:              0.135125 sec  *\nRegister:             0.281152 sec\nFree:                 0.028468 sec\n                      ============\nTOTAL:                1.699696 sec  * = 0.120655 sec (7.10%) estimated savings\n\n\nTiming information on configuration verification is listed below.\n\nCONFIG VERIFICATION TIMES\n----------------------------------\nObject Relationships: 0.073221 sec\nCircular Paths:       0.015593 sec\nMisc:                 0.001492 sec\n                      ============\nTOTAL:                0.090306 sec\n\n\nRETENTION DATA TIMES\n----------------------------------\nRead and Process:     7.613392 sec\n                      ============\nTOTAL:                7.613392 sec\n\n\nEVENT SCHEDULING TIMES\n-------------------------------------\nGet service info:        0.000013 sec\nGet host info info:      0.539133 sec\nGet service params:      0.000004 sec\nSchedule service times:  0.000012 sec\nSchedule service events: 0.000006 sec\nGet host params:         0.000000 sec\nSchedule host times:     1.070535 sec\nSchedule host events:    0.189131 sec\n                         ============\nTOTAL:                   1.798834 sec\n\n\nProjected scheduling information for host and service checks\nis listed below.  This information assumes that you are going\nto start running Nagios with your current config files.\n\nHOST SCHEDULING INFORMATION\n---------------------------\nTotal hosts:                     167316\nTotal scheduled hosts:           167316\nHost inter-check delay method:   SMART\nAverage host check interval:     300.00 sec\nHost inter-check delay:          0.00 sec\nMax host check spread:           30 min\nFirst scheduled check:           Mon Aug 26 15:43:06 2019\nLast scheduled check:            Mon Aug 26 15:48:05 2019\n\n\nSERVICE SCHEDULING INFORMATION\n-------------------------------\nTotal services:                     1\nTotal scheduled services:           1\nService inter-check delay method:   SMART\nAverage service check interval:     60.00 sec\nInter-check delay:                  60.00 sec\nInterleave factor method:           SMART\nAverage services per host:          0.00\nService interleave factor:          1\nMax service check spread:           30 min\nFirst scheduled check:              Mon Aug 26 15:44:06 2019\nLast scheduled check:               Mon Aug 26 15:44:06 2019\n\n\nCHECK PROCESSING INFORMATION\n----------------------------\nAverage check execution time:    0.01s\nEstimated concurrent checks:     4 (0.08 per cpu core)\nMax concurrent service checks:   15\n\n\nPERFORMANCE SUGGESTIONS\n-----------------------\nI have no suggestions - things look okay.\n\n```\n\n## [](#nagiosgrafanainfluxdbnagfluxhistou部署)nagios+grafana+influxdb+nagflux+histou部署\n\n这里直接放出官方的链接，问题不大 [https://support.nagios.com/kb/article/nagios-core-performance-graphs-using-influxdb-nagflux-grafana-histou-802.html#Debian](https://support.nagios.com/kb/article/nagios-core-performance-graphs-using-influxdb-nagflux-grafana-histou-802.html#Debian) [https://assets.nagios.com/downloads/nagioscore/docs/nagioscore/3/en/macrolist.html#hoststate](https://assets.nagios.com/downloads/nagioscore/docs/nagioscore/3/en/macrolist.html#hoststate)','/articles/2019/08/27/1566868475767.html','0',1566868475921,1566868475921,0.07636191104456858,'1','1','','https://img.hacpai.com/bing/20180608.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100',0),('1568010345563','PMP报名准备及考试','PMP个人报名，准备及考试。两个月足够了。\n报名主要是35小时培训。\n19.12最后一次老大纲考试，20年更换新考试大纲\n','PMP个人报名，准备及考试。两个月足够了。 报名主要是35小时培训。 19.12最后一次老大纲考试，20年更换新考试大纲','PMP考试','1562037727771',0,7,'# 报名\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190909141758.png)\n1、获取35小时（[PDU](http://www.pmptuan.com/faq/7001.html)）以上涵盖美国项目管理知识体系中九大知识领域的培训证书；\n\n2、在网上提交英文申请材料；\n英文网站报名：[https://pmi.org/](https://pmi.org/)\n报名步骤参考：[https://wenku.baidu.com/view/eae760ed6f1aff00bfd51e2e.html](https://wenku.baidu.com/view/eae760ed6f1aff00bfd51e2e.html)\n报名查看：[https://certification.pmi.org/default.aspx?m=Go+to+PMI+Certification+Program+Overview](https://certification.pmi.org/default.aspx?m=Go+to+PMI+Certification+Program+Overview)\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190909141840.png)\n报名注意事项\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190909142329.png)\n\n\n3、材料申报递交一周后会收到PMI回复的确认函，确认审核通过后，可以参加[PMP认证考试](http://www.pmptuan.com/faq/4002.html)，随后需进行中文报名；（需要填写英文网站的账号和密码）\n中文网站（外专局）报名：[http://user.chinapmp.cn/examsign.shtml](http://user.chinapmp.cn/examsign.shtml)\n报名步骤：[http://exam.chinapmp.cn/aboutexam-view-8.shtml](http://exam.chinapmp.cn/aboutexam-view-8.shtml)\n报名步骤参考：[https://wenku.baidu.com/view/bfe8f74e76a20029bc642d03.html?from=search](https://wenku.baidu.com/view/bfe8f74e76a20029bc642d03.html?from=search)\n\n4、中文报名审核后，可以进行中国区安排的PMP认证考试；\n等待审核通过后缴费3900元。只在中文网站缴费即可。\n\n5、申请资料审查即复审（PMP认证部按一定比例抽查审核申请资料。提交给PMI证书部的任何虚假和错误信息将受到惩罚，包括中止或撤消考试资格或证书）；\n\n6、申请合格通知（如果考生的报名资料合格的话，在[PMP考试](http://www.pmptuan.com/faq/3001.html)前1-2周左右，PMI会将合格申请者的PMP认证考试资格信寄给PMI中国代表处，大陆各地考试报名点会通知考生）；\n\n7、收到PMI确认信（即准考证），表示已被允许考试；\n\n8、向考试中心核实考试时间、地点及其他安排；\n\n9、参加PMP考试；\n\n10、在考试后4—6周，您可以登陆PMI网站查看自己是否通过考试；\n\n11、在考后8—12周，PMI会将证书邮寄给PMI中国代表处，由PMI中国代表处发放通过学员的证\n\n# 准备\n1、**PMP试卷**是200道单项选择题，中英文对照\n\n2、其中25道题目不计分，计分题答对106道就可以通过考试\n\n3、不计分的题是按照正确率最高和最低的来选择的\n\n4、包含5大过程组和10大知识领域的相关知识\n\n5、一般情况能做对130道左右就能通过考试\n![](https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190909142235.png)\n\n##  看精讲和串讲视频；\n##  做练习题；（除了套题之外，一下网站可参考）\nPMP知多少：[http://www.pmptuan.com/faq/5012.html](http://www.pmptuan.com/faq/5012.html)\nPMP刷题：[https://www.netkao.com/exam/pmp.html](https://www.netkao.com/exam/pmp.html)\n希赛网视频：[https://www.educity.cn/shipin/cg44.html](https://www.educity.cn/shipin/cg44.html)\n希赛网每日一练：[https://www.educity.cn/tiku/dailyPractice44.html](https://www.educity.cn/tiku/dailyPractice44.html)\n\n# 考试\n\n\n一、**考试前一天**\n\n1、如果考场离家较远，建议提前一天到考场附近预定酒店住宿，避免考试当天迟到，同时晚上还可以多休息一会儿（考场附件酒店比较紧俏，建议提前预定）。\n\n2、时间允许的考生，建议提前一天踩考点，了解路线和所在教室。\n\n3、考点一般都是选择在学校，停车位紧张，建议首选公共交通。\n\n4、确认准考信已经打印，连同身份证一起装袋准备好（若身份证丢失，请提前跟班主任沟通确认替代证件）。\n\n \n\n二、**考前准备**\n\n1、请8：00达到考场候场，8：30即可进入考场；\n\n2、8：30-40左右监考老师会宣读考场规则、考试要求、核对考号、考生信息、座位号，然后发放试卷；\n\n3、不要迟到哦，考试开始后，不允许进入考场。\n\n4、考场会为每个考生准备：铅笔、橡皮、尺子、计算器等考试用品，考生只需携带准考信和身份证即可；\n\n5、考场一般会有悬挂或者投影的钟表提示时间，考生不能携带手表进入考场，\n\n6、教材、讲义、模拟题等学习材料，以及手机、电脑等电子设备带入考场后，开始考试前，需要放到监考老师指定的地方，建议少带，贵重物品建议不带，以免发生丢失。\n\n \n\n三、**关于饮食建议**\n\n1、考前一周建议清单饮食为主，保持良好身体状态有助于考试的发挥；\n\n2、考场会为考生准备一瓶矿泉水，考生无需携带；\n\n3、考试时间持续4个小时（9：00-13：00），必要的能量补充有助于考试的发挥，建议携带少量不掉渣的高能量含糖食品（如士力架、巧克力、糖果等）随时补充体力以及增强大脑活跃度；\n\n \n\n四、**考试中相关说明**\n\n1、关于试卷：试卷是装在牛皮纸信封中密封，监考老师会出示密封条并当众拆开试卷；试卷分为不同的颜色（红、黄、绿等），题目一样，不同颜色试卷试题的顺序不同；试卷是中英文对照的，所以比较厚，有时页数会有100多页；\n\n2、为了保障考试的公平性以及考试结果的公正性，考生前后左右人员试卷颜色都不同，也就是说摈除了抄袭旁边学员答案的机会；\n\n3、考试会发放答题卡一张和草稿纸1张；\n\n4、答题卡一共有250道题的选项，考试只需要填涂前200道题即可（PMP考试一共200题）；\n\n5、考试开始前，考场内会有广播告知如何填涂考生信息（考场号、考号、姓名、日期）等；\n\n6、考场约有3-4名监考官。\n\n \n\n五、**关于答题**\n\n1、拿到试卷后，先看下试卷的页数，如果总页数超过100页，说明本次考试题干较长，要注意合理安排读题时间，不要在一道题上徘徊超过1分钟，否则很有可能会时间不够用；\n\n2、为了节省时间，原则上只看中文题干，涉及专业术语翻译不准确再去对照英文题干；\n\n3、做题时如果遇到一时不确定的，建议先做好标记，先把有把握的题做完，再回头做有纠结的题，切记不要在一道题上纠结超过1分钟；\n\n4、答题过程中，建议做完50题涂一次答题卡，不建议全部做完后再涂答题卡，避免因为时间不够而来不及涂答题卡，就很遗憾了；\n\n5、由于您前后左右的人试卷跟您顺序不同，所以做题速度会有有所区别，安排好自己的答题进度，不要受旁边人答题进度的影响，以免心里慌乱影响正常发挥；\n\n6、答题时如果遇到无比纠结不确认的题，以第一印象为准，不要反复修改--有些题就像婚姻，怎么改都觉得错；\n\n7、如果提前做完，务必检查一遍答题卡是否填写正确，确认填涂顺序无误，没有遗漏，再交卷；\n\n \n\n六、**关于中场休息**\n\n1、考试期间可以中场休息，但是没有多余的时间补充，建议考前一周休息好，以确保考试过程中有足够的精力和体力应对4个小时高强度的考试；\n\n2、考试期间可以上卫生间，同一个考场同性别不能同时去，需要上卫生间请举手示意，监考官允诺后方可；\n\n     \n\n七、**关于交卷**\n\n1、考试开始2.5小时后可以交卷，考试结束前15分钟后不允许交卷；\n\n2、试卷、草算纸、考场提供的考试用品均不允许带出考场，草算纸上要署名并和试卷一起交给监考官，如果草算纸没有署名后交给监考官，视为作弊处理；\n\n3、交卷顺序是：答题卡--试卷+草算纸，考试结束的时候会有15分钟的时间，监考官会提议填写考试问卷调查表，此环节可忽略，宝贵的时间可以用来再检查一遍答题卡是否有涂错。\n\n \n\n**最后，祝各位朋友，考的全会，蒙的全对，All Pass**\n','/articles/2019/09/09/1568010345563.html','0',1568010345671,1568010345671,0.3829783853733665,'1','1','','https://raw.githubusercontent.com/samucc/mypicbed/master/images/20190909141758.png',0);
/*!40000 ALTER TABLE `b3_solo_article` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_category`
--

DROP TABLE IF EXISTS `b3_solo_category`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_category` (
  `oId` varchar(19) NOT NULL COMMENT '主键',
  `categoryTitle` varchar(64) NOT NULL COMMENT '分类标题',
  `categoryURI` varchar(255) NOT NULL COMMENT '分类访问路径',
  `categoryDescription` text NOT NULL COMMENT '分类描述',
  `categoryOrder` int(11) NOT NULL COMMENT '分类展现的排序',
  `categoryTagCnt` int(11) NOT NULL COMMENT '分类下聚合的标签计数',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='分类表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_category`
--

LOCK TABLES `b3_solo_category` WRITE;
/*!40000 ALTER TABLE `b3_solo_category` DISABLE KEYS */;
/*!40000 ALTER TABLE `b3_solo_category` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_category_tag`
--

DROP TABLE IF EXISTS `b3_solo_category_tag`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_category_tag` (
  `oId` varchar(19) NOT NULL COMMENT '主键',
  `category_oId` varchar(19) NOT NULL COMMENT '分类 id',
  `tag_oId` varchar(19) NOT NULL COMMENT '标签 id',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='分类-标签关联表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_category_tag`
--

LOCK TABLES `b3_solo_category_tag` WRITE;
/*!40000 ALTER TABLE `b3_solo_category_tag` DISABLE KEYS */;
/*!40000 ALTER TABLE `b3_solo_category_tag` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_comment`
--

DROP TABLE IF EXISTS `b3_solo_comment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_comment` (
  `oId` varchar(19) NOT NULL COMMENT '主键',
  `commentContent` text NOT NULL COMMENT '评论内容',
  `commentCreated` bigint(20) NOT NULL COMMENT '评论时间戳',
  `commentName` varchar(50) NOT NULL COMMENT '评论人名称',
  `commentOnId` varchar(19) NOT NULL COMMENT '评论的文章/页面的 id',
  `commentSharpURL` varchar(255) NOT NULL COMMENT '评论访问路径，带 # 锚点',
  `commentThumbnailURL` text NOT NULL COMMENT '评论人头像图片链接地址',
  `commentURL` varchar(255) NOT NULL COMMENT '评论人链接地址',
  `commentOriginalCommentId` varchar(19) DEFAULT NULL COMMENT '评论回复时原始的评论 id，即父评论 id',
  `commentOriginalCommentName` varchar(50) DEFAULT NULL COMMENT '评论回复时原始的评论人名称，即父评论人名称',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='评论表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_comment`
--

LOCK TABLES `b3_solo_comment` WRITE;
/*!40000 ALTER TABLE `b3_solo_comment` DISABLE KEYS */;
INSERT INTO `b3_solo_comment` VALUES ('1562038292144','世界你好',1562038292136,'samucc','1562038241065','/articles/2019/07/02/1562038241065.html#1562038292144','https://avatars2.githubusercontent.com/u/5812720?v=4','http://jiashu.club','',''),('1562320216605','ces',1562320216603,'samucc','1562119376259','/articles/2019/07/03/1562119376259.html#1562320216605','https://avatars2.githubusercontent.com/u/5812720?v=4','http://jiashu.club','','');
/*!40000 ALTER TABLE `b3_solo_comment` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_link`
--

DROP TABLE IF EXISTS `b3_solo_link`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_link` (
  `oId` varchar(19) NOT NULL COMMENT '主键',
  `linkAddress` varchar(255) NOT NULL COMMENT '链接地址',
  `linkDescription` varchar(255) NOT NULL COMMENT '链接描述',
  `linkOrder` int(11) NOT NULL COMMENT '链接展现的排序',
  `linkTitle` varchar(255) NOT NULL COMMENT '链接标题',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='链接表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_link`
--

LOCK TABLES `b3_solo_link` WRITE;
/*!40000 ALTER TABLE `b3_solo_link` DISABLE KEYS */;
INSERT INTO `b3_solo_link` VALUES ('1562037727825','https://hacpai.com','黑客与画家的社区',0,'黑客派');
/*!40000 ALTER TABLE `b3_solo_link` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_option`
--

DROP TABLE IF EXISTS `b3_solo_option`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_option` (
  `oId` varchar(64) NOT NULL COMMENT '主键',
  `optionValue` text NOT NULL COMMENT '配置项值',
  `optionCategory` varchar(128) NOT NULL COMMENT '配置项分类',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='配置项';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_option`
--

LOCK TABLES `b3_solo_option` WRITE;
/*!40000 ALTER TABLE `b3_solo_option` DISABLE KEYS */;
INSERT INTO `b3_solo_option` VALUES ('allowVisitDraftViaPermalink','false','preference'),('articleListDisplayCount','20','preference'),('articleListPaginationWindowSize','15','preference'),('articleListStyle','titleAndAbstract','preference'),('blogSubtitle','岁月无痕，笔墨留香','preference'),('blogTitle','samucc','preference'),('commentable','false','preference'),('customVars','key0=val0|key1=val1|key2=val2','preference'),('enableArticleUpdateHint','true','preference'),('externalRelevantArticlesDisplayCount','0','preference'),('faviconURL','https://static.b3log.org/images/brand/solo-32.png','preference'),('feedOutputCnt','10','preference'),('feedOutputMode','abstract','preference'),('footerContent','','preference'),('githubRepos','[{\"githubrepoId\":\"41352636\",\"githubrepoStatus\":0,\"oId\":\"1562061304378\",\"githubrepoDescription\":\"Automatically exported from code.google.com/p/jeshop\",\"githubrepoHomepage\":\"\",\"githubrepoForksCount\":0,\"githubrepoOwnerId\":\"5812720\",\"githubrepoStargazersCount\":0,\"githubrepoWatchersCount\":0,\"githubrepoOwnerLogin\":\"samucc\",\"githubrepoHTMLURL\":\"https://github.com/samucc/jeshop\",\"githubrepoLanguage\":\"Java\",\"githubrepoUpdated\":1562061298145,\"githubrepoName\":\"jeshop\",\"githubrepoFullName\":\"samucc/jeshop\"}]','github'),('hljsTheme','atom-one-light','preference'),('htmlHead','<script>\nvar _hmt = _hmt || [];\n(function() {\n  var hm = document.createElement(\"script\");\n  hm.src = \"https://hm.baidu.com/hm.js?f104914545d23421087addb01697503c\";\n  var s = document.getElementsByTagName(\"script\")[0]; \n  s.parentNode.insertBefore(hm, s);\n})();\n</script>','preference'),('localeString','zh_CN','preference'),('metaDescription','samucc blogging system. samucc 的博客系统。','preference'),('metaKeywords','samucc,稀里糊涂,记录,点滴,生活','preference'),('mobileSkinDirName','Bubble','skin'),('mostCommentArticleDisplayCount','5','preference'),('mostUsedTagDisplayCount','20','preference'),('mostViewArticleDisplayCount','5','preference'),('noticeBoard','被记住 很好\n<!-- Open Source, Open Mind, <br/>Open Sight, Open Future! -->\n\n<!-- 公告栏可使用 HTML、JavaScript，比如可以在此加入第三方统计 js -->\n\n','preference'),('pullGitHub','true','preference'),('randomArticlesDisplayCount','5','preference'),('recentArticleDisplayCount','','preference'),('recentCommentDisplayCount','10','preference'),('relevantArticlesDisplayCount','5','preference'),('signs','[{\"signHTML\":\"\",\"oId\":0},{\"signHTML\":\"<hr>\\n\\n标题：{title}<br>\\n作者：<a href=\\\"{blog}\\\" target=\\\"_blank\\\">{author}<\\/a><br>\\n地址：<a href=\\\"{url}\\\" target=\\\"_blank\\\">{url}<\\/a><br>\\n\\n<!-- 签名档内可使用 HTML、JavaScript -->\\n<br>\",\"oId\":1},{\"signHTML\":\"<hr>\\n\\n标题：{title}<br>\\n作者：<a href=\\\"{blog}\\\" target=\\\"_blank\\\">{author}<\\/a><br>\\n地址：<a href=\\\"{url}\\\" target=\\\"_blank\\\">{url}<\\/a><br>\\n\\n<!-- 签名档内可使用 HTML、JavaScript -->\\n<br>\",\"oId\":2},{\"signHTML\":\"<hr>\\n\\n标题：{title}<br>\\n作者：<a href=\\\"{blog}\\\" target=\\\"_blank\\\">{author}<\\/a><br>\\n地址：<a href=\\\"{url}\\\" target=\\\"_blank\\\">{url}<\\/a><br>\\n\\n<!-- 签名档内可使用 HTML、JavaScript -->\\n<br>\",\"oId\":3}]','preference'),('skinDirName','Bubble','skin'),('statisticBlogViewCount','3149','statistic'),('syncGitHub','true','preference'),('timeZoneId','Asia/Shanghai','preference'),('usite','{\"usiteUserId\":\"1562037723730\",\"usiteWeiBo\":\"\",\"usiteStackOverflow\":\"\",\"usiteDribbble\":\"\",\"usiteGitHub\":\"samucc\",\"usiteMedium\":\"\",\"usiteTwitter\":\"\",\"usiteQQ\":\"\",\"usiteLinkedIn\":\"\",\"oId\":\"1562037726459\",\"usiteInstagram\":\"\",\"usiteWeChat\":\"\",\"usiteZhiHu\":\"\",\"usiteBehance\":\"\",\"usiteTelegram\":\"\",\"usiteFacebook\":\"\"}','hacpai'),('version','3.6.4','preference');
/*!40000 ALTER TABLE `b3_solo_option` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_page`
--

DROP TABLE IF EXISTS `b3_solo_page`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_page` (
  `oId` varchar(19) NOT NULL COMMENT '主键',
  `pageOrder` int(11) NOT NULL COMMENT '页面展现排序',
  `pagePermalink` varchar(255) NOT NULL COMMENT '页面访问路径',
  `pageTitle` varchar(255) NOT NULL COMMENT '页面标题',
  `pageOpenTarget` varchar(255) NOT NULL COMMENT '页面打开方式',
  `pageIcon` varchar(255) NOT NULL COMMENT '页面展示用小图标',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='自定义页面表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_page`
--

LOCK TABLES `b3_solo_page` WRITE;
/*!40000 ALTER TABLE `b3_solo_page` DISABLE KEYS */;
INSERT INTO `b3_solo_page` VALUES ('1562123850868',0,'/my-github-repos','我的开源','_self','/images/github-icon.png');
/*!40000 ALTER TABLE `b3_solo_page` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_plugin`
--

DROP TABLE IF EXISTS `b3_solo_plugin`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_plugin` (
  `oId` varchar(128) NOT NULL COMMENT '主键',
  `author` text NOT NULL COMMENT '插件作者',
  `name` varchar(255) NOT NULL COMMENT '插件名称',
  `status` varchar(10) NOT NULL COMMENT '插件状态，启用：ENABLED，禁用：DISABLED',
  `version` varchar(10) NOT NULL COMMENT '插件版本',
  `setting` text COMMENT '插件配置，JSON 字符串',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='插件表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_plugin`
--

LOCK TABLES `b3_solo_plugin` WRITE;
/*!40000 ALTER TABLE `b3_solo_plugin` DISABLE KEYS */;
INSERT INTO `b3_solo_plugin` VALUES ('Symphony Interest_0.0.1','<a href=\"http://88250.b3log.org\">88250</a>','Symphony Interest','ENABLED','0.0.1','{}'),('Table of Contents Generator_1.0.1','<a href=\"http://88250.b3log.org\">88250</a>','Table of Contents Generator','ENABLED','1.0.1','{}'),('看板娘_0.0.1','<a href=\"http://vanessa.b3log.org\">Vanessa</a>','看板娘','ENABLED','0.0.1','{}');
/*!40000 ALTER TABLE `b3_solo_plugin` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_tag`
--

DROP TABLE IF EXISTS `b3_solo_tag`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_tag` (
  `oId` varchar(19) NOT NULL COMMENT '主键',
  `tagTitle` varchar(255) NOT NULL COMMENT '标签标题',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='标签表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_tag`
--

LOCK TABLES `b3_solo_tag` WRITE;
/*!40000 ALTER TABLE `b3_solo_tag` DISABLE KEYS */;
INSERT INTO `b3_solo_tag` VALUES ('1562038241118','solo安装'),('1562038241171','docker'),('1562118592627','picgo'),('1562118592729','GitHub'),('1562118760703','图床'),('1562119376310','GCP'),('1562119376361','SSR'),('1562119376412','VPN'),('1562123850638','开源'),('1562313719964','AliPlayer'),('1562313720016','视频播放'),('1562553987722','待分类'),('1563260290118','IPMITools'),('1563260290169','ipmi'),('1563260290220','IPMI-Exporter'),('1563260290271','prometheus'),('1563261094716','Mapbox离线地图'),('1563261094767','瓦片文件下载'),('1563261590255','资产标签二维码生成'),('1563261590306','打印'),('1563262364889','MySQL集群搭建'),('1563262967859','Consul'),('1563262967910','集群'),('1563263255017','普罗'),('1563263255068','ZABBIX'),('1563263255119','告警.钉钉'),('1563518615256','IDC'),('1563518615310','机房'),('1563518615367','主机'),('1563518615418','网络'),('1565165800306','x86'),('1565165800358','ansible'),('1565165800409','node_exporter'),('1565168296099','freeipmi'),('1565168296150','ipmitool'),('1566524441017','grafana'),('1566524441096','cmdb'),('1566525315034','smartd'),('1566525315086','disk'),('1566868475818','nagios'),('1566868475870','bmc'),('1568010345620','PMP考试');
/*!40000 ALTER TABLE `b3_solo_tag` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_tag_article`
--

DROP TABLE IF EXISTS `b3_solo_tag_article`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_tag_article` (
  `oId` varchar(19) NOT NULL COMMENT '主键',
  `article_oId` varchar(19) NOT NULL COMMENT '文章 id',
  `tag_oId` varchar(19) NOT NULL COMMENT '标签 id',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='标签-文章关联表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_tag_article`
--

LOCK TABLES `b3_solo_tag_article` WRITE;
/*!40000 ALTER TABLE `b3_solo_tag_article` DISABLE KEYS */;
INSERT INTO `b3_solo_tag_article` VALUES ('1562038241222','1562038241065','1562038241118'),('1562038241273','1562038241065','1562038241171'),('1562118592780','1562118592576','1562118592627'),('1562118592882','1562118592576','1562118592729'),('1562118760753','1562118592576','1562118760703'),('1562119376463','1562119376259','1562119376310'),('1562119376513','1562119376259','1562119376361'),('1562119376564','1562119376259','1562119376412'),('1562123850690','1562123850587','1562123850638'),('1562123850741','1562123850587','1562118592729'),('1562313720067','1562313070127','1562313719964'),('1562313720118','1562313070127','1562313720016'),('1562553987773','1562553987668','1562553987722'),('1563260290322','1563260290067','1563260290118'),('1563260290372','1563260290067','1563260290169'),('1563260290423','1563260290067','1563260290220'),('1563260290474','1563260290067','1563260290271'),('1563261094818','1563261094665','1563261094716'),('1563261094868','1563261094665','1563261094767'),('1563261590357','1563261590204','1563261590255'),('1563261590407','1563261590204','1563261590306'),('1563262364939','1563262364838','1563262364889'),('1563262967961','1563262967809','1563262967859'),('1563262968012','1563262967809','1563262967910'),('1563263255169','1563263254966','1563263255017'),('1563263255220','1563263254966','1563263255068'),('1563263255271','1563263254966','1563263255119'),('1563518615469','1563518615205','1563518615256'),('1563518615520','1563518615205','1563518615310'),('1563518615571','1563518615205','1563518615367'),('1563518615621','1563518615205','1563518615418'),('1565165800460','1565165800252','1565165800306'),('1565165800511','1565165800252','1565165800358'),('1565165800562','1565165800252','1565165800409'),('1565168296204','1565168296048','1565168296099'),('1565168296254','1565168296048','1565168296150'),('1565168296305','1565168296048','1563260290271'),('1565168296356','1565168296048','1565165800358'),('1566524441146','1566524440966','1566524441017'),('1566524441197','1566524440966','1563260290169'),('1566524441248','1566524440966','1566524441096'),('1566525315136','1566525314983','1566525315034'),('1566525315187','1566525314983','1566525315086'),('1566868475921','1566868475767','1566868475818'),('1566868475977','1566868475767','1566868475870'),('1568010345671','1568010345563','1568010345620');
/*!40000 ALTER TABLE `b3_solo_tag_article` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `b3_solo_user`
--

DROP TABLE IF EXISTS `b3_solo_user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `b3_solo_user` (
  `oId` varchar(19) NOT NULL COMMENT '主键',
  `userName` varchar(255) NOT NULL COMMENT '用户名',
  `userURL` varchar(255) NOT NULL COMMENT '用户链接地址',
  `userRole` varchar(255) NOT NULL COMMENT '用户角色，管理员：adminRole，普通用户：defaultRole，访客用户：visitorRole',
  `userAvatar` varchar(255) NOT NULL COMMENT '用户头像图片链接地址',
  `userB3Key` varchar(64) NOT NULL COMMENT 'B3log Key',
  `userGitHubId` varchar(32) NOT NULL COMMENT '用户 GitHub Open Id',
  PRIMARY KEY (`oId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户表';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `b3_solo_user`
--

LOCK TABLES `b3_solo_user` WRITE;
/*!40000 ALTER TABLE `b3_solo_user` DISABLE KEYS */;
INSERT INTO `b3_solo_user` VALUES ('1562037727771','samucc','http://jiashu.club','adminRole','https://avatars2.githubusercontent.com/u/5812720?v=4','5812720','5812720'),('1562055245610','sjw0120','http://jiashu.club','defaultRole','https://avatars0.githubusercontent.com/u/43226769?v=4','43226769','43226769'),('1562055588326','SwordOfLine','http://jiashu.club','visitorRole','https://avatars2.githubusercontent.com/u/31266059?v=4','31266059','31266059'),('1562320378863','ltao0420','http://jiashu.club','visitorRole','https://avatars1.githubusercontent.com/u/33916864?v=4','33916864','33916864');
/*!40000 ALTER TABLE `b3_solo_user` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2019-09-27  3:27:29
